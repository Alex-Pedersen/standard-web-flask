!function(e,t){var n,i,o=e.document,r=e.location,s=e.navigator,a=e.jQuery,l=e.$,u=Array.prototype.push,c=Array.prototype.slice,f=Array.prototype.indexOf,d=Object.prototype.toString,p=Object.prototype.hasOwnProperty,h=String.prototype.trim,m=function(e,t){return new m.fn.init(e,t,n)},g=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,v=/\S/,y=/\s+/,b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,w=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,T=/(?:^|:|,)(?:\s*\[)+/g,C=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,S=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,_=/^-ms-/,E=/-([\da-z])/gi,M=function(e,t){return(t+"").toUpperCase()},D=function(){if(o.addEventListener){o.removeEventListener("DOMContentLoaded",D,false);m.ready()}else if(o.readyState==="complete"){o.detachEvent("onreadystatechange",D);m.ready()}},O={};m.fn=m.prototype={constructor:m,init:function(e,n,i){var r,s,a,l;if(!e){return this}if(e.nodeType){this.context=this[0]=e;this.length=1;return this}if(typeof e==="string"){if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3){r=[null,e,null]}else{r=x.exec(e)}if(r&&(r[1]||!n)){if(r[1]){n=n instanceof m?n[0]:n;l=n&&n.nodeType?n.ownerDocument||n:o;e=m.parseHTML(r[1],l,true);if(w.test(r[1])&&m.isPlainObject(n)){this.attr.call(e,n,true)}return m.merge(this,e)}else{s=o.getElementById(r[2]);if(s&&s.parentNode){if(s.id!==r[2]){return i.find(e)}this.length=1;this[0]=s}this.context=o;this.selector=e;return this}}else if(!n||n.jquery){return(n||i).find(e)}else{return this.constructor(n).find(e)}}else if(m.isFunction(e)){return i.ready(e)}if(e.selector!==t){this.selector=e.selector;this.context=e.context}return m.makeArray(e,this)},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return c.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var i=m.merge(this.constructor(),e);i.prevObject=this;i.context=this.context;if(t==="find"){i.selector=this.selector+(this.selector?" ":"")+n}else if(t){i.selector=this.selector+"."+t+"("+n+")"}return i},each:function(e,t){return m.each(this,e,t)},ready:function(e){m.ready.promise().done(e);return this},eq:function(e){e=+e;return e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(c.apply(this,arguments),"slice",c.call(arguments).join(","))},map:function(e){return this.pushStack(m.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:u,sort:[].sort,splice:[].splice};m.fn.init.prototype=m.fn;m.extend=m.fn.extend=function(){var e,n,i,o,r,s,a=arguments[0]||{},l=1,u=arguments.length,c=false;if(typeof a==="boolean"){c=a;a=arguments[1]||{};l=2}if(typeof a!=="object"&&!m.isFunction(a)){a={}}if(u===l){a=this;--l}for(;l<u;l++){if((e=arguments[l])!=null){for(n in e){i=a[n];o=e[n];if(a===o){continue}if(c&&o&&(m.isPlainObject(o)||(r=m.isArray(o)))){if(r){r=false;s=i&&m.isArray(i)?i:[]}else{s=i&&m.isPlainObject(i)?i:{}}a[n]=m.extend(c,s,o)}else if(o!==t){a[n]=o}}}}return a};m.extend({noConflict:function(t){if(e.$===m){e.$=l}if(t&&e.jQuery===m){e.jQuery=a}return m},isReady:false,readyWait:1,holdReady:function(e){if(e){m.readyWait++}else{m.ready(true)}},ready:function(e){if(e===true?--m.readyWait:m.isReady){return}if(!o.body){return setTimeout(m.ready,1)}m.isReady=true;if(e!==true&&--m.readyWait>0){return}i.resolveWith(o,[m]);if(m.fn.trigger){m(o).trigger("ready").off("ready")}},isFunction:function(e){return m.type(e)==="function"},isArray:Array.isArray||function(e){return m.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):O[d.call(e)]||"object"},isPlainObject:function(e){if(!e||m.type(e)!=="object"||e.nodeType||m.isWindow(e)){return false}try{if(e.constructor&&!p.call(e,"constructor")&&!p.call(e.constructor.prototype,"isPrototypeOf")){return false}}catch(n){return false}var i;for(i in e){}return i===t||p.call(e,i)},isEmptyObject:function(e){var t;for(t in e){return false}return true},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var i;if(!e||typeof e!=="string"){return null}if(typeof t==="boolean"){n=t;t=0}t=t||o;if(i=w.exec(e)){return[t.createElement(i[1])]}i=m.buildFragment([e],t,n?null:[]);return m.merge([],(i.cacheable?m.clone(i.fragment):i.fragment).childNodes)},parseJSON:function(t){if(!t||typeof t!=="string"){return null}t=m.trim(t);if(e.JSON&&e.JSON.parse){return e.JSON.parse(t)}if(k.test(t.replace(C,"@").replace(S,"]").replace(T,""))){return new Function("return "+t)()}m.error("Invalid JSON: "+t)},parseXML:function(n){var i,o;if(!n||typeof n!=="string"){return null}try{if(e.DOMParser){o=new DOMParser;i=o.parseFromString(n,"text/xml")}else{i=new ActiveXObject("Microsoft.XMLDOM");i.async="false";i.loadXML(n)}}catch(r){i=t}if(!i||!i.documentElement||i.getElementsByTagName("parsererror").length){m.error("Invalid XML: "+n)}return i},noop:function(){},globalEval:function(t){if(t&&v.test(t)){(e.execScript||function(t){e["eval"].call(e,t)})(t)}},camelCase:function(e){return e.replace(_,"ms-").replace(E,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,n,i){var o,r=0,s=e.length,a=s===t||m.isFunction(e);if(i){if(a){for(o in e){if(n.apply(e[o],i)===false){break}}}else{for(;r<s;){if(n.apply(e[r++],i)===false){break}}}}else{if(a){for(o in e){if(n.call(e[o],o,e[o])===false){break}}}else{for(;r<s;){if(n.call(e[r],r,e[r++])===false){break}}}}return e},trim:h&&!h.call("﻿ ")?function(e){return e==null?"":h.call(e)}:function(e){return e==null?"":(e+"").replace(b,"")},makeArray:function(e,t){var n,i=t||[];if(e!=null){n=m.type(e);if(e.length==null||n==="string"||n==="function"||n==="regexp"||m.isWindow(e)){u.call(i,e)}else{m.merge(i,e)}}return i},inArray:function(e,t,n){var i;if(t){if(f){return f.call(t,e,n)}i=t.length;n=n?n<0?Math.max(0,i+n):n:0;for(;n<i;n++){if(n in t&&t[n]===e){return n}}}return-1},merge:function(e,n){var i=n.length,o=e.length,r=0;if(typeof i==="number"){for(;r<i;r++){e[o++]=n[r]}}else{while(n[r]!==t){e[o++]=n[r++]}}e.length=o;return e},grep:function(e,t,n){var i,o=[],r=0,s=e.length;n=!!n;for(;r<s;r++){i=!!t(e[r],r);if(n!==i){o.push(e[r])}}return o},map:function(e,n,i){var o,r,s=[],a=0,l=e.length,u=e instanceof m||l!==t&&typeof l==="number"&&(l>0&&e[0]&&e[l-1]||l===0||m.isArray(e));if(u){for(;a<l;a++){o=n(e[a],a,i);if(o!=null){s[s.length]=o}}}else{for(r in e){o=n(e[r],r,i);if(o!=null){s[s.length]=o}}}return s.concat.apply([],s)},guid:1,proxy:function(e,n){var i,o,r;if(typeof n==="string"){i=e[n];n=e;e=i}if(!m.isFunction(e)){return t}o=c.call(arguments,2);r=function(){return e.apply(n,o.concat(c.call(arguments)))};r.guid=e.guid=e.guid||m.guid++;return r},access:function(e,n,i,o,r,s,a){var l,u=i==null,c=0,f=e.length;if(i&&typeof i==="object"){for(c in i){m.access(e,n,c,i[c],1,s,o)}r=1}else if(o!==t){l=a===t&&m.isFunction(o);if(u){if(l){l=n;n=function(e,t,n){return l.call(m(e),n)}}else{n.call(e,o);n=null}}if(n){for(;c<f;c++){n(e[c],i,l?o.call(e[c],c,n(e[c],i)):o,a)}}r=1}return r?e:u?n.call(e):f?n(e[0],i):s},now:function(){return(new Date).getTime()}});m.ready.promise=function(t){if(!i){i=m.Deferred();if(o.readyState==="complete"){setTimeout(m.ready,1)}else if(o.addEventListener){o.addEventListener("DOMContentLoaded",D,false);e.addEventListener("load",m.ready,false)}else{o.attachEvent("onreadystatechange",D);e.attachEvent("onload",m.ready);var n=false;try{n=e.frameElement==null&&o.documentElement}catch(r){}if(n&&n.doScroll){!function s(){if(!m.isReady){try{n.doScroll("left")}catch(e){return setTimeout(s,50)}m.ready()}}()}}}return i.promise(t)};m.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){O["[object "+t+"]"]=t.toLowerCase()});n=m(o);var N={};function L(e){var t=N[e]={};m.each(e.split(y),function(e,n){t[n]=true});return t}m.Callbacks=function(e){e=typeof e==="string"?N[e]||L(e):m.extend({},e);var n,i,o,r,s,a,l=[],u=!e.once&&[],c=function(t){n=e.memory&&t;i=true;a=r||0;r=0;s=l.length;o=true;for(;l&&a<s;a++){if(l[a].apply(t[0],t[1])===false&&e.stopOnFalse){n=false;break}}o=false;if(l){if(u){if(u.length){c(u.shift())}}else if(n){l=[]}else{f.disable()}}},f={add:function(){if(l){var t=l.length;!function i(t){m.each(t,function(t,n){var o=m.type(n);if(o==="function"){if(!e.unique||!f.has(n)){l.push(n)}}else if(n&&n.length&&o!=="string"){i(n)}})}(arguments);if(o){s=l.length}else if(n){r=t;c(n)}}return this},remove:function(){if(l){m.each(arguments,function(e,t){var n;while((n=m.inArray(t,l,n))>-1){l.splice(n,1);if(o){if(n<=s){s--}if(n<=a){a--}}}})}return this},has:function(e){return m.inArray(e,l)>-1},empty:function(){l=[];return this},disable:function(){l=u=n=t;return this},disabled:function(){return!l},lock:function(){u=t;if(!n){f.disable()}return this},locked:function(){return!u},fireWith:function(e,t){t=t||[];t=[e,t.slice?t.slice():t];if(l&&(!i||u)){if(o){u.push(t)}else{c(t)}}return this},fire:function(){f.fireWith(this,arguments);return this},fired:function(){return!!i}};return f};m.extend({Deferred:function(e){var t=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){o.done(arguments).fail(arguments);return this},then:function(){var e=arguments;return m.Deferred(function(n){m.each(t,function(t,i){var r=i[0],s=e[t];o[i[1]](m.isFunction(s)?function(){var e=s.apply(this,arguments);if(e&&m.isFunction(e.promise)){e.promise().done(n.resolve).fail(n.reject).progress(n.notify)}else{n[r+"With"](this===o?n:this,[e])}}:n[r])});e=null}).promise()},promise:function(e){return e!=null?m.extend(e,i):i}},o={};i.pipe=i.then;m.each(t,function(e,r){var s=r[2],a=r[3];i[r[1]]=s.add;if(a){s.add(function(){n=a},t[e^1][2].disable,t[2][2].lock)}o[r[0]]=s.fire;o[r[0]+"With"]=s.fireWith});i.promise(o);if(e){e.call(o,o)}return o},when:function(e){var t=0,n=c.call(arguments),i=n.length,o=i!==1||e&&m.isFunction(e.promise)?i:0,r=o===1?e:m.Deferred(),s=function(e,t,n){return function(i){t[e]=this;n[e]=arguments.length>1?c.call(arguments):i;if(n===a){r.notifyWith(t,n)}else if(!--o){r.resolveWith(t,n)}}},a,l,u;if(i>1){a=new Array(i);l=new Array(i);u=new Array(i);for(;t<i;t++){if(n[t]&&m.isFunction(n[t].promise)){n[t].promise().done(s(t,u,n)).fail(r.reject).progress(s(t,l,a))}else{--o}}}if(!o){r.resolveWith(u,n)}return r.promise()}});m.support=function(){var t,n,i,r,s,a,l,u,c,f,d,p=o.createElement("div");p.setAttribute("className","t");p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";n=p.getElementsByTagName("*");i=p.getElementsByTagName("a")[0];if(!n||!i||!n.length){return{}}r=o.createElement("select");s=r.appendChild(o.createElement("option"));a=p.getElementsByTagName("input")[0];i.style.cssText="top:1px;float:left;opacity:.5";t={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(i.getAttribute("style")),hrefNormalized:i.getAttribute("href")==="/a",opacity:/^0.5/.test(i.style.opacity),cssFloat:!!i.style.cssFloat,checkOn:a.value==="on",optSelected:s.selected,getSetAttribute:p.className!=="t",enctype:!!o.createElement("form").enctype,html5Clone:o.createElement("nav").cloneNode(true).outerHTML!=="<:nav></:nav>",boxModel:o.compatMode==="CSS1Compat",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true,boxSizingReliable:true,pixelPosition:false};a.checked=true;t.noCloneChecked=a.cloneNode(true).checked;r.disabled=true;t.optDisabled=!s.disabled;try{delete p.test}catch(h){t.deleteExpando=false}if(!p.addEventListener&&p.attachEvent&&p.fireEvent){p.attachEvent("onclick",d=function(){t.noCloneEvent=false});p.cloneNode(true).fireEvent("onclick");p.detachEvent("onclick",d)}a=o.createElement("input");a.value="t";a.setAttribute("type","radio");t.radioValue=a.value==="t";a.setAttribute("checked","checked");a.setAttribute("name","t");p.appendChild(a);l=o.createDocumentFragment();l.appendChild(p.lastChild);t.checkClone=l.cloneNode(true).cloneNode(true).lastChild.checked;t.appendChecked=a.checked;l.removeChild(a);l.appendChild(p);if(p.attachEvent){for(c in{submit:true,change:true,focusin:true}){u="on"+c;f=u in p;if(!f){p.setAttribute(u,"return;");f=typeof p[u]==="function"}t[c+"Bubbles"]=f}}m(function(){var n,i,r,s,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",l=o.getElementsByTagName("body")[0];if(!l){return}n=o.createElement("div");n.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px";l.insertBefore(n,l.firstChild);i=o.createElement("div");n.appendChild(i);i.innerHTML="<table><tr><td></td><td>t</td></tr></table>";r=i.getElementsByTagName("td");r[0].style.cssText="padding:0;margin:0;border:0;display:none";f=r[0].offsetHeight===0;r[0].style.display="";r[1].style.display="none";t.reliableHiddenOffsets=f&&r[0].offsetHeight===0;i.innerHTML="";i.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";t.boxSizing=i.offsetWidth===4;t.doesNotIncludeMarginInBodyOffset=l.offsetTop!==1;if(e.getComputedStyle){t.pixelPosition=(e.getComputedStyle(i,null)||{}).top!=="1%";t.boxSizingReliable=(e.getComputedStyle(i,null)||{width:"4px"}).width==="4px";s=o.createElement("div");s.style.cssText=i.style.cssText=a;s.style.marginRight=s.style.width="0";i.style.width="1px";i.appendChild(s);t.reliableMarginRight=!parseFloat((e.getComputedStyle(s,null)||{}).marginRight)}if(typeof i.style.zoom!=="undefined"){i.innerHTML="";i.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1";t.inlineBlockNeedsLayout=i.offsetWidth===3;i.style.display="block";i.style.overflow="visible";i.innerHTML="<div></div>";i.firstChild.style.width="5px";t.shrinkWrapBlocks=i.offsetWidth!==3;n.style.zoom=1}l.removeChild(n);n=i=r=s=null});l.removeChild(p);n=i=r=s=a=l=p=null;return t}();var P=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,H=/([A-Z])/g;m.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(m.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?m.cache[e[m.expando]]:e[m.expando];return!!e&&!I(e)},data:function(e,n,i,o){if(!m.acceptData(e)){return}var r,s,a=m.expando,l=typeof n==="string",u=e.nodeType,c=u?m.cache:e,f=u?e[a]:e[a]&&a;if((!f||!c[f]||!o&&!c[f].data)&&l&&i===t){return}if(!f){if(u){e[a]=f=m.deletedIds.pop()||m.guid++}else{f=a}}if(!c[f]){c[f]={};if(!u){c[f].toJSON=m.noop}}if(typeof n==="object"||typeof n==="function"){if(o){c[f]=m.extend(c[f],n)}else{c[f].data=m.extend(c[f].data,n)}}r=c[f];if(!o){if(!r.data){r.data={}}r=r.data}if(i!==t){r[m.camelCase(n)]=i}if(l){s=r[n];if(s==null){s=r[m.camelCase(n)]}}else{s=r}return s},removeData:function(e,t,n){if(!m.acceptData(e)){return}var i,o,r,s=e.nodeType,a=s?m.cache:e,l=s?e[m.expando]:m.expando;if(!a[l]){return}if(t){i=n?a[l]:a[l].data;if(i){if(!m.isArray(t)){if(t in i){t=[t]}else{t=m.camelCase(t);if(t in i){t=[t]}else{t=t.split(" ")}}}for(o=0,r=t.length;o<r;o++){delete i[t[o]]}if(!(n?I:m.isEmptyObject)(i)){return}}}if(!n){delete a[l].data;if(!I(a[l])){return}}if(s){m.cleanData([e],true)}else if(m.support.deleteExpando||a!=a.window){delete a[l]}else{a[l]=null}},_data:function(e,t,n){return m.data(e,t,n,true)},acceptData:function(e){var t=e.nodeName&&m.noData[e.nodeName.toLowerCase()];return!t||t!==true&&e.getAttribute("classid")===t}});m.fn.extend({data:function(e,n){var i,o,r,s,a,l=this[0],u=0,c=null;if(e===t){if(this.length){c=m.data(l);if(l.nodeType===1&&!m._data(l,"parsedAttrs")){r=l.attributes;for(a=r.length;u<a;u++){s=r[u].name;if(!s.indexOf("data-")){s=m.camelCase(s.substring(5));A(l,s,c[s])}}m._data(l,"parsedAttrs",true)}}return c}if(typeof e==="object"){return this.each(function(){m.data(this,e)})}i=e.split(".",2);i[1]=i[1]?"."+i[1]:"";o=i[1]+"!";return m.access(this,function(n){if(n===t){c=this.triggerHandler("getData"+o,[i[0]]);if(c===t&&l){c=m.data(l,e);c=A(l,e,c)}return c===t&&i[1]?this.data(i[0]):c}i[1]=n;this.each(function(){var t=m(this);t.triggerHandler("setData"+o,i);m.data(this,e,n);t.triggerHandler("changeData"+o,i)})},null,n,arguments.length>1,null,false)},removeData:function(e){return this.each(function(){m.removeData(this,e)})}});function A(e,n,i){if(i===t&&e.nodeType===1){var o="data-"+n.replace(H,"-$1").toLowerCase();i=e.getAttribute(o);if(typeof i==="string"){try{i=i==="true"?true:i==="false"?false:i==="null"?null:+i+""===i?+i:P.test(i)?m.parseJSON(i):i}catch(r){}m.data(e,n,i)}else{i=t}}return i}function I(e){var t;for(t in e){if(t==="data"&&m.isEmptyObject(e[t])){continue}if(t!=="toJSON"){return false}}return true}m.extend({queue:function(e,t,n){var i;if(e){t=(t||"fx")+"queue";i=m._data(e,t);if(n){if(!i||m.isArray(n)){i=m._data(e,t,m.makeArray(n))}else{i.push(n)}}return i||[]}},dequeue:function(e,t){t=t||"fx";var n=m.queue(e,t),i=n.length,o=n.shift(),r=m._queueHooks(e,t),s=function(){m.dequeue(e,t)};if(o==="inprogress"){o=n.shift();i--}if(o){if(t==="fx"){n.unshift("inprogress")}delete r.stop;o.call(e,s,r)}if(!i&&r){r.empty.fire()}},_queueHooks:function(e,t){var n=t+"queueHooks";return m._data(e,n)||m._data(e,n,{empty:m.Callbacks("once memory").add(function(){m.removeData(e,t+"queue",true);m.removeData(e,n,true)})})}});m.fn.extend({queue:function(e,n){var i=2;if(typeof e!=="string"){n=e;e="fx";i--}if(arguments.length<i){return m.queue(this[0],e)}return n===t?this:this.each(function(){var t=m.queue(this,e,n);m._queueHooks(this,e);if(e==="fx"&&t[0]!=="inprogress"){m.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){m.dequeue(this,e)})},delay:function(e,t){e=m.fx?m.fx.speeds[e]||e:e;t=t||"fx";return this.queue(t,function(t,n){var i=setTimeout(t,e);n.stop=function(){clearTimeout(i)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var i,o=1,r=m.Deferred(),s=this,a=this.length,l=function(){if(!--o){r.resolveWith(s,[s])}};if(typeof e!=="string"){n=e;e=t}e=e||"fx";while(a--){i=m._data(s[a],e+"queueHooks");if(i&&i.empty){o++;i.empty.add(l)}}l();return r.promise(n)}});var R,F,B,W=/[\t\r\n]/g,j=/\r/g,$=/^(?:button|input)$/i,z=/^(?:button|input|object|select|textarea)$/i,q=/^a(?:rea|)$/i,U=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,X=m.support.getSetAttribute;m.fn.extend({attr:function(e,t){return m.access(this,m.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){m.removeAttr(this,e)})},prop:function(e,t){return m.access(this,m.prop,e,t,arguments.length>1)},removeProp:function(e){e=m.propFix[e]||e;return this.each(function(){try{this[e]=t;delete this[e]}catch(n){}})},addClass:function(e){var t,n,i,o,r,s,a;if(m.isFunction(e)){return this.each(function(t){m(this).addClass(e.call(this,t,this.className))})}if(e&&typeof e==="string"){t=e.split(y);for(n=0,i=this.length;n<i;n++){o=this[n];if(o.nodeType===1){if(!o.className&&t.length===1){o.className=e}else{r=" "+o.className+" ";for(s=0,a=t.length;s<a;s++){if(r.indexOf(" "+t[s]+" ")<0){r+=t[s]+" "}}o.className=m.trim(r)}}}}return this},removeClass:function(e){var n,i,o,r,s,a,l;if(m.isFunction(e)){return this.each(function(t){m(this).removeClass(e.call(this,t,this.className))})}if(e&&typeof e==="string"||e===t){n=(e||"").split(y);for(a=0,l=this.length;a<l;a++){o=this[a];if(o.nodeType===1&&o.className){i=(" "+o.className+" ").replace(W," ");for(r=0,s=n.length;r<s;r++){while(i.indexOf(" "+n[r]+" ")>=0){i=i.replace(" "+n[r]+" "," ")}}o.className=e?m.trim(i):""}}}return this},toggleClass:function(e,t){var n=typeof e,i=typeof t==="boolean";if(m.isFunction(e)){return this.each(function(n){m(this).toggleClass(e.call(this,n,this.className,t),t)})}return this.each(function(){if(n==="string"){var o,r=0,s=m(this),a=t,l=e.split(y);while(o=l[r++]){a=i?a:!s.hasClass(o);s[a?"addClass":"removeClass"](o)}}else if(n==="undefined"||n==="boolean"){if(this.className){m._data(this,"__className__",this.className)}this.className=this.className||e===false?"":m._data(this,"__className__")||""}})},hasClass:function(e){var t=" "+e+" ",n=0,i=this.length;for(;n<i;n++){if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(W," ").indexOf(t)>=0){return true}}return false},val:function(e){var n,i,o,r=this[0];if(!arguments.length){if(r){n=m.valHooks[r.type]||m.valHooks[r.nodeName.toLowerCase()];if(n&&"get"in n&&(i=n.get(r,"value"))!==t){return i}i=r.value;return typeof i==="string"?i.replace(j,""):i==null?"":i}return}o=m.isFunction(e);return this.each(function(i){var r,s=m(this);if(this.nodeType!==1){return}if(o){r=e.call(this,i,s.val())}else{r=e}if(r==null){r=""}else if(typeof r==="number"){r+=""}else if(m.isArray(r)){r=m.map(r,function(e){return e==null?"":e+""})}n=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()];if(!n||!("set"in n)||n.set(this,r,"value")===t){this.value=r}})}});m.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,i=e.options,o=e.selectedIndex,r=e.type==="select-one"||o<0,s=r?null:[],a=r?o+1:i.length,l=o<0?a:r?o:0;for(;l<a;l++){n=i[l];if((n.selected||l===o)&&(m.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!m.nodeName(n.parentNode,"optgroup"))){t=m(n).val();if(r){return t}s.push(t)}}return s},set:function(e,t){var n=m.makeArray(t);m(e).find("option").each(function(){this.selected=m.inArray(m(this).val(),n)>=0});if(!n.length){e.selectedIndex=-1}return n}}},attrFn:{},attr:function(e,n,i,o){var r,s,a,l=e.nodeType;if(!e||l===3||l===8||l===2){return}if(o&&m.isFunction(m.fn[n])){return m(e)[n](i)}if(typeof e.getAttribute==="undefined"){return m.prop(e,n,i)}a=l!==1||!m.isXMLDoc(e);if(a){n=n.toLowerCase();s=m.attrHooks[n]||(U.test(n)?F:R)}if(i!==t){if(i===null){m.removeAttr(e,n);return}else if(s&&"set"in s&&a&&(r=s.set(e,i,n))!==t){return r}else{e.setAttribute(n,i+"");return i}}else if(s&&"get"in s&&a&&(r=s.get(e,n))!==null){return r}else{r=e.getAttribute(n);return r===null?t:r}},removeAttr:function(e,t){var n,i,o,r,s=0;if(t&&e.nodeType===1){i=t.split(y);for(;s<i.length;s++){o=i[s];if(o){n=m.propFix[o]||o;r=U.test(o);if(!r){m.attr(e,o,"")}e.removeAttribute(X?o:n);if(r&&n in e){e[n]=false}}}}},attrHooks:{type:{set:function(e,t){if($.test(e.nodeName)&&e.parentNode){m.error("type property can't be changed")}else if(!m.support.radioValue&&t==="radio"&&m.nodeName(e,"input")){var n=e.value;e.setAttribute("type",t);if(n){e.value=n}return t}}},value:{get:function(e,t){if(R&&m.nodeName(e,"button")){return R.get(e,t)}return t in e?e.value:null},set:function(e,t,n){if(R&&m.nodeName(e,"button")){return R.set(e,t,n)}e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,i){var o,r,s,a=e.nodeType;if(!e||a===3||a===8||a===2){return}s=a!==1||!m.isXMLDoc(e);if(s){n=m.propFix[n]||n;r=m.propHooks[n]}if(i!==t){if(r&&"set"in r&&(o=r.set(e,i,n))!==t){return o}else{return e[n]=i}}else{if(r&&"get"in r&&(o=r.get(e,n))!==null){return o}else{return e[n]}}},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):z.test(e.nodeName)||q.test(e.nodeName)&&e.href?0:t}}}});F={get:function(e,n){var i,o=m.prop(e,n);return o===true||typeof o!=="boolean"&&(i=e.getAttributeNode(n))&&i.nodeValue!==false?n.toLowerCase():t},set:function(e,t,n){var i;if(t===false){m.removeAttr(e,n)}else{i=m.propFix[n]||n;if(i in e){e[i]=true}e.setAttribute(n,n.toLowerCase())}return n}};if(!X){B={name:true,id:true,coords:true};R=m.valHooks.button={get:function(e,n){var i;i=e.getAttributeNode(n);return i&&(B[n]?i.value!=="":i.specified)?i.value:t},set:function(e,t,n){var i=e.getAttributeNode(n);if(!i){i=o.createAttribute(n);e.setAttributeNode(i)}return i.value=t+""}};m.each(["width","height"],function(e,t){m.attrHooks[t]=m.extend(m.attrHooks[t],{set:function(e,n){if(n===""){e.setAttribute(t,"auto");return n}}})});m.attrHooks.contenteditable={get:R.get,set:function(e,t,n){if(t===""){t="false"}R.set(e,t,n)}}}if(!m.support.hrefNormalized){m.each(["href","src","width","height"],function(e,n){m.attrHooks[n]=m.extend(m.attrHooks[n],{get:function(e){var i=e.getAttribute(n,2);return i===null?t:i}})})}if(!m.support.style){m.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}}if(!m.support.optSelected){m.propHooks.selected=m.extend(m.propHooks.selected,{get:function(e){var t=e.parentNode;if(t){t.selectedIndex;if(t.parentNode){t.parentNode.selectedIndex}}return null}})}if(!m.support.enctype){m.propFix.enctype="encoding"}if(!m.support.checkOn){m.each(["radio","checkbox"],function(){m.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}m.each(["radio","checkbox"],function(){m.valHooks[this]=m.extend(m.valHooks[this],{set:function(e,t){if(m.isArray(t)){return e.checked=m.inArray(m(e).val(),t)>=0}}})});var V=/^(?:textarea|input|select)$/i,K=/^([^\.]*|)(?:\.(.+)|)$/,Q=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,J=/^(?:mouse|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,Z=function(e){return m.event.special.hover?e:e.replace(Q,"mouseenter$1 mouseleave$1")};m.event={add:function(e,n,i,o,r){var s,a,l,u,c,f,d,p,h,g,v;if(e.nodeType===3||e.nodeType===8||!n||!i||!(s=m._data(e))){return}if(i.handler){h=i;i=h.handler;r=h.selector}if(!i.guid){i.guid=m.guid++}l=s.events;if(!l){s.events=l={}}a=s.handle;if(!a){s.handle=a=function(e){return typeof m!=="undefined"&&(!e||m.event.triggered!==e.type)?m.event.dispatch.apply(a.elem,arguments):t};a.elem=e}n=m.trim(Z(n)).split(" ");for(u=0;u<n.length;u++){c=K.exec(n[u])||[];f=c[1];d=(c[2]||"").split(".").sort();v=m.event.special[f]||{};f=(r?v.delegateType:v.bindType)||f;v=m.event.special[f]||{};p=m.extend({type:f,origType:c[1],data:o,handler:i,guid:i.guid,selector:r,needsContext:r&&m.expr.match.needsContext.test(r),namespace:d.join(".")},h);g=l[f];if(!g){g=l[f]=[];g.delegateCount=0;if(!v.setup||v.setup.call(e,o,d,a)===false){if(e.addEventListener){e.addEventListener(f,a,false)}else if(e.attachEvent){e.attachEvent("on"+f,a)}}}if(v.add){v.add.call(e,p);if(!p.handler.guid){p.handler.guid=i.guid}}if(r){g.splice(g.delegateCount++,0,p)}else{g.push(p)}m.event.global[f]=true}e=null},global:{},remove:function(e,t,n,i,o){var r,s,a,l,u,c,f,d,p,h,g,v=m.hasData(e)&&m._data(e);if(!v||!(d=v.events)){return}t=m.trim(Z(t||"")).split(" ");for(r=0;r<t.length;r++){s=K.exec(t[r])||[];a=l=s[1];u=s[2];if(!a){for(a in d){m.event.remove(e,a+t[r],n,i,true)}continue}p=m.event.special[a]||{};a=(i?p.delegateType:p.bindType)||a;h=d[a]||[];c=h.length;u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null;for(f=0;f<h.length;f++){g=h[f];if((o||l===g.origType)&&(!n||n.guid===g.guid)&&(!u||u.test(g.namespace))&&(!i||i===g.selector||i==="**"&&g.selector)){h.splice(f--,1);if(g.selector){h.delegateCount--}if(p.remove){p.remove.call(e,g)}}}if(h.length===0&&c!==h.length){if(!p.teardown||p.teardown.call(e,u,v.handle)===false){m.removeEvent(e,a,v.handle)}delete d[a]}}if(m.isEmptyObject(d)){delete v.handle;m.removeData(e,"events",true)}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(n,i,r,s){if(r&&(r.nodeType===3||r.nodeType===8)){return}var a,l,u,c,f,d,p,h,g,v,y=n.type||n,b=[];if(G.test(y+m.event.triggered)){return}if(y.indexOf("!")>=0){y=y.slice(0,-1);l=true}if(y.indexOf(".")>=0){b=y.split(".");y=b.shift();b.sort()}if((!r||m.event.customEvent[y])&&!m.event.global[y]){return}n=typeof n==="object"?n[m.expando]?n:new m.Event(y,n):new m.Event(y);n.type=y;n.isTrigger=true;n.exclusive=l;n.namespace=b.join(".");n.namespace_re=n.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;d=y.indexOf(":")<0?"on"+y:"";if(!r){a=m.cache;for(u in a){if(a[u].events&&a[u].events[y]){m.event.trigger(n,i,a[u].handle.elem,true)}}return}n.result=t;if(!n.target){n.target=r}i=i!=null?m.makeArray(i):[];i.unshift(n);p=m.event.special[y]||{};if(p.trigger&&p.trigger.apply(r,i)===false){return}g=[[r,p.bindType||y]];if(!s&&!p.noBubble&&!m.isWindow(r)){v=p.delegateType||y;c=G.test(v+y)?r:r.parentNode;for(f=r;c;c=c.parentNode){g.push([c,v]);f=c}if(f===(r.ownerDocument||o)){g.push([f.defaultView||f.parentWindow||e,v])}}for(u=0;u<g.length&&!n.isPropagationStopped();u++){c=g[u][0];n.type=g[u][1];h=(m._data(c,"events")||{})[n.type]&&m._data(c,"handle");if(h){h.apply(c,i)}h=d&&c[d];if(h&&m.acceptData(c)&&h.apply&&h.apply(c,i)===false){n.preventDefault()}}n.type=y;if(!s&&!n.isDefaultPrevented()){if((!p._default||p._default.apply(r.ownerDocument,i)===false)&&!(y==="click"&&m.nodeName(r,"a"))&&m.acceptData(r)){if(d&&r[y]&&(y!=="focus"&&y!=="blur"||n.target.offsetWidth!==0)&&!m.isWindow(r)){f=r[d];if(f){r[d]=null}m.event.triggered=y;r[y]();m.event.triggered=t;if(f){r[d]=f}}}}return n.result},dispatch:function(n){n=m.event.fix(n||e.event);var i,o,r,s,a,l,u,f,d,p,h=(m._data(this,"events")||{})[n.type]||[],g=h.delegateCount,v=c.call(arguments),y=!n.exclusive&&!n.namespace,b=m.event.special[n.type]||{},x=[];v[0]=n;n.delegateTarget=this;if(b.preDispatch&&b.preDispatch.call(this,n)===false){return}if(g&&!(n.button&&n.type==="click")){for(r=n.target;r!=this;r=r.parentNode||this){if(r.disabled!==true||n.type!=="click"){a={};u=[];for(i=0;i<g;i++){f=h[i];d=f.selector;if(a[d]===t){a[d]=f.needsContext?m(d,this).index(r)>=0:m.find(d,this,null,[r]).length}if(a[d]){u.push(f)}}if(u.length){x.push({elem:r,matches:u})}}}}if(h.length>g){x.push({elem:this,matches:h.slice(g)})}for(i=0;i<x.length&&!n.isPropagationStopped();i++){l=x[i];n.currentTarget=l.elem;for(o=0;o<l.matches.length&&!n.isImmediatePropagationStopped();o++){f=l.matches[o];if(y||!n.namespace&&!f.namespace||n.namespace_re&&n.namespace_re.test(f.namespace)){n.data=f.data;n.handleObj=f;s=((m.event.special[f.origType]||{}).handle||f.handler).apply(l.elem,v);if(s!==t){n.result=s;if(s===false){n.preventDefault();n.stopPropagation()}}}}}if(b.postDispatch){b.postDispatch.call(this,n)}return n.result},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){if(e.which==null){e.which=t.charCode!=null?t.charCode:t.keyCode}return e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var i,r,s,a=n.button,l=n.fromElement;if(e.pageX==null&&n.clientX!=null){i=e.target.ownerDocument||o;r=i.documentElement;s=i.body;e.pageX=n.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0);e.pageY=n.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}if(!e.relatedTarget&&l){e.relatedTarget=l===e.target?n.toElement:l}if(!e.which&&a!==t){e.which=a&1?1:a&2?3:a&4?2:0}return e}},fix:function(e){if(e[m.expando]){return e}var t,n,i=e,r=m.event.fixHooks[e.type]||{},s=r.props?this.props.concat(r.props):this.props;e=m.Event(i);for(t=s.length;t;){n=s[--t];e[n]=i[n]}if(!e.target){e.target=i.srcElement||o}if(e.target.nodeType===3){e.target=e.target.parentNode}e.metaKey=!!e.metaKey;return r.filter?r.filter(e,i):e},special:{load:{noBubble:true},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){if(m.isWindow(this)){this.onbeforeunload=n
}},teardown:function(e,t){if(this.onbeforeunload===t){this.onbeforeunload=null}}}},simulate:function(e,t,n,i){var o=m.extend(new m.Event,n,{type:e,isSimulated:true,originalEvent:{}});if(i){m.event.trigger(o,null,t)}else{m.event.dispatch.call(t,o)}if(o.isDefaultPrevented()){n.preventDefault()}}};m.event.handle=m.event.dispatch;m.removeEvent=o.removeEventListener?function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}}:function(e,t,n){var i="on"+t;if(e.detachEvent){if(typeof e[i]==="undefined"){e[i]=null}e.detachEvent(i,n)}};m.Event=function(e,t){if(!(this instanceof m.Event)){return new m.Event(e,t)}if(e&&e.type){this.originalEvent=e;this.type=e.type;this.isDefaultPrevented=e.defaultPrevented||e.returnValue===false||e.getPreventDefault&&e.getPreventDefault()?tt:et}else{this.type=e}if(t){m.extend(this,t)}this.timeStamp=e&&e.timeStamp||m.now();this[m.expando]=true};function et(){return false}function tt(){return true}m.Event.prototype={preventDefault:function(){this.isDefaultPrevented=tt;var e=this.originalEvent;if(!e){return}if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=tt;var e=this.originalEvent;if(!e){return}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt;this.stopPropagation()},isDefaultPrevented:et,isPropagationStopped:et,isImmediatePropagationStopped:et};m.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){m.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,o=e.relatedTarget,r=e.handleObj,s=r.selector;if(!o||o!==i&&!m.contains(i,o)){e.type=r.origType;n=r.handler.apply(this,arguments);e.type=t}return n}}});if(!m.support.submitBubbles){m.event.special.submit={setup:function(){if(m.nodeName(this,"form")){return false}m.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,i=m.nodeName(n,"input")||m.nodeName(n,"button")?n.form:t;if(i&&!m._data(i,"_submit_attached")){m.event.add(i,"submit._submit",function(e){e._submit_bubble=true});m._data(i,"_submit_attached",true)}})},postDispatch:function(e){if(e._submit_bubble){delete e._submit_bubble;if(this.parentNode&&!e.isTrigger){m.event.simulate("submit",this.parentNode,e,true)}}},teardown:function(){if(m.nodeName(this,"form")){return false}m.event.remove(this,"._submit")}}}if(!m.support.changeBubbles){m.event.special.change={setup:function(){if(V.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){m.event.add(this,"propertychange._change",function(e){if(e.originalEvent.propertyName==="checked"){this._just_changed=true}});m.event.add(this,"click._change",function(e){if(this._just_changed&&!e.isTrigger){this._just_changed=false}m.event.simulate("change",this,e,true)})}return false}m.event.add(this,"beforeactivate._change",function(e){var t=e.target;if(V.test(t.nodeName)&&!m._data(t,"_change_attached")){m.event.add(t,"change._change",function(e){if(this.parentNode&&!e.isSimulated&&!e.isTrigger){m.event.simulate("change",this.parentNode,e,true)}});m._data(t,"_change_attached",true)}})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox"){return e.handleObj.handler.apply(this,arguments)}},teardown:function(){m.event.remove(this,"._change");return!V.test(this.nodeName)}}}if(!m.support.focusinBubbles){m.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,i=function(e){m.event.simulate(t,e.target,m.event.fix(e),true)};m.event.special[t]={setup:function(){if(n++===0){o.addEventListener(e,i,true)}},teardown:function(){if(--n===0){o.removeEventListener(e,i,true)}}}})}m.fn.extend({on:function(e,n,i,o,r){var s,a;if(typeof e==="object"){if(typeof n!=="string"){i=i||n;n=t}for(a in e){this.on(a,n,i,e[a],r)}return this}if(i==null&&o==null){o=n;i=n=t}else if(o==null){if(typeof n==="string"){o=i;i=t}else{o=i;i=n;n=t}}if(o===false){o=et}else if(!o){return this}if(r===1){s=o;o=function(e){m().off(e);return s.apply(this,arguments)};o.guid=s.guid||(s.guid=m.guid++)}return this.each(function(){m.event.add(this,e,o,i,n)})},one:function(e,t,n,i){return this.on(e,t,n,i,1)},off:function(e,n,i){var o,r;if(e&&e.preventDefault&&e.handleObj){o=e.handleObj;m(e.delegateTarget).off(o.namespace?o.origType+"."+o.namespace:o.origType,o.selector,o.handler);return this}if(typeof e==="object"){for(r in e){this.off(r,n,e[r])}return this}if(n===false||typeof n==="function"){i=n;n=t}if(i===false){i=et}return this.each(function(){m.event.remove(this,e,i,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){m(this.context).on(e,this.selector,t,n);return this},die:function(e,t){m(this.context).off(e,this.selector||"**",t);return this},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){m.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0]){return m.event.trigger(e,t,this[0],true)}},toggle:function(e){var t=arguments,n=e.guid||m.guid++,i=0,o=function(n){var o=(m._data(this,"lastToggle"+e.guid)||0)%i;m._data(this,"lastToggle"+e.guid,o+1);n.preventDefault();return t[o].apply(this,arguments)||false};o.guid=n;while(i<t.length){t[i++].guid=n}return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}});m.each(("blur focus focusin focusout load resize scroll unload click dblclick "+"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave "+"change select submit keydown keypress keyup error contextmenu").split(" "),function(e,t){m.fn[t]=function(e,n){if(n==null){n=e;e=null}return arguments.length>0?this.on(t,null,e,n):this.trigger(t)};if(Y.test(t)){m.event.fixHooks[t]=m.event.keyHooks}if(J.test(t)){m.event.fixHooks[t]=m.event.mouseHooks}});!function(e,t){var n,i,o,r,s,a,l,u,c,f,d=true,p="undefined",h=("sizcache"+Math.random()).replace(".",""),g=String,v=e.document,y=v.documentElement,b=0,x=0,w=[].pop,k=[].push,T=[].slice,C=[].indexOf||function(e){var t=0,n=this.length;for(;t<n;t++){if(this[t]===e){return t}}return-1},S=function(e,t){e[h]=t==null||t;return e},_=function(){var e={},t=[];return S(function(n,i){if(t.push(n)>o.cacheLength){delete e[t.shift()]}return e[n+" "]=i},e)},E=_(),M=_(),D=_(),O="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",L=N.replace("w","w#"),P="([*^$|!~]?=)",H="\\["+O+"*("+N+")"+O+"*(?:"+P+O+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+L+")|)|)"+O+"*\\]",A=":("+N+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+H+")|[^:]|\\\\.)*|.*))\\)|)",I=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+O+"*((?:-\\d)?\\d*)"+O+"*\\)|)(?=[^-]|$)",R=new RegExp("^"+O+"+|((?:^|[^\\\\])(?:\\\\.)*)"+O+"+$","g"),F=new RegExp("^"+O+"*,"+O+"*"),B=new RegExp("^"+O+"*([\\x20\\t\\r\\n\\f>+~])"+O+"*"),W=new RegExp(A),j=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,$=/^:not/,z=/[\x20\t\r\n\f]*[+~]/,q=/:not\($/,U=/h\d/i,X=/input|select|textarea|button/i,V=/\\(?!\\)/g,K={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),NAME:new RegExp("^\\[name=['\"]?("+N+")['\"]?\\]"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+H),PSEUDO:new RegExp("^"+A),POS:new RegExp(I,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+O+"*(even|odd|(([+-]|)(\\d*)n|)"+O+"*(?:([+-]|)"+O+"*(\\d+)|))"+O+"*\\)|)","i"),needsContext:new RegExp("^"+O+"*[>+~]|"+I,"i")},Q=function(e){var t=v.createElement("div");try{return e(t)}catch(n){return false}finally{t=null}},Y=Q(function(e){e.appendChild(v.createComment(""));return!e.getElementsByTagName("*").length}),J=Q(function(e){e.innerHTML="<a href='#'></a>";return e.firstChild&&typeof e.firstChild.getAttribute!==p&&e.firstChild.getAttribute("href")==="#"}),G=Q(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),Z=Q(function(e){e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!e.getElementsByClassName||!e.getElementsByClassName("e").length){return false}e.lastChild.className="e";return e.getElementsByClassName("e").length===2}),et=Q(function(e){e.id=h+0;e.innerHTML="<a name='"+h+"'></a><div name='"+h+"'></div>";y.insertBefore(e,y.firstChild);var t=v.getElementsByName&&v.getElementsByName(h).length===2+v.getElementsByName(h+0).length;i=!v.getElementById(h);y.removeChild(e);return t});try{T.call(y.childNodes,0)[0].nodeType}catch(tt){T=function(e){var t,n=[];for(;t=this[e];e++){n.push(t)}return n}}function nt(e,t,n,i){n=n||[];t=t||v;var o,r,l,u,c=t.nodeType;if(!e||typeof e!=="string"){return n}if(c!==1&&c!==9){return[]}l=s(t);if(!l&&!i){if(o=j.exec(e)){if(u=o[1]){if(c===9){r=t.getElementById(u);if(r&&r.parentNode){if(r.id===u){n.push(r);return n}}else{return n}}else{if(t.ownerDocument&&(r=t.ownerDocument.getElementById(u))&&a(t,r)&&r.id===u){n.push(r);return n}}}else if(o[2]){k.apply(n,T.call(t.getElementsByTagName(e),0));return n}else if((u=o[3])&&Z&&t.getElementsByClassName){k.apply(n,T.call(t.getElementsByClassName(u),0));return n}}}return mt(e.replace(R,"$1"),t,n,i,l)}nt.matches=function(e,t){return nt(e,null,null,t)};nt.matchesSelector=function(e,t){return nt(t,null,null,[e]).length>0};function it(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function ot(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function rt(e){return S(function(t){t=+t;return S(function(n,i){var o,r=e([],n.length,t),s=r.length;while(s--){if(n[o=r[s]]){n[o]=!(i[o]=n[o])}}})})}r=nt.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(o===1||o===9||o===11){if(typeof e.textContent==="string"){return e.textContent}else{for(e=e.firstChild;e;e=e.nextSibling){n+=r(e)}}}else if(o===3||o===4){return e.nodeValue}}else{for(;t=e[i];i++){n+=r(t)}}return n};s=nt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":false};a=nt.contains=y.contains?function(e,t){var n=e.nodeType===9?e.documentElement:e,i=t&&t.parentNode;return e===i||!!(i&&i.nodeType===1&&n.contains&&n.contains(i))}:y.compareDocumentPosition?function(e,t){return t&&!!(e.compareDocumentPosition(t)&16)}:function(e,t){while(t=t.parentNode){if(t===e){return true}}return false};nt.attr=function(e,t){var n,i=s(e);if(!i){t=t.toLowerCase()}if(n=o.attrHandle[t]){return n(e)}if(i||G){return e.getAttribute(t)}n=e.getAttributeNode(t);return n?typeof e[t]==="boolean"?e[t]?t:null:n.specified?n.value:null:null};o=nt.selectors={cacheLength:50,createPseudo:S,match:K,attrHandle:J?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:i?function(e,t,n){if(typeof t.getElementById!==p&&!n){var i=t.getElementById(e);return i&&i.parentNode?[i]:[]}}:function(e,n,i){if(typeof n.getElementById!==p&&!i){var o=n.getElementById(e);return o?o.id===e||typeof o.getAttributeNode!==p&&o.getAttributeNode("id").value===e?[o]:t:[]}},TAG:Y?function(e,t){if(typeof t.getElementsByTagName!==p){return t.getElementsByTagName(e)}}:function(e,t){var n=t.getElementsByTagName(e);if(e==="*"){var i,o=[],r=0;for(;i=n[r];r++){if(i.nodeType===1){o.push(i)}}return o}return n},NAME:et&&function(e,t){if(typeof t.getElementsByName!==p){return t.getElementsByName(name)}},CLASS:Z&&function(e,t,n){if(typeof t.getElementsByClassName!==p&&!n){return t.getElementsByClassName(e)}}},relative:{">":{dir:"parentNode",first:true}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:true},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){e[1]=e[1].replace(V,"");e[3]=(e[4]||e[5]||"").replace(V,"");if(e[2]==="~="){e[3]=" "+e[3]+" "}return e.slice(0,4)},CHILD:function(e){e[1]=e[1].toLowerCase();if(e[1]==="nth"){if(!e[2]){nt.error(e[0])}e[3]=+(e[3]?e[4]+(e[5]||1):2*(e[2]==="even"||e[2]==="odd"));e[4]=+(e[6]+e[7]||e[2]==="odd")}else if(e[2]){nt.error(e[0])}return e},PSEUDO:function(e){var t,n;if(K["CHILD"].test(e[0])){return null}if(e[3]){e[2]=e[3]}else if(t=e[4]){if(W.test(t)&&(n=at(t,true))&&(n=t.indexOf(")",t.length-n)-t.length)){t=t.slice(0,n);e[0]=e[0].slice(0,n)}e[2]=t}return e.slice(0,3)}},filter:{ID:i?function(e){e=e.replace(V,"");return function(t){return t.getAttribute("id")===e}}:function(e){e=e.replace(V,"");return function(t){var n=typeof t.getAttributeNode!==p&&t.getAttributeNode("id");return n&&n.value===e}},TAG:function(e){if(e==="*"){return function(){return true}}e=e.replace(V,"").toLowerCase();return function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(e){var t=E[h][e+" "];return t||(t=new RegExp("(^|"+O+")"+e+"("+O+"|$)"))&&E(e,function(e){return t.test(e.className||typeof e.getAttribute!==p&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(i,o){var r=nt.attr(i,e);if(r==null){return t==="!="}if(!t){return true}r+="";return t==="="?r===n:t==="!="?r!==n:t==="^="?n&&r.indexOf(n)===0:t==="*="?n&&r.indexOf(n)>-1:t==="$="?n&&r.substr(r.length-n.length)===n:t==="~="?(" "+r+" ").indexOf(n)>-1:t==="|="?r===n||r.substr(0,n.length+1)===n+"-":false}},CHILD:function(e,t,n,i){if(e==="nth"){return function(e){var t,o,r=e.parentNode;if(n===1&&i===0){return true}if(r){o=0;for(t=r.firstChild;t;t=t.nextSibling){if(t.nodeType===1){o++;if(e===t){break}}}}o-=i;return o===n||o%n===0&&o/n>=0}}return function(t){var n=t;switch(e){case"only":case"first":while(n=n.previousSibling){if(n.nodeType===1){return false}}if(e==="first"){return true}n=t;case"last":while(n=n.nextSibling){if(n.nodeType===1){return false}}return true}}},PSEUDO:function(e,t){var n,i=o.pseudos[e]||o.setFilters[e.toLowerCase()]||nt.error("unsupported pseudo: "+e);if(i[h]){return i(t)}if(i.length>1){n=[e,e,"",t];return o.setFilters.hasOwnProperty(e.toLowerCase())?S(function(e,n){var o,r=i(e,t),s=r.length;while(s--){o=C.call(e,r[s]);e[o]=!(n[o]=r[s])}}):function(e){return i(e,0,n)}}return i}},pseudos:{not:S(function(e){var t=[],n=[],i=l(e.replace(R,"$1"));return i[h]?S(function(e,t,n,o){var r,s=i(e,null,o,[]),a=e.length;while(a--){if(r=s[a]){e[a]=!(t[a]=r)}}}):function(e,o,r){t[0]=e;i(t,null,r,n);return!n.pop()}}),has:S(function(e){return function(t){return nt(e,t).length>0}}),contains:S(function(e){return function(t){return(t.textContent||t.innerText||r(t)).indexOf(e)>-1}}),enabled:function(e){return e.disabled===false},disabled:function(e){return e.disabled===true},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return!o.pseudos["empty"](e)},empty:function(e){var t;e=e.firstChild;while(e){if(e.nodeName>"@"||(t=e.nodeType)===3||t===4){return false}e=e.nextSibling}return true},header:function(e){return U.test(e.nodeName)},text:function(e){var t,n;return e.nodeName.toLowerCase()==="input"&&(t=e.type)==="text"&&((n=e.getAttribute("type"))==null||n.toLowerCase()===t)},radio:it("radio"),checkbox:it("checkbox"),file:it("file"),password:it("password"),image:it("image"),submit:ot("submit"),reset:ot("reset"),button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},input:function(e){return X.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:rt(function(){return[0]}),last:rt(function(e,t){return[t-1]}),eq:rt(function(e,t,n){return[n<0?n+t:n]}),even:rt(function(e,t){for(var n=0;n<t;n+=2){e.push(n)}return e}),odd:rt(function(e,t){for(var n=1;n<t;n+=2){e.push(n)}return e}),lt:rt(function(e,t,n){for(var i=n<0?n+t:n;--i>=0;){e.push(i)}return e}),gt:rt(function(e,t,n){for(var i=n<0?n+t:n;++i<t;){e.push(i)}return e})}};function st(e,t,n){if(e===t){return n}var i=e.nextSibling;while(i){if(i===t){return-1}i=i.nextSibling}return 1}u=y.compareDocumentPosition?function(e,t){if(e===t){c=true;return 0}return(!e.compareDocumentPosition||!t.compareDocumentPosition?e.compareDocumentPosition:e.compareDocumentPosition(t)&4)?-1:1}:function(e,t){if(e===t){c=true;return 0}else if(e.sourceIndex&&t.sourceIndex){return e.sourceIndex-t.sourceIndex}var n,i,o=[],r=[],s=e.parentNode,a=t.parentNode,l=s;if(s===a){return st(e,t)}else if(!s){return-1}else if(!a){return 1}while(l){o.unshift(l);l=l.parentNode}l=a;while(l){r.unshift(l);l=l.parentNode}n=o.length;i=r.length;for(var u=0;u<n&&u<i;u++){if(o[u]!==r[u]){return st(o[u],r[u])}}return u===n?st(e,r[u],-1):st(o[u],t,1)};[0,0].sort(u);d=!c;nt.uniqueSort=function(e){var t,n=[],i=1,o=0;c=d;e.sort(u);if(c){for(;t=e[i];i++){if(t===e[i-1]){o=n.push(i)}}while(o--){e.splice(n[o],1)}}return e};nt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};function at(e,t){var n,i,r,s,a,l,u,c=M[h][e+" "];if(c){return t?0:c.slice(0)}a=e;l=[];u=o.preFilter;while(a){if(!n||(i=F.exec(a))){if(i){a=a.slice(i[0].length)||a}l.push(r=[])}n=false;if(i=B.exec(a)){r.push(n=new g(i.shift()));a=a.slice(n.length);n.type=i[0].replace(R," ")}for(s in o.filter){if((i=K[s].exec(a))&&(!u[s]||(i=u[s](i)))){r.push(n=new g(i.shift()));a=a.slice(n.length);n.type=s;n.matches=i}}if(!n){break}}return t?a.length:a?nt.error(e):M(e,l).slice(0)}function lt(e,t,i){var o=t.dir,r=i&&t.dir==="parentNode",s=x++;return t.first?function(t,n,i){while(t=t[o]){if(r||t.nodeType===1){return e(t,n,i)}}}:function(t,i,a){if(!a){var l,u=b+" "+s+" ",c=u+n;while(t=t[o]){if(r||t.nodeType===1){if((l=t[h])===c){return t.sizset}else if(typeof l==="string"&&l.indexOf(u)===0){if(t.sizset){return t}}else{t[h]=c;if(e(t,i,a)){t.sizset=true;return t}t.sizset=false}}}}else{while(t=t[o]){if(r||t.nodeType===1){if(e(t,i,a)){return t}}}}}}function ut(e){return e.length>1?function(t,n,i){var o=e.length;while(o--){if(!e[o](t,n,i)){return false}}return true}:e[0]}function ct(e,t,n,i,o){var r,s=[],a=0,l=e.length,u=t!=null;for(;a<l;a++){if(r=e[a]){if(!n||n(r,i,o)){s.push(r);if(u){t.push(a)}}}}return s}function ft(e,t,n,i,o,r){if(i&&!i[h]){i=ft(i)}if(o&&!o[h]){o=ft(o,r)}return S(function(r,s,a,l){var u,c,f,d=[],p=[],h=s.length,m=r||ht(t||"*",a.nodeType?[a]:a,[]),g=e&&(r||!t)?ct(m,d,e,a,l):m,v=n?o||(r?e:h||i)?[]:s:g;if(n){n(g,v,a,l)}if(i){u=ct(v,p);i(u,[],a,l);c=u.length;while(c--){if(f=u[c]){v[p[c]]=!(g[p[c]]=f)}}}if(r){if(o||e){if(o){u=[];c=v.length;while(c--){if(f=v[c]){u.push(g[c]=f)}}o(null,v=[],u,l)}c=v.length;while(c--){if((f=v[c])&&(u=o?C.call(r,f):d[c])>-1){r[u]=!(s[u]=f)}}}}else{v=ct(v===s?v.splice(h,v.length):v);if(o){o(null,s,v,l)}else{k.apply(s,v)}}})}function dt(e){var t,n,i,r=e.length,s=o.relative[e[0].type],a=s||o.relative[" "],l=s?1:0,u=lt(function(e){return e===t},a,true),c=lt(function(e){return C.call(t,e)>-1},a,true),d=[function(e,n,i){return!s&&(i||n!==f)||((t=n).nodeType?u(e,n,i):c(e,n,i))}];for(;l<r;l++){if(n=o.relative[e[l].type]){d=[lt(ut(d),n)]}else{n=o.filter[e[l].type].apply(null,e[l].matches);if(n[h]){i=++l;for(;i<r;i++){if(o.relative[e[i].type]){break}}return ft(l>1&&ut(d),l>1&&e.slice(0,l-1).join("").replace(R,"$1"),n,l<i&&dt(e.slice(l,i)),i<r&&dt(e=e.slice(i)),i<r&&e.join(""))}d.push(n)}}return ut(d)}function pt(e,t){var i=t.length>0,r=e.length>0,s=function(a,l,u,c,d){var p,h,m,g=[],y=0,x="0",T=a&&[],C=d!=null,S=f,_=a||r&&o.find["TAG"]("*",d&&l.parentNode||l),E=b+=S==null?1:Math.E;if(C){f=l!==v&&l;n=s.el}for(;(p=_[x])!=null;x++){if(r&&p){for(h=0;m=e[h];h++){if(m(p,l,u)){c.push(p);break}}if(C){b=E;n=++s.el}}if(i){if(p=!m&&p){y--}if(a){T.push(p)}}}y+=x;if(i&&x!==y){for(h=0;m=t[h];h++){m(T,g,l,u)}if(a){if(y>0){while(x--){if(!(T[x]||g[x])){g[x]=w.call(c)}}}g=ct(g)}k.apply(c,g);if(C&&!a&&g.length>0&&y+t.length>1){nt.uniqueSort(c)}}if(C){b=E;f=S}return T};s.el=0;return i?S(s):s}l=nt.compile=function(e,t){var n,i=[],o=[],r=D[h][e+" "];if(!r){if(!t){t=at(e)}n=t.length;while(n--){r=dt(t[n]);if(r[h]){i.push(r)}else{o.push(r)}}r=D(e,pt(o,i))}return r};function ht(e,t,n){var i=0,o=t.length;for(;i<o;i++){nt(e,t[i],n)}return n}function mt(e,t,n,i,r){var s,a,u,c,f,d=at(e),p=d.length;if(!i){if(d.length===1){a=d[0]=d[0].slice(0);if(a.length>2&&(u=a[0]).type==="ID"&&t.nodeType===9&&!r&&o.relative[a[1].type]){t=o.find["ID"](u.matches[0].replace(V,""),t,r)[0];if(!t){return n}e=e.slice(a.shift().length)}for(s=K["POS"].test(e)?-1:a.length-1;s>=0;s--){u=a[s];if(o.relative[c=u.type]){break}if(f=o.find[c]){if(i=f(u.matches[0].replace(V,""),z.test(a[0].type)&&t.parentNode||t,r)){a.splice(s,1);e=i.length&&a.join("");if(!e){k.apply(n,T.call(i,0));return n}break}}}}}l(e,d)(i,t,r,n,z.test(e));return n}if(v.querySelectorAll){!function(){var e,t=mt,n=/'|\\/g,i=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,o=[":focus"],r=[":active"],a=y.matchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector||y.msMatchesSelector;Q(function(e){e.innerHTML="<select><option selected=''></option></select>";if(!e.querySelectorAll("[selected]").length){o.push("\\["+O+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)")}if(!e.querySelectorAll(":checked").length){o.push(":checked")}});Q(function(e){e.innerHTML="<p test=''></p>";if(e.querySelectorAll("[test^='']").length){o.push("[*^$]="+O+"*(?:\"\"|'')")}e.innerHTML="<input type='hidden'/>";if(!e.querySelectorAll(":enabled").length){o.push(":enabled",":disabled")}});o=new RegExp(o.join("|"));mt=function(e,i,r,s,a){if(!s&&!a&&!o.test(e)){var l,u,c=true,f=h,d=i,p=i.nodeType===9&&e;if(i.nodeType===1&&i.nodeName.toLowerCase()!=="object"){l=at(e);if(c=i.getAttribute("id")){f=c.replace(n,"\\$&")}else{i.setAttribute("id",f)}f="[id='"+f+"'] ";u=l.length;while(u--){l[u]=f+l[u].join("")}d=z.test(e)&&i.parentNode||i;p=l.join(",")}if(p){try{k.apply(r,T.call(d.querySelectorAll(p),0));return r}catch(m){}finally{if(!c){i.removeAttribute("id")}}}}return t(e,i,r,s,a)};if(a){Q(function(t){e=a.call(t,"div");try{a.call(t,"[test!='']:sizzle");r.push("!=",A)}catch(n){}});r=new RegExp(r.join("|"));nt.matchesSelector=function(t,n){n=n.replace(i,"='$1']");if(!s(t)&&!r.test(n)&&!o.test(n)){try{var l=a.call(t,n);if(l||e||t.document&&t.document.nodeType!==11){return l}}catch(u){}}return nt(n,null,null,[t]).length>0}}}()}o.pseudos["nth"]=o.pseudos["eq"];function gt(){}o.filters=gt.prototype=o.pseudos;o.setFilters=new gt;nt.attr=m.attr;m.find=nt;m.expr=nt.selectors;m.expr[":"]=m.expr.pseudos;m.unique=nt.uniqueSort;m.text=nt.getText;m.isXMLDoc=nt.isXML;m.contains=nt.contains}(e);var nt=/Until$/,it=/^(?:parents|prev(?:Until|All))/,ot=/^.[^:#\[\.,]*$/,rt=m.expr.match.needsContext,st={children:true,contents:true,next:true,prev:true};m.fn.extend({find:function(e){var t,n,i,o,r,s,a=this;if(typeof e!=="string"){return m(e).filter(function(){for(t=0,n=a.length;t<n;t++){if(m.contains(a[t],this)){return true}}})}s=this.pushStack("","find",e);for(t=0,n=this.length;t<n;t++){i=s.length;m.find(e,this[t],s);if(t>0){for(o=i;o<s.length;o++){for(r=0;r<i;r++){if(s[r]===s[o]){s.splice(o--,1);break}}}}}return s},has:function(e){var t,n=m(e,this),i=n.length;return this.filter(function(){for(t=0;t<i;t++){if(m.contains(this,n[t])){return true}}})},not:function(e){return this.pushStack(ut(this,e,false),"not",e)},filter:function(e){return this.pushStack(ut(this,e,true),"filter",e)},is:function(e){return!!e&&(typeof e==="string"?rt.test(e)?m(e,this.context).index(this[0])>=0:m.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,i=0,o=this.length,r=[],s=rt.test(e)||typeof e!=="string"?m(e,t||this.context):0;for(;i<o;i++){n=this[i];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(s?s.index(n)>-1:m.find.matchesSelector(n,e)){r.push(n);break}n=n.parentNode}}r=r.length>1?m.unique(r):r;return this.pushStack(r,"closest",e)},index:function(e){if(!e){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof e==="string"){return m.inArray(this[0],m(e))}return m.inArray(e.jquery?e[0]:e,this)},add:function(e,t){var n=typeof e==="string"?m(e,t):m.makeArray(e&&e.nodeType?[e]:e),i=m.merge(this.get(),n);return this.pushStack(at(n[0])||at(i[0])?i:m.unique(i))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});m.fn.andSelf=m.fn.addBack;function at(e){return!e||!e.parentNode||e.parentNode.nodeType===11}function lt(e,t){do{e=e[t]}while(e&&e.nodeType!==1);return e}m.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return m.dir(e,"parentNode")},parentsUntil:function(e,t,n){return m.dir(e,"parentNode",n)},next:function(e){return lt(e,"nextSibling")},prev:function(e){return lt(e,"previousSibling")},nextAll:function(e){return m.dir(e,"nextSibling")},prevAll:function(e){return m.dir(e,"previousSibling")},nextUntil:function(e,t,n){return m.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return m.dir(e,"previousSibling",n)},siblings:function(e){return m.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return m.sibling(e.firstChild)},contents:function(e){return m.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:m.merge([],e.childNodes)}},function(e,t){m.fn[e]=function(n,i){var o=m.map(this,t,n);if(!nt.test(e)){i=n}if(i&&typeof i==="string"){o=m.filter(i,o)}o=this.length>1&&!st[e]?m.unique(o):o;if(this.length>1&&it.test(e)){o=o.reverse()}return this.pushStack(o,e,c.call(arguments).join(","))}});m.extend({filter:function(e,t,n){if(n){e=":not("+e+")"}return t.length===1?m.find.matchesSelector(t[0],e)?[t[0]]:[]:m.find.matches(e,t)},dir:function(e,n,i){var o=[],r=e[n];while(r&&r.nodeType!==9&&(i===t||r.nodeType!==1||!m(r).is(i))){if(r.nodeType===1){o.push(r)}r=r[n]}return o},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling){if(e.nodeType===1&&e!==t){n.push(e)}}return n}});function ut(e,t,n){t=t||0;if(m.isFunction(t)){return m.grep(e,function(e,i){var o=!!t.call(e,i,e);return o===n})}else if(t.nodeType){return m.grep(e,function(e,i){return e===t===n})}else if(typeof t==="string"){var i=m.grep(e,function(e){return e.nodeType===1});if(ot.test(t)){return m.filter(t,i,!n)}else{t=m.filter(t,i)}}return m.grep(e,function(e,i){return m.inArray(e,t)>=0===n})}function ct(e){var t=ft.split("|"),n=e.createDocumentFragment();if(n.createElement){while(t.length){n.createElement(t.pop())}}return n}var ft="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|"+"header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",dt=/ jQuery\d+="(?:null|\d+)"/g,pt=/^\s+/,ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,mt=/<([\w:]+)/,gt=/<tbody/i,vt=/<|&#?\w+;/,yt=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,xt=new RegExp("<(?:"+ft+")[\\s/>]","i"),wt=/^(?:checkbox|radio)$/,kt=/checked\s*(?:[^=]|=\s*.checked.)/i,Tt=/\/(java|ecma)script/i,Ct=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,St={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},_t=ct(o),Et=_t.appendChild(o.createElement("div"));St.optgroup=St.option;St.tbody=St.tfoot=St.colgroup=St.caption=St.thead;St.th=St.td;if(!m.support.htmlSerialize){St._default=[1,"X<div>","</div>"]}m.fn.extend({text:function(e){return m.access(this,function(e){return e===t?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(m.isFunction(e)){return this.each(function(t){m(this).wrapAll(e.call(this,t))})}if(this[0]){var t=m(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){t.insertBefore(this[0])}t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1){e=e.firstChild}return e}).append(this)}return this},wrapInner:function(e){if(m.isFunction(e)){return this.each(function(t){m(this).wrapInner(e.call(this,t))})}return this.each(function(){var t=m(this),n=t.contents();if(n.length){n.wrapAll(e)}else{t.append(e)}})},wrap:function(e){var t=m.isFunction(e);return this.each(function(n){m(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){if(!m.nodeName(this,"body")){m(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1||this.nodeType===11){this.insertBefore(e,this.firstChild)}})},before:function(){if(!at(this[0])){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this)})}if(arguments.length){var e=m.clean(arguments);return this.pushStack(m.merge(e,this),"before",this.selector)}},after:function(){if(!at(this[0])){return this.domManip(arguments,false,function(e){this.parentNode.insertBefore(e,this.nextSibling)})}if(arguments.length){var e=m.clean(arguments);return this.pushStack(m.merge(this,e),"after",this.selector)}},remove:function(e,t){var n,i=0;for(;(n=this[i])!=null;i++){if(!e||m.filter(e,[n]).length){if(!t&&n.nodeType===1){m.cleanData(n.getElementsByTagName("*"));m.cleanData([n])}if(n.parentNode){n.parentNode.removeChild(n)}}}return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){if(e.nodeType===1){m.cleanData(e.getElementsByTagName("*"))}while(e.firstChild){e.removeChild(e.firstChild)}}return this},clone:function(e,t){e=e==null?false:e;t=t==null?e:t;return this.map(function(){return m.clone(this,e,t)})},html:function(e){return m.access(this,function(e){var n=this[0]||{},i=0,o=this.length;if(e===t){return n.nodeType===1?n.innerHTML.replace(dt,""):t}if(typeof e==="string"&&!yt.test(e)&&(m.support.htmlSerialize||!xt.test(e))&&(m.support.leadingWhitespace||!pt.test(e))&&!St[(mt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ht,"<$1></$2>");try{for(;i<o;i++){n=this[i]||{};if(n.nodeType===1){m.cleanData(n.getElementsByTagName("*"));n.innerHTML=e}}n=0}catch(r){}}if(n){this.empty().append(e)}},null,e,arguments.length)},replaceWith:function(e){if(!at(this[0])){if(m.isFunction(e)){return this.each(function(t){var n=m(this),i=n.html();n.replaceWith(e.call(this,t,i))})}if(typeof e!=="string"){e=m(e).detach()}return this.each(function(){var t=this.nextSibling,n=this.parentNode;m(this).remove();if(t){m(t).before(e)}else{m(n).append(e)}})}return this.length?this.pushStack(m(m.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,true)},domManip:function(e,n,i){e=[].concat.apply([],e);var o,r,s,a,l=0,u=e[0],c=[],f=this.length;if(!m.support.checkClone&&f>1&&typeof u==="string"&&kt.test(u)){return this.each(function(){m(this).domManip(e,n,i)})}if(m.isFunction(u)){return this.each(function(o){var r=m(this);e[0]=u.call(this,o,n?r.html():t);r.domManip(e,n,i)})}if(this[0]){o=m.buildFragment(e,this,c);s=o.fragment;r=s.firstChild;if(s.childNodes.length===1){s=r}if(r){n=n&&m.nodeName(r,"tr");for(a=o.cacheable||f-1;l<f;l++){i.call(n&&m.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],l===a?s:m.clone(s,true,true))}}s=r=null;if(c.length){m.each(c,function(e,t){if(t.src){if(m.ajax){m.ajax({url:t.src,type:"GET",dataType:"script",async:false,global:false,"throws":true})}else{m.error("no ajax")}}else{m.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Ct,""))}if(t.parentNode){t.parentNode.removeChild(t)}})}}return this}});function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Dt(e,t){if(t.nodeType!==1||!m.hasData(e)){return}var n,i,o,r=m._data(e),s=m._data(t,r),a=r.events;if(a){delete s.handle;s.events={};for(n in a){for(i=0,o=a[n].length;i<o;i++){m.event.add(t,n,a[n][i])}}}if(s.data){s.data=m.extend({},s.data)}}function Ot(e,t){var n;if(t.nodeType!==1){return}if(t.clearAttributes){t.clearAttributes()}if(t.mergeAttributes){t.mergeAttributes(e)}n=t.nodeName.toLowerCase();if(n==="object"){if(t.parentNode){t.outerHTML=e.outerHTML
}if(m.support.html5Clone&&e.innerHTML&&!m.trim(t.innerHTML)){t.innerHTML=e.innerHTML}}else if(n==="input"&&wt.test(e.type)){t.defaultChecked=t.checked=e.checked;if(t.value!==e.value){t.value=e.value}}else if(n==="option"){t.selected=e.defaultSelected}else if(n==="input"||n==="textarea"){t.defaultValue=e.defaultValue}else if(n==="script"&&t.text!==e.text){t.text=e.text}t.removeAttribute(m.expando)}m.buildFragment=function(e,n,i){var r,s,a,l=e[0];n=n||o;n=!n.nodeType&&n[0]||n;n=n.ownerDocument||n;if(e.length===1&&typeof l==="string"&&l.length<512&&n===o&&l.charAt(0)==="<"&&!bt.test(l)&&(m.support.checkClone||!kt.test(l))&&(m.support.html5Clone||!xt.test(l))){s=true;r=m.fragments[l];a=r!==t}if(!r){r=n.createDocumentFragment();m.clean(e,n,r,i);if(s){m.fragments[l]=a&&r}}return{fragment:r,cacheable:s}};m.fragments={};m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){m.fn[e]=function(n){var i,o=0,r=[],s=m(n),a=s.length,l=this.length===1&&this[0].parentNode;if((l==null||l&&l.nodeType===11&&l.childNodes.length===1)&&a===1){s[t](this[0]);return this}else{for(;o<a;o++){i=(o>0?this.clone(true):this).get();m(s[o])[t](i);r=r.concat(i)}return this.pushStack(r,e,s.selector)}}});function Nt(e){if(typeof e.getElementsByTagName!=="undefined"){return e.getElementsByTagName("*")}else if(typeof e.querySelectorAll!=="undefined"){return e.querySelectorAll("*")}else{return[]}}function Lt(e){if(wt.test(e.type)){e.defaultChecked=e.checked}}m.extend({clone:function(e,t,n){var i,o,r,s;if(m.support.html5Clone||m.isXMLDoc(e)||!xt.test("<"+e.nodeName+">")){s=e.cloneNode(true)}else{Et.innerHTML=e.outerHTML;Et.removeChild(s=Et.firstChild)}if((!m.support.noCloneEvent||!m.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!m.isXMLDoc(e)){Ot(e,s);i=Nt(e);o=Nt(s);for(r=0;i[r];++r){if(o[r]){Ot(i[r],o[r])}}}if(t){Dt(e,s);if(n){i=Nt(e);o=Nt(s);for(r=0;i[r];++r){Dt(i[r],o[r])}}}i=o=null;return s},clean:function(e,t,n,i){var r,s,a,l,u,c,f,d,p,h,g,v,y=t===o&&_t,b=[];if(!t||typeof t.createDocumentFragment==="undefined"){t=o}for(r=0;(a=e[r])!=null;r++){if(typeof a==="number"){a+=""}if(!a){continue}if(typeof a==="string"){if(!vt.test(a)){a=t.createTextNode(a)}else{y=y||ct(t);f=t.createElement("div");y.appendChild(f);a=a.replace(ht,"<$1></$2>");l=(mt.exec(a)||["",""])[1].toLowerCase();u=St[l]||St._default;c=u[0];f.innerHTML=u[1]+a+u[2];while(c--){f=f.lastChild}if(!m.support.tbody){d=gt.test(a);p=l==="table"&&!d?f.firstChild&&f.firstChild.childNodes:u[1]==="<table>"&&!d?f.childNodes:[];for(s=p.length-1;s>=0;--s){if(m.nodeName(p[s],"tbody")&&!p[s].childNodes.length){p[s].parentNode.removeChild(p[s])}}}if(!m.support.leadingWhitespace&&pt.test(a)){f.insertBefore(t.createTextNode(pt.exec(a)[0]),f.firstChild)}a=f.childNodes;f.parentNode.removeChild(f)}}if(a.nodeType){b.push(a)}else{m.merge(b,a)}}if(f){a=f=y=null}if(!m.support.appendChecked){for(r=0;(a=b[r])!=null;r++){if(m.nodeName(a,"input")){Lt(a)}else if(typeof a.getElementsByTagName!=="undefined"){m.grep(a.getElementsByTagName("input"),Lt)}}}if(n){g=function(e){if(!e.type||Tt.test(e.type)){return i?i.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)}};for(r=0;(a=b[r])!=null;r++){if(!(m.nodeName(a,"script")&&g(a))){n.appendChild(a);if(typeof a.getElementsByTagName!=="undefined"){v=m.grep(m.merge([],a.getElementsByTagName("script")),g);b.splice.apply(b,[r+1,0].concat(v));r+=v.length}}}}return b},cleanData:function(e,t){var n,i,o,r,s=0,a=m.expando,l=m.cache,u=m.support.deleteExpando,c=m.event.special;for(;(o=e[s])!=null;s++){if(t||m.acceptData(o)){i=o[a];n=i&&l[i];if(n){if(n.events){for(r in n.events){if(c[r]){m.event.remove(o,r)}else{m.removeEvent(o,r,n.handle)}}}if(l[i]){delete l[i];if(u){delete o[a]}else if(o.removeAttribute){o.removeAttribute(a)}else{o[a]=null}m.deletedIds.push(i)}}}}}});!function(){var e,t;m.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};e=m.uaMatch(s.userAgent);t={};if(e.browser){t[e.browser]=true;t.version=e.version}if(t.chrome){t.webkit=true}else if(t.webkit){t.safari=true}m.browser=t;m.sub=function(){function e(t,n){return new e.fn.init(t,n)}m.extend(true,e,this);e.superclass=this;e.fn=e.prototype=this();e.fn.constructor=e;e.sub=this.sub;e.fn.init=function n(n,i){if(i&&i instanceof m&&!(i instanceof e)){i=e(i)}return m.fn.init.call(this,n,i,t)};e.fn.init.prototype=e.fn;var t=e(o);return e}}();var Pt,Ht,At,It=/alpha\([^)]*\)/i,Rt=/opacity=([^)]*)/,Ft=/^(top|right|bottom|left)$/,Bt=/^(none|table(?!-c[ea]).+)/,Wt=/^margin/,jt=new RegExp("^("+g+")(.*)$","i"),$t=new RegExp("^("+g+")(?!px)[a-z%]+$","i"),zt=new RegExp("^([-+])=("+g+")","i"),qt={BODY:"block"},Ut={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:0,fontWeight:400},Vt=["Top","Right","Bottom","Left"],Kt=["Webkit","O","Moz","ms"],Qt=m.fn.toggle;function Yt(e,t){if(t in e){return t}var n=t.charAt(0).toUpperCase()+t.slice(1),i=t,o=Kt.length;while(o--){t=Kt[o]+n;if(t in e){return t}}return i}function Jt(e,t){e=t||e;return m.css(e,"display")==="none"||!m.contains(e.ownerDocument,e)}function Gt(e,t){var n,i,o=[],r=0,s=e.length;for(;r<s;r++){n=e[r];if(!n.style){continue}o[r]=m._data(n,"olddisplay");if(t){if(!o[r]&&n.style.display==="none"){n.style.display=""}if(n.style.display===""&&Jt(n)){o[r]=m._data(n,"olddisplay",nn(n.nodeName))}}else{i=Pt(n,"display");if(!o[r]&&i!=="none"){m._data(n,"olddisplay",i)}}}for(r=0;r<s;r++){n=e[r];if(!n.style){continue}if(!t||n.style.display==="none"||n.style.display===""){n.style.display=t?o[r]||"":"none"}}return e}m.fn.extend({css:function(e,n){return m.access(this,function(e,n,i){return i!==t?m.style(e,n,i):m.css(e,n)},e,n,arguments.length>1)},show:function(){return Gt(this,true)},hide:function(){return Gt(this)},toggle:function(e,t){var n=typeof e==="boolean";if(m.isFunction(e)&&m.isFunction(t)){return Qt.apply(this,arguments)}return this.each(function(){if(n?e:Jt(this)){m(this).show()}else{m(this).hide()}})}});m.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Pt(e,"opacity");return n===""?"1":n}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":m.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,i,o){if(!e||e.nodeType===3||e.nodeType===8||!e.style){return}var r,s,a,l=m.camelCase(n),u=e.style;n=m.cssProps[l]||(m.cssProps[l]=Yt(u,l));a=m.cssHooks[n]||m.cssHooks[l];if(i!==t){s=typeof i;if(s==="string"&&(r=zt.exec(i))){i=(r[1]+1)*r[2]+parseFloat(m.css(e,n));s="number"}if(i==null||s==="number"&&isNaN(i)){return}if(s==="number"&&!m.cssNumber[l]){i+="px"}if(!a||!("set"in a)||(i=a.set(e,i,o))!==t){try{u[n]=i}catch(c){}}}else{if(a&&"get"in a&&(r=a.get(e,false,o))!==t){return r}return u[n]}},css:function(e,n,i,o){var r,s,a,l=m.camelCase(n);n=m.cssProps[l]||(m.cssProps[l]=Yt(e.style,l));a=m.cssHooks[n]||m.cssHooks[l];if(a&&"get"in a){r=a.get(e,true,o)}if(r===t){r=Pt(e,n)}if(r==="normal"&&n in Xt){r=Xt[n]}if(i||o!==t){s=parseFloat(r);return i||m.isNumeric(s)?s||0:r}return r},swap:function(e,t,n){var i,o,r={};for(o in t){r[o]=e.style[o];e.style[o]=t[o]}i=n.call(e);for(o in t){e.style[o]=r[o]}return i}});if(e.getComputedStyle){Pt=function(t,n){var i,o,r,s,a=e.getComputedStyle(t,null),l=t.style;if(a){i=a.getPropertyValue(n)||a[n];if(i===""&&!m.contains(t.ownerDocument,t)){i=m.style(t,n)}if($t.test(i)&&Wt.test(n)){o=l.width;r=l.minWidth;s=l.maxWidth;l.minWidth=l.maxWidth=l.width=i;i=a.width;l.width=o;l.minWidth=r;l.maxWidth=s}}return i}}else if(o.documentElement.currentStyle){Pt=function(e,t){var n,i,o=e.currentStyle&&e.currentStyle[t],r=e.style;if(o==null&&r&&r[t]){o=r[t]}if($t.test(o)&&!Ft.test(t)){n=r.left;i=e.runtimeStyle&&e.runtimeStyle.left;if(i){e.runtimeStyle.left=e.currentStyle.left}r.left=t==="fontSize"?"1em":o;o=r.pixelLeft+"px";r.left=n;if(i){e.runtimeStyle.left=i}}return o===""?"auto":o}}function Zt(e,t,n){var i=jt.exec(t);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):t}function en(e,t,n,i){var o=n===(i?"border":"content")?4:t==="width"?1:0,r=0;for(;o<4;o+=2){if(n==="margin"){r+=m.css(e,n+Vt[o],true)}if(i){if(n==="content"){r-=parseFloat(Pt(e,"padding"+Vt[o]))||0}if(n!=="margin"){r-=parseFloat(Pt(e,"border"+Vt[o]+"Width"))||0}}else{r+=parseFloat(Pt(e,"padding"+Vt[o]))||0;if(n!=="padding"){r+=parseFloat(Pt(e,"border"+Vt[o]+"Width"))||0}}}return r}function tn(e,t,n){var i=t==="width"?e.offsetWidth:e.offsetHeight,o=true,r=m.support.boxSizing&&m.css(e,"boxSizing")==="border-box";if(i<=0||i==null){i=Pt(e,t);if(i<0||i==null){i=e.style[t]}if($t.test(i)){return i}o=r&&(m.support.boxSizingReliable||i===e.style[t]);i=parseFloat(i)||0}return i+en(e,t,n||(r?"border":"content"),o)+"px"}function nn(e){if(qt[e]){return qt[e]}var t=m("<"+e+">").appendTo(o.body),n=t.css("display");t.remove();if(n==="none"||n===""){Ht=o.body.appendChild(Ht||m.extend(o.createElement("iframe"),{frameBorder:0,width:0,height:0}));if(!At||!Ht.createElement){At=(Ht.contentWindow||Ht.contentDocument).document;At.write("<!doctype html><html><body>");At.close()}t=At.body.appendChild(At.createElement(e));n=Pt(t,"display");o.body.removeChild(Ht)}qt[e]=n;return n}m.each(["height","width"],function(e,t){m.cssHooks[t]={get:function(e,n,i){if(n){if(e.offsetWidth===0&&Bt.test(Pt(e,"display"))){return m.swap(e,Ut,function(){return tn(e,t,i)})}else{return tn(e,t,i)}}},set:function(e,n,i){return Zt(e,n,i?en(e,t,i,m.support.boxSizing&&m.css(e,"boxSizing")==="border-box"):0)}}});if(!m.support.opacity){m.cssHooks.opacity={get:function(e,t){return Rt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,i=e.currentStyle,o=m.isNumeric(t)?"alpha(opacity="+t*100+")":"",r=i&&i.filter||n.filter||"";n.zoom=1;if(t>=1&&m.trim(r.replace(It,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(i&&!i.filter){return}}n.filter=It.test(r)?r.replace(It,o):r+" "+o}}}m(function(){if(!m.support.reliableMarginRight){m.cssHooks.marginRight={get:function(e,t){return m.swap(e,{display:"inline-block"},function(){if(t){return Pt(e,"marginRight")}})}}}if(!m.support.pixelPosition&&m.fn.position){m.each(["top","left"],function(e,t){m.cssHooks[t]={get:function(e,n){if(n){var i=Pt(e,t);return $t.test(i)?m(e).position()[t]+"px":i}}}})}});if(m.expr&&m.expr.filters){m.expr.filters.hidden=function(e){return e.offsetWidth===0&&e.offsetHeight===0||!m.support.reliableHiddenOffsets&&(e.style&&e.style.display||Pt(e,"display"))==="none"};m.expr.filters.visible=function(e){return!m.expr.filters.hidden(e)}}m.each({margin:"",padding:"",border:"Width"},function(e,t){m.cssHooks[e+t]={expand:function(n){var i,o=typeof n==="string"?n.split(" "):[n],r={};for(i=0;i<4;i++){r[e+Vt[i]+t]=o[i]||o[i-2]||o[0]}return r}};if(!Wt.test(e)){m.cssHooks[e+t].set=Zt}});var on=/%20/g,rn=/\[\]$/,sn=/\r?\n/g,an=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,ln=/^(?:select|textarea)/i;m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?m.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||ln.test(this.nodeName)||an.test(this.type))}).map(function(e,t){var n=m(this).val();return n==null?null:m.isArray(n)?m.map(n,function(e,n){return{name:t.name,value:e.replace(sn,"\r\n")}}):{name:t.name,value:n.replace(sn,"\r\n")}}).get()}});m.param=function(e,n){var i,o=[],r=function(e,t){t=m.isFunction(t)?t():t==null?"":t;o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t){n=m.ajaxSettings&&m.ajaxSettings.traditional}if(m.isArray(e)||e.jquery&&!m.isPlainObject(e)){m.each(e,function(){r(this.name,this.value)})}else{for(i in e){un(i,e[i],n,r)}}return o.join("&").replace(on,"+")};function un(e,t,n,i){var o;if(m.isArray(t)){m.each(t,function(t,o){if(n||rn.test(e)){i(e,o)}else{un(e+"["+(typeof o==="object"?t:"")+"]",o,n,i)}})}else if(!n&&m.type(t)==="object"){for(o in t){un(e+"["+o+"]",t[o],n,i)}}else{i(e,t)}}var cn,fn,dn=/#.*$/,pn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,hn=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,mn=/^(?:GET|HEAD)$/,gn=/^\/\//,vn=/\?/,yn=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bn=/([?&])_=[^&]*/,xn=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,wn=m.fn.load,kn={},Tn={},Cn=["*/"]+["*"];try{fn=r.href}catch(Sn){fn=o.createElement("a");fn.href="";fn=fn.href}cn=xn.exec(fn.toLowerCase())||[];function _n(e){return function(t,n){if(typeof t!=="string"){n=t;t="*"}var i,o,r,s=t.toLowerCase().split(y),a=0,l=s.length;if(m.isFunction(n)){for(;a<l;a++){i=s[a];r=/^\+/.test(i);if(r){i=i.substr(1)||"*"}o=e[i]=e[i]||[];o[r?"unshift":"push"](n)}}}}function En(e,n,i,o,r,s){r=r||n.dataTypes[0];s=s||{};s[r]=true;var a,l=e[r],u=0,c=l?l.length:0,f=e===kn;for(;u<c&&(f||!a);u++){a=l[u](n,i,o);if(typeof a==="string"){if(!f||s[a]){a=t}else{n.dataTypes.unshift(a);a=En(e,n,i,o,a,s)}}}if((f||!a)&&!s["*"]){a=En(e,n,i,o,"*",s)}return a}function Mn(e,n){var i,o,r=m.ajaxSettings.flatOptions||{};for(i in n){if(n[i]!==t){(r[i]?e:o||(o={}))[i]=n[i]}}if(o){m.extend(true,e,o)}}m.fn.load=function(e,n,i){if(typeof e!=="string"&&wn){return wn.apply(this,arguments)}if(!this.length){return this}var o,r,s,a=this,l=e.indexOf(" ");if(l>=0){o=e.slice(l,e.length);e=e.slice(0,l)}if(m.isFunction(n)){i=n;n=t}else if(n&&typeof n==="object"){r="POST"}m.ajax({url:e,type:r,dataType:"html",data:n,complete:function(e,t){if(i){a.each(i,s||[e.responseText,t,e])}}}).done(function(e){s=arguments;a.html(o?m("<div>").append(e.replace(yn,"")).find(o):e)});return this};m.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){m.fn[t]=function(e){return this.on(t,e)}});m.each(["get","post"],function(e,n){m[n]=function(e,i,o,r){if(m.isFunction(i)){r=r||o;o=i;i=t}return m.ajax({type:n,url:e,data:i,success:o,dataType:r})}});m.extend({getScript:function(e,n){return m.get(e,t,n,"script")},getJSON:function(e,t,n){return m.get(e,t,n,"json")},ajaxSetup:function(e,t){if(t){Mn(e,m.ajaxSettings)}else{t=e;e=m.ajaxSettings}Mn(e,t);return e},ajaxSettings:{url:fn,isLocal:hn.test(cn[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Cn},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":true,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{context:true,url:true}},ajaxPrefilter:_n(kn),ajaxTransport:_n(Tn),ajax:function(e,n){if(typeof e==="object"){n=e;e=t}n=n||{};var i,o,r,s,a,l,u,c,f=m.ajaxSetup({},n),d=f.context||f,p=d!==f&&(d.nodeType||d instanceof m)?m(d):m.event,h=m.Deferred(),g=m.Callbacks("once memory"),v=f.statusCode||{},b={},x={},w=0,k="canceled",T={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=x[n]=x[n]||e;b[e]=t}return this},getAllResponseHeaders:function(){return w===2?o:null},getResponseHeader:function(e){var n;if(w===2){if(!r){r={};while(n=pn.exec(o)){r[n[1].toLowerCase()]=n[2]}}n=r[e.toLowerCase()]}return n===t?null:n},overrideMimeType:function(e){if(!w){f.mimeType=e}return this},abort:function(e){e=e||k;if(s){s.abort(e)}C(0,e);return this}};function C(e,n,r,l){var c,y,b,x,k,C=n;if(w===2){return}w=2;if(a){clearTimeout(a)}s=t;o=l||"";T.readyState=e>0?4:0;if(r){x=Dn(f,T,r)}if(e>=200&&e<300||e===304){if(f.ifModified){k=T.getResponseHeader("Last-Modified");if(k){m.lastModified[i]=k}k=T.getResponseHeader("Etag");if(k){m.etag[i]=k}}if(e===304){C="notmodified";c=true}else{c=On(f,x);C=c.state;y=c.data;b=c.error;c=!b}}else{b=C;if(!C||e){C="error";if(e<0){e=0}}}T.status=e;T.statusText=(n||C)+"";if(c){h.resolveWith(d,[y,C,T])}else{h.rejectWith(d,[T,C,b])}T.statusCode(v);v=t;if(u){p.trigger("ajax"+(c?"Success":"Error"),[T,f,c?y:b])}g.fireWith(d,[T,C]);if(u){p.trigger("ajaxComplete",[T,f]);if(!--m.active){m.event.trigger("ajaxStop")}}}h.promise(T);T.success=T.done;T.error=T.fail;T.complete=g.add;T.statusCode=function(e){if(e){var t;if(w<2){for(t in e){v[t]=[v[t],e[t]]}}else{t=e[T.status];T.always(t)}}return this};f.url=((e||f.url)+"").replace(dn,"").replace(gn,cn[1]+"//");f.dataTypes=m.trim(f.dataType||"*").toLowerCase().split(y);if(f.crossDomain==null){l=xn.exec(f.url.toLowerCase());f.crossDomain=!!(l&&(l[1]!==cn[1]||l[2]!==cn[2]||(l[3]||(l[1]==="http:"?80:443))!=(cn[3]||(cn[1]==="http:"?80:443))))}if(f.data&&f.processData&&typeof f.data!=="string"){f.data=m.param(f.data,f.traditional)}En(kn,f,n,T);if(w===2){return T}u=f.global;f.type=f.type.toUpperCase();f.hasContent=!mn.test(f.type);if(u&&m.active++===0){m.event.trigger("ajaxStart")}if(!f.hasContent){if(f.data){f.url+=(vn.test(f.url)?"&":"?")+f.data;delete f.data}i=f.url;if(f.cache===false){var S=m.now(),_=f.url.replace(bn,"$1_="+S);f.url=_+(_===f.url?(vn.test(f.url)?"&":"?")+"_="+S:"")}}if(f.data&&f.hasContent&&f.contentType!==false||n.contentType){T.setRequestHeader("Content-Type",f.contentType)}if(f.ifModified){i=i||f.url;if(m.lastModified[i]){T.setRequestHeader("If-Modified-Since",m.lastModified[i])}if(m.etag[i]){T.setRequestHeader("If-None-Match",m.etag[i])}}T.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+(f.dataTypes[0]!=="*"?", "+Cn+"; q=0.01":""):f.accepts["*"]);for(c in f.headers){T.setRequestHeader(c,f.headers[c])}if(f.beforeSend&&(f.beforeSend.call(d,T,f)===false||w===2)){return T.abort()}k="abort";for(c in{success:1,error:1,complete:1}){T[c](f[c])}s=En(Tn,f,n,T);if(!s){C(-1,"No Transport")}else{T.readyState=1;if(u){p.trigger("ajaxSend",[T,f])}if(f.async&&f.timeout>0){a=setTimeout(function(){T.abort("timeout")},f.timeout)}try{w=1;s.send(b,C)}catch(E){if(w<2){C(-1,E)}else{throw E}}}return T},active:0,lastModified:{},etag:{}});function Dn(e,n,i){var o,r,s,a,l=e.contents,u=e.dataTypes,c=e.responseFields;for(r in c){if(r in i){n[c[r]]=i[r]}}while(u[0]==="*"){u.shift();if(o===t){o=e.mimeType||n.getResponseHeader("content-type")}}if(o){for(r in l){if(l[r]&&l[r].test(o)){u.unshift(r);break}}}if(u[0]in i){s=u[0]}else{for(r in i){if(!u[0]||e.converters[r+" "+u[0]]){s=r;break}if(!a){a=r}}s=s||a}if(s){if(s!==u[0]){u.unshift(s)}return i[s]}}function On(e,t){var n,i,o,r,s=e.dataTypes.slice(),a=s[0],l={},u=0;if(e.dataFilter){t=e.dataFilter(t,e.dataType)}if(s[1]){for(n in e.converters){l[n.toLowerCase()]=e.converters[n]}}for(;o=s[++u];){if(o!=="*"){if(a!=="*"&&a!==o){n=l[a+" "+o]||l["* "+o];if(!n){for(i in l){r=i.split(" ");if(r[1]===o){n=l[a+" "+r[0]]||l["* "+r[0]];if(n){if(n===true){n=l[i]}else if(l[i]!==true){o=r[0];s.splice(u--,0,o)}break}}}}if(n!==true){if(n&&e["throws"]){t=n(t)}else{try{t=n(t)}catch(c){return{state:"parsererror",error:n?c:"No conversion from "+a+" to "+o}}}}}a=o}}return{state:"success",data:t}}var Nn=[],Ln=/\?/,Pn=/(=)\?(?=&|$)|\?\?/,Hn=m.now();m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nn.pop()||m.expando+"_"+Hn++;this[e]=true;return e}});m.ajaxPrefilter("json jsonp",function(n,i,o){var r,s,a,l=n.data,u=n.url,c=n.jsonp!==false,f=c&&Pn.test(u),d=c&&!f&&typeof l==="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pn.test(l);if(n.dataTypes[0]==="jsonp"||f||d){r=n.jsonpCallback=m.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback;s=e[r];if(f){n.url=u.replace(Pn,"$1"+r)}else if(d){n.data=l.replace(Pn,"$1"+r)}else if(c){n.url+=(Ln.test(u)?"&":"?")+n.jsonp+"="+r}n.converters["script json"]=function(){if(!a){m.error(r+" was not called")}return a[0]};n.dataTypes[0]="json";e[r]=function(){a=arguments};o.always(function(){e[r]=s;if(n[r]){n.jsonpCallback=i.jsonpCallback;Nn.push(r)}if(a&&m.isFunction(s)){s(a[0])}a=s=t});return"script"}});m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){m.globalEval(e);return e}}});m.ajaxPrefilter("script",function(e){if(e.cache===t){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});m.ajaxTransport("script",function(e){if(e.crossDomain){var n,i=o.head||o.getElementsByTagName("head")[0]||o.documentElement;return{send:function(r,s){n=o.createElement("script");n.async="async";if(e.scriptCharset){n.charset=e.scriptCharset}n.src=e.url;n.onload=n.onreadystatechange=function(e,o){if(o||!n.readyState||/loaded|complete/.test(n.readyState)){n.onload=n.onreadystatechange=null;if(i&&n.parentNode){i.removeChild(n)}n=t;if(!o){s(200,"success")}}};i.insertBefore(n,i.firstChild)},abort:function(){if(n){n.onload(0,1)}}}}});var An,In=e.ActiveXObject?function(){for(var e in An){An[e](0,1)}}:false,Rn=0;function Fn(){try{return new e.XMLHttpRequest}catch(t){}}function Bn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}m.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&Fn()||Bn()}:Fn;!function(e){m.extend(m.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(m.ajaxSettings.xhr());if(m.support.ajax){m.ajaxTransport(function(n){if(!n.crossDomain||m.support.cors){var i;return{send:function(o,r){var s,a,l=n.xhr();if(n.username){l.open(n.type,n.url,n.async,n.username,n.password)}else{l.open(n.type,n.url,n.async)}if(n.xhrFields){for(a in n.xhrFields){l[a]=n.xhrFields[a]}}if(n.mimeType&&l.overrideMimeType){l.overrideMimeType(n.mimeType)}if(!n.crossDomain&&!o["X-Requested-With"]){o["X-Requested-With"]="XMLHttpRequest"}try{for(a in o){l.setRequestHeader(a,o[a])}}catch(u){}l.send(n.hasContent&&n.data||null);i=function(e,o){var a,u,c,f,d;try{if(i&&(o||l.readyState===4)){i=t;if(s){l.onreadystatechange=m.noop;if(In){delete An[s]}}if(o){if(l.readyState!==4){l.abort()}}else{a=l.status;c=l.getAllResponseHeaders();f={};d=l.responseXML;if(d&&d.documentElement){f.xml=d}try{f.text=l.responseText}catch(p){}try{u=l.statusText}catch(p){u=""}if(!a&&n.isLocal&&!n.crossDomain){a=f.text?200:404}else if(a===1223){a=204}}}}catch(h){if(!o){r(-1,h)}}if(f){r(a,u,f,c)}};if(!n.async){i()}else if(l.readyState===4){setTimeout(i,0)}else{s=++Rn;if(In){if(!An){An={};m(e).unload(In)}An[s]=i}l.onreadystatechange=i}},abort:function(){if(i){i(0,1)}}}}})}var Wn,jn,$n=/^(?:toggle|show|hide)$/,zn=new RegExp("^(?:([-+])=|)("+g+")([a-z%]*)$","i"),qn=/queueHooks$/,Un=[Jn],Xn={"*":[function(e,t){var n,i,o=this.createTween(e,t),r=zn.exec(t),s=o.cur(),a=+s||0,l=1,u=20;if(r){n=+r[2];i=r[3]||(m.cssNumber[e]?"":"px");if(i!=="px"&&a){a=m.css(o.elem,e,true)||n||1;do{l=l||".5";a=a/l;m.style(o.elem,e,a+i)}while(l!==(l=o.cur()/s)&&l!==1&&--u)}o.unit=i;o.start=a;o.end=r[1]?a+(r[1]+1)*n:n}return o}]};function Vn(){setTimeout(function(){Wn=t},0);return Wn=m.now()}function Kn(e,t){m.each(t,function(t,n){var i=(Xn[t]||[]).concat(Xn["*"]),o=0,r=i.length;for(;o<r;o++){if(i[o].call(e,t,n)){return}}})}function Qn(e,t,n){var i,o=0,r=0,s=Un.length,a=m.Deferred().always(function(){delete l.elem}),l=function(){var t=Wn||Vn(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,r=0,s=u.tweens.length;for(;r<s;r++){u.tweens[r].run(o)}a.notifyWith(e,[u,o,n]);if(o<1&&s){return n}else{a.resolveWith(e,[u]);return false}},u=a.promise({elem:e,props:m.extend({},t),opts:m.extend(true,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Wn||Vn(),duration:n.duration,tweens:[],createTween:function(t,n,i){var o=m.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);u.tweens.push(o);return o},stop:function(t){var n=0,i=t?u.tweens.length:0;for(;n<i;n++){u.tweens[n].run(1)}if(t){a.resolveWith(e,[u,t])}else{a.rejectWith(e,[u,t])}return this}}),c=u.props;Yn(c,u.opts.specialEasing);for(;o<s;o++){i=Un[o].call(u,e,c,u.opts);if(i){return i}}Kn(u,c);if(m.isFunction(u.opts.start)){u.opts.start.call(e,u)}m.fx.timer(m.extend(l,{anim:u,queue:u.opts.queue,elem:e}));return u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function Yn(e,t){var n,i,o,r,s;for(n in e){i=m.camelCase(n);o=t[i];r=e[n];if(m.isArray(r)){o=r[1];r=e[n]=r[0]}if(n!==i){e[i]=r;delete e[n]}s=m.cssHooks[i];if(s&&"expand"in s){r=s.expand(r);delete e[i];for(n in r){if(!(n in e)){e[n]=r[n];t[n]=o}}}else{t[i]=o}}}m.Animation=m.extend(Qn,{tweener:function(e,t){if(m.isFunction(e)){t=e;e=["*"]}else{e=e.split(" ")}var n,i=0,o=e.length;for(;i<o;i++){n=e[i];Xn[n]=Xn[n]||[];Xn[n].unshift(t)}},prefilter:function(e,t){if(t){Un.unshift(e)}else{Un.push(e)}}});function Jn(e,t,n){var i,o,r,s,a,l,u,c,f,d=this,p=e.style,h={},g=[],v=e.nodeType&&Jt(e);if(!n.queue){c=m._queueHooks(e,"fx");if(c.unqueued==null){c.unqueued=0;f=c.empty.fire;c.empty.fire=function(){if(!c.unqueued){f()}}}c.unqueued++;d.always(function(){d.always(function(){c.unqueued--;if(!m.queue(e,"fx").length){c.empty.fire()}})})}if(e.nodeType===1&&("height"in t||"width"in t)){n.overflow=[p.overflow,p.overflowX,p.overflowY];if(m.css(e,"display")==="inline"&&m.css(e,"float")==="none"){if(!m.support.inlineBlockNeedsLayout||nn(e.nodeName)==="inline"){p.display="inline-block"}else{p.zoom=1}}}if(n.overflow){p.overflow="hidden";if(!m.support.shrinkWrapBlocks){d.done(function(){p.overflow=n.overflow[0];p.overflowX=n.overflow[1];p.overflowY=n.overflow[2]})}}for(i in t){r=t[i];if($n.exec(r)){delete t[i];l=l||r==="toggle";if(r===(v?"hide":"show")){continue}g.push(i)}}s=g.length;if(s){a=m._data(e,"fxshow")||m._data(e,"fxshow",{});if("hidden"in a){v=a.hidden}if(l){a.hidden=!v}if(v){m(e).show()}else{d.done(function(){m(e).hide()})}d.done(function(){var t;m.removeData(e,"fxshow",true);for(t in h){m.style(e,t,h[t])}});for(i=0;i<s;i++){o=g[i];u=d.createTween(o,v?a[o]:0);h[o]=a[o]||m.style(e,o);if(!(o in a)){a[o]=u.start;if(v){u.end=u.start;u.start=o==="width"||o==="height"?1:0}}}}}function Gn(e,t,n,i,o){return new Gn.prototype.init(e,t,n,i,o)}m.Tween=Gn;Gn.prototype={constructor:Gn,init:function(e,t,n,i,o,r){this.elem=e;this.prop=n;this.easing=o||"swing";this.options=t;this.start=this.now=this.cur();this.end=i;this.unit=r||(m.cssNumber[n]?"":"px")},cur:function(){var e=Gn.propHooks[this.prop];return e&&e.get?e.get(this):Gn.propHooks._default.get(this)},run:function(e){var t,n=Gn.propHooks[this.prop];if(this.options.duration){this.pos=t=m.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration)}else{this.pos=t=e}this.now=(this.end-this.start)*t+this.start;if(this.options.step){this.options.step.call(this.elem,this.now,this)}if(n&&n.set){n.set(this)}else{Gn.propHooks._default.set(this)}return this}};Gn.prototype.init.prototype=Gn.prototype;Gn.propHooks={_default:{get:function(e){var t;if(e.elem[e.prop]!=null&&(!e.elem.style||e.elem.style[e.prop]==null)){return e.elem[e.prop]}t=m.css(e.elem,e.prop,false,"");return!t||t==="auto"?0:t},set:function(e){if(m.fx.step[e.prop]){m.fx.step[e.prop](e)}else if(e.elem.style&&(e.elem.style[m.cssProps[e.prop]]!=null||m.cssHooks[e.prop])){m.style(e.elem,e.prop,e.now+e.unit)}else{e.elem[e.prop]=e.now}}}};Gn.propHooks.scrollTop=Gn.propHooks.scrollLeft={set:function(e){if(e.elem.nodeType&&e.elem.parentNode){e.elem[e.prop]=e.now}}};m.each(["toggle","show","hide"],function(e,t){var n=m.fn[t];m.fn[t]=function(i,o,r){return i==null||typeof i==="boolean"||!e&&m.isFunction(i)&&m.isFunction(o)?n.apply(this,arguments):this.animate(Zn(t,true),i,o,r)}});m.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Jt).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var o=m.isEmptyObject(e),r=m.speed(t,n,i),s=function(){var t=Qn(this,m.extend({},e),r);if(o){t.stop(true)}};return o||r.queue===false?this.each(s):this.queue(r.queue,s)},stop:function(e,n,i){var o=function(e){var t=e.stop;delete e.stop;t(i)};if(typeof e!=="string"){i=n;n=e;e=t}if(n&&e!==false){this.queue(e||"fx",[])}return this.each(function(){var t=true,n=e!=null&&e+"queueHooks",r=m.timers,s=m._data(this);if(n){if(s[n]&&s[n].stop){o(s[n])}}else{for(n in s){if(s[n]&&s[n].stop&&qn.test(n)){o(s[n])}}}for(n=r.length;n--;){if(r[n].elem===this&&(e==null||r[n].queue===e)){r[n].anim.stop(i);t=false;r.splice(n,1)}}if(t||!i){m.dequeue(this,e)}})}});function Zn(e,t){var n,i={height:e},o=0;t=t?1:0;for(;o<4;o+=2-t){n=Vt[o];i["margin"+n]=i["padding"+n]=e}if(t){i.opacity=i.width=e}return i}m.each({slideDown:Zn("show"),slideUp:Zn("hide"),slideToggle:Zn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){m.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}});m.speed=function(e,t,n){var i=e&&typeof e==="object"?m.extend({},e):{complete:n||!n&&t||m.isFunction(e)&&e,duration:e,easing:n&&t||t&&!m.isFunction(t)&&t};i.duration=m.fx.off?0:typeof i.duration==="number"?i.duration:i.duration in m.fx.speeds?m.fx.speeds[i.duration]:m.fx.speeds._default;if(i.queue==null||i.queue===true){i.queue="fx"}i.old=i.complete;i.complete=function(){if(m.isFunction(i.old)){i.old.call(this)}if(i.queue){m.dequeue(this,i.queue)}};return i};m.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}};m.timers=[];m.fx=Gn.prototype.init;m.fx.tick=function(){var e,n=m.timers,i=0;Wn=m.now();for(;i<n.length;i++){e=n[i];if(!e()&&n[i]===e){n.splice(i--,1)}}if(!n.length){m.fx.stop()}Wn=t};m.fx.timer=function(e){if(e()&&m.timers.push(e)&&!jn){jn=setInterval(m.fx.tick,m.fx.interval)}};m.fx.interval=13;m.fx.stop=function(){clearInterval(jn);jn=null};m.fx.speeds={slow:600,fast:200,_default:400};m.fx.step={};if(m.expr&&m.expr.filters){m.expr.filters.animated=function(e){return m.grep(m.timers,function(t){return e===t.elem}).length}}var ei=/^(?:body|html)$/i;m.fn.offset=function(e){if(arguments.length){return e===t?this:this.each(function(t){m.offset.setOffset(this,e,t)})}var n,i,o,r,s,a,l,u={top:0,left:0},c=this[0],f=c&&c.ownerDocument;if(!f){return}if((i=f.body)===c){return m.offset.bodyOffset(c)}n=f.documentElement;if(!m.contains(n,c)){return u}if(typeof c.getBoundingClientRect!=="undefined"){u=c.getBoundingClientRect()}o=ti(f);r=n.clientTop||i.clientTop||0;s=n.clientLeft||i.clientLeft||0;a=o.pageYOffset||n.scrollTop;l=o.pageXOffset||n.scrollLeft;return{top:u.top+a-r,left:u.left+l-s}};m.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;if(m.support.doesNotIncludeMarginInBodyOffset){t+=parseFloat(m.css(e,"marginTop"))||0;n+=parseFloat(m.css(e,"marginLeft"))||0}return{top:t,left:n}},setOffset:function(e,t,n){var i=m.css(e,"position");if(i==="static"){e.style.position="relative"}var o=m(e),r=o.offset(),s=m.css(e,"top"),a=m.css(e,"left"),l=(i==="absolute"||i==="fixed")&&m.inArray("auto",[s,a])>-1,u={},c={},f,d;if(l){c=o.position();f=c.top;d=c.left}else{f=parseFloat(s)||0;d=parseFloat(a)||0}if(m.isFunction(t)){t=t.call(e,n,r)}if(t.top!=null){u.top=t.top-r.top+f}if(t.left!=null){u.left=t.left-r.left+d}if("using"in t){t.using.call(e,u)}else{o.css(u)}}};m.fn.extend({position:function(){if(!this[0]){return}var e=this[0],t=this.offsetParent(),n=this.offset(),i=ei.test(t[0].nodeName)?{top:0,left:0}:t.offset();n.top-=parseFloat(m.css(e,"marginTop"))||0;n.left-=parseFloat(m.css(e,"marginLeft"))||0;i.top+=parseFloat(m.css(t[0],"borderTopWidth"))||0;i.left+=parseFloat(m.css(t[0],"borderLeftWidth"))||0;return{top:n.top-i.top,left:n.left-i.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||o.body;while(e&&!ei.test(e.nodeName)&&m.css(e,"position")==="static"){e=e.offsetParent}return e||o.body})}});m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i=/Y/.test(n);m.fn[e]=function(o){return m.access(this,function(e,o,r){var s=ti(e);if(r===t){return s?n in s?s[n]:s.document.documentElement[o]:e[o]}if(s){s.scrollTo(!i?r:m(s).scrollLeft(),i?r:m(s).scrollTop())}else{e[o]=r}},e,o,arguments.length,null)}});function ti(e){return m.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false
}m.each({Height:"height",Width:"width"},function(e,n){m.each({padding:"inner"+e,content:n,"":"outer"+e},function(i,o){m.fn[o]=function(o,r){var s=arguments.length&&(i||typeof o!=="boolean"),a=i||(o===true||r===true?"margin":"border");return m.access(this,function(n,i,o){var r;if(m.isWindow(n)){return n.document.documentElement["client"+e]}if(n.nodeType===9){r=n.documentElement;return Math.max(n.body["scroll"+e],r["scroll"+e],n.body["offset"+e],r["offset"+e],r["client"+e])}return o===t?m.css(n,i,o,a):m.style(n,i,o,a)},n,s?o:t,s,null)}})});e.jQuery=e.$=m;if(typeof define==="function"&&define.amd&&define.amd.jQuery){define("jquery",[],function(){return m})}}(window);!function(e){e.color={};e.color.make=function(t,n,i,o){var r={};r.r=t||0;r.g=n||0;r.b=i||0;r.a=o!=null?o:1;r.add=function(e,t){for(var n=0;n<e.length;++n){r[e.charAt(n)]+=t}return r.normalize()};r.scale=function(e,t){for(var n=0;n<e.length;++n){r[e.charAt(n)]*=t}return r.normalize()};r.toString=function(){if(r.a>=1){return"rgb("+[r.r,r.g,r.b].join(",")+")"}else{return"rgba("+[r.r,r.g,r.b,r.a].join(",")+")"}};r.normalize=function(){function e(e,t,n){return t<e?e:t>n?n:t}r.r=e(0,parseInt(r.r),255);r.g=e(0,parseInt(r.g),255);r.b=e(0,parseInt(r.b),255);r.a=e(0,r.a,1);return r};r.clone=function(){return e.color.make(r.r,r.b,r.g,r.a)};return r.normalize()};e.color.extract=function(t,n){var i;do{i=t.css(n).toLowerCase();if(i!=""&&i!="transparent"){break}t=t.parent()}while(!e.nodeName(t.get(0),"body"));if(i=="rgba(0, 0, 0, 0)"){i="transparent"}return e.color.parse(i)};e.color.parse=function(n){var i,o=e.color.make;if(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(n)){return o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10))}if(i=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n)){return o(parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),parseFloat(i[4]))}if(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(n)){return o(parseFloat(i[1])*2.55,parseFloat(i[2])*2.55,parseFloat(i[3])*2.55)}if(i=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(n)){return o(parseFloat(i[1])*2.55,parseFloat(i[2])*2.55,parseFloat(i[3])*2.55,parseFloat(i[4]))}if(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(n)){return o(parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16))}if(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(n)){return o(parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16))}var r=e.trim(n).toLowerCase();if(r=="transparent"){return o(255,255,255,0)}else{i=t[r]||[0,0,0];return o(i[0],i[1],i[2])}};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery);!function(e){function t(t,o,r,s){var a=[],l={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85},xaxis:{show:null,position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},u=null,c=null,f=null,d=null,p=null,h=[],m=[],g={left:0,right:0,top:0,bottom:0},v=0,y=0,b=0,x=0,w={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},k=this;k.setData=_;k.setupGrid=U;k.draw=Y;k.getPlaceholder=function(){return t};k.getCanvas=function(){return u};k.getPlotOffset=function(){return g};k.width=function(){return b};k.height=function(){return x};k.offset=function(){var e=f.offset();e.left+=g.left;e.top+=g.top;return e};k.getData=function(){return a};k.getAxes=function(){var t={},n;e.each(h.concat(m),function(e,n){if(n)t[n.direction+(n.n!=1?n.n:"")+"axis"]=n});return t};k.getXAxes=function(){return h};k.getYAxes=function(){return m};k.c2p=O;k.p2c=N;k.getOptions=function(){return l};k.highlight=vt;k.unhighlight=yt;k.triggerRedrawOverlay=mt;k.pointOffset=function(e){return{left:parseInt(h[M(e,"x")-1].p2c(+e.x)+g.left),top:parseInt(m[M(e,"y")-1].p2c(+e.y)+g.top)}};k.shutdown=W;k.resize=function(){I();R(u);R(c)};k.hooks=w;C(k);S(r);F();_(o);U();Y();B();function T(e,t){t=[k].concat(t);for(var n=0;n<e.length;++n)e[n].apply(this,t)}function C(){for(var t=0;t<s.length;++t){var n=s[t];n.init(k);if(n.options)e.extend(true,l,n.options)}}function S(t){var n;e.extend(true,l,t);if(l.xaxis.color==null)l.xaxis.color=l.grid.color;if(l.yaxis.color==null)l.yaxis.color=l.grid.color;if(l.xaxis.tickColor==null)l.xaxis.tickColor=l.grid.tickColor;if(l.yaxis.tickColor==null)l.yaxis.tickColor=l.grid.tickColor;if(l.grid.borderColor==null)l.grid.borderColor=l.grid.color;if(l.grid.tickColor==null)l.grid.tickColor=e.color.parse(l.grid.color).scale("a",.22).toString();for(n=0;n<Math.max(1,l.xaxes.length);++n)l.xaxes[n]=e.extend(true,{},l.xaxis,l.xaxes[n]);for(n=0;n<Math.max(1,l.yaxes.length);++n)l.yaxes[n]=e.extend(true,{},l.yaxis,l.yaxes[n]);if(l.xaxis.noTicks&&l.xaxis.ticks==null)l.xaxis.ticks=l.xaxis.noTicks;if(l.yaxis.noTicks&&l.yaxis.ticks==null)l.yaxis.ticks=l.yaxis.noTicks;if(l.x2axis){l.xaxes[1]=e.extend(true,{},l.xaxis,l.x2axis);l.xaxes[1].position="top"}if(l.y2axis){l.yaxes[1]=e.extend(true,{},l.yaxis,l.y2axis);l.yaxes[1].position="right"}if(l.grid.coloredAreas)l.grid.markings=l.grid.coloredAreas;if(l.grid.coloredAreasColor)l.grid.markingsColor=l.grid.coloredAreasColor;if(l.lines)e.extend(true,l.series.lines,l.lines);if(l.points)e.extend(true,l.series.points,l.points);if(l.bars)e.extend(true,l.series.bars,l.bars);if(l.shadowSize!=null)l.series.shadowSize=l.shadowSize;for(n=0;n<l.xaxes.length;++n)L(h,n+1).options=l.xaxes[n];for(n=0;n<l.yaxes.length;++n)L(m,n+1).options=l.yaxes[n];for(var i in w)if(l.hooks[i]&&l.hooks[i].length)w[i]=w[i].concat(l.hooks[i]);T(w.processOptions,[l])}function _(e){a=E(e);P();H()}function E(t){var n=[];for(var i=0;i<t.length;++i){var o=e.extend(true,{},l.series);if(t[i].data!=null){o.data=t[i].data;delete t[i].data;e.extend(true,o,t[i]);t[i].data=o.data}else o.data=t[i];n.push(o)}return n}function M(e,t){var n=e[t+"axis"];if(typeof n=="object")n=n.n;if(typeof n!="number")n=1;return n}function D(){return e.grep(h.concat(m),function(e){return e})}function O(e){var t={},n,i;for(n=0;n<h.length;++n){i=h[n];if(i&&i.used)t["x"+i.n]=i.c2p(e.left)}for(n=0;n<m.length;++n){i=m[n];if(i&&i.used)t["y"+i.n]=i.c2p(e.top)}if(t.x1!==undefined)t.x=t.x1;if(t.y1!==undefined)t.y=t.y1;return t}function N(e){var t={},n,i,o;for(n=0;n<h.length;++n){i=h[n];if(i&&i.used){o="x"+i.n;if(e[o]==null&&i.n==1)o="x";if(e[o]!=null){t.left=i.p2c(e[o]);break}}}for(n=0;n<m.length;++n){i=m[n];if(i&&i.used){o="y"+i.n;if(e[o]==null&&i.n==1)o="y";if(e[o]!=null){t.top=i.p2c(e[o]);break}}}return t}function L(t,n){if(!t[n-1])t[n-1]={n:n,direction:t==h?"x":"y",options:e.extend(true,{},t==h?l.xaxis:l.yaxis)};return t[n-1]}function P(){var t;var n=a.length,i=[],o=[];for(t=0;t<a.length;++t){var r=a[t].color;if(r!=null){--n;if(typeof r=="number")o.push(r);else i.push(e.color.parse(a[t].color))}}for(t=0;t<o.length;++t){n=Math.max(n,o[t]+1)}var s=[],u=0;t=0;while(s.length<n){var c;if(l.colors.length==t)c=e.color.make(100,100,100);else c=e.color.parse(l.colors[t]);var f=u%2==1?-1:1;c.scale("rgb",1+f*Math.ceil(u/2)*.2);s.push(c);++t;if(t>=l.colors.length){t=0;++u}}var d=0,p;for(t=0;t<a.length;++t){p=a[t];if(p.color==null){p.color=s[d].toString();++d}else if(typeof p.color=="number")p.color=s[p.color].toString();if(p.lines.show==null){var g,v=true;for(g in p)if(p[g]&&p[g].show){v=false;break}if(v)p.lines.show=true}p.xaxis=L(h,M(p,"x"));p.yaxis=L(m,M(p,"y"))}}function H(){var t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.MAX_VALUE,o,r,s,l,u,c,f,d,p,h,m,g,v,y;function b(e,t,n){if(t<e.datamin&&t!=-i)e.datamin=t;if(n>e.datamax&&n!=i)e.datamax=n}e.each(D(),function(e,i){i.datamin=t;i.datamax=n;i.used=false});for(o=0;o<a.length;++o){c=a[o];c.datapoints={points:[]};T(w.processRawData,[c,c.data,c.datapoints])}for(o=0;o<a.length;++o){c=a[o];var x=c.data,k=c.datapoints.format;if(!k){k=[];k.push({x:true,number:true,required:true});k.push({y:true,number:true,required:true});if(c.bars.show||c.lines.show&&c.lines.fill){k.push({y:true,number:true,required:false,defaultValue:0});if(c.bars.horizontal){delete k[k.length-1].y;k[k.length-1].x=true}}c.datapoints.format=k}if(c.datapoints.pointsize!=null)continue;c.datapoints.pointsize=k.length;d=c.datapoints.pointsize;f=c.datapoints.points;insertSteps=c.lines.show&&c.lines.steps;c.xaxis.used=c.yaxis.used=true;for(r=s=0;r<x.length;++r,s+=d){y=x[r];var C=y==null;if(!C){for(l=0;l<d;++l){g=y[l];v=k[l];if(v){if(v.number&&g!=null){g=+g;if(isNaN(g))g=null;else if(g==Infinity)g=i;else if(g==-Infinity)g=-i}if(g==null){if(v.required)C=true;if(v.defaultValue!=null)g=v.defaultValue}}f[s+l]=g}}if(C){for(l=0;l<d;++l){g=f[s+l];if(g!=null){v=k[l];if(v.x)b(c.xaxis,g,g);if(v.y)b(c.yaxis,g,g)}f[s+l]=null}}else{if(insertSteps&&s>0&&f[s-d]!=null&&f[s-d]!=f[s]&&f[s-d+1]!=f[s+1]){for(l=0;l<d;++l)f[s+d+l]=f[s+l];f[s+1]=f[s-d+1];s+=d}}}}for(o=0;o<a.length;++o){c=a[o];T(w.processDatapoints,[c,c.datapoints])}for(o=0;o<a.length;++o){c=a[o];f=c.datapoints.points,d=c.datapoints.pointsize;var S=t,_=t,E=n,M=n;for(r=0;r<f.length;r+=d){if(f[r]==null)continue;for(l=0;l<d;++l){g=f[r+l];v=k[l];if(!v||g==i||g==-i)continue;if(v.x){if(g<S)S=g;if(g>E)E=g}if(v.y){if(g<_)_=g;if(g>M)M=g}}}if(c.bars.show){var O=c.bars.align=="left"?0:-c.bars.barWidth/2;if(c.bars.horizontal){_+=O;M+=O+c.bars.barWidth}else{S+=O;E+=O+c.bars.barWidth}}b(c.xaxis,S,E);b(c.yaxis,_,M)}e.each(D(),function(e,i){if(i.datamin==t)i.datamin=null;if(i.datamax==n)i.datamax=null})}function A(n,i){var o=document.createElement("canvas");o.className=i;o.width=v;o.height=y;if(!n)e(o).css({position:"absolute",left:0,top:0});e(o).appendTo(t);if(!o.getContext)o=window.G_vmlCanvasManager.initElement(o);o.getContext("2d").save();return o}function I(){v=t.width();y=t.height();if(v<=0||y<=0)throw"Invalid dimensions for plot, width = "+v+", height = "+y}function R(e){if(e.width!=v)e.width=v;if(e.height!=y)e.height=y;var t=e.getContext("2d");t.restore();t.save()}function F(){var n,i=t.children("canvas.base"),o=t.children("canvas.overlay");if(i.length==0||o==0){t.html("");t.css({padding:0});if(t.css("position")=="static")t.css("position","relative");I();u=A(true,"base");c=A(false,"overlay");n=false}else{u=i.get(0);c=o.get(0);n=true}d=u.getContext("2d");p=c.getContext("2d");f=e([c,u]);if(n){t.data("plot").shutdown();k.resize();p.clearRect(0,0,v,y);f.unbind();t.children().not([u,c]).remove()}t.data("plot",k)}function B(){if(l.grid.hoverable){f.mousemove(ft);f.mouseleave(dt)}if(l.grid.clickable)f.click(pt);T(w.bindEvents,[f])}function W(){if(ut)clearTimeout(ut);f.unbind("mousemove",ft);f.unbind("mouseleave",dt);f.unbind("click",pt);T(w.shutdown,[f])}function j(e){function t(e){return e}var n,i,o=e.options.transform||t,r=e.options.inverseTransform;if(e.direction=="x"){n=e.scale=b/Math.abs(o(e.max)-o(e.min));i=Math.min(o(e.max),o(e.min))}else{n=e.scale=x/Math.abs(o(e.max)-o(e.min));n=-n;i=Math.max(o(e.max),o(e.min))}if(o==t)e.p2c=function(e){return(e-i)*n};else e.p2c=function(e){return(o(e)-i)*n};if(!r)e.c2p=function(e){return i+e/n};else e.c2p=function(e){return r(i+e/n)}}function $(n){var i=n.options,o,r=n.ticks||[],s=[],a,l=i.labelWidth,u=i.labelHeight,c;function f(i,o){return e('<div style="position:absolute;top:-10000px;'+o+'font-size:smaller">'+'<div class="'+n.direction+"Axis "+n.direction+n.n+'Axis">'+i.join("")+"</div></div>").appendTo(t)}if(n.direction=="x"){if(l==null)l=Math.floor(v/(r.length>0?r.length:1));if(u==null){s=[];for(o=0;o<r.length;++o){a=r[o].label;if(a)s.push('<div class="tickLabel" style="float:left;width:'+l+'px">'+a+"</div>")}if(s.length>0){s.push('<div style="clear:left"></div>');c=f(s,"width:10000px;");u=c.height();c.remove()}}}else if(l==null||u==null){for(o=0;o<r.length;++o){a=r[o].label;if(a)s.push('<div class="tickLabel">'+a+"</div>")}if(s.length>0){c=f(s,"");if(l==null)l=c.children().width();if(u==null)u=c.find("div.tickLabel").height();c.remove()}}if(l==null)l=0;if(u==null)u=0;n.labelWidth=l;n.labelHeight=u}function z(t){var n=t.labelWidth,i=t.labelHeight,o=t.options.position,r=t.options.tickLength,s=l.grid.axisMargin,a=l.grid.labelMargin,u=t.direction=="x"?h:m,c;var f=e.grep(u,function(e){return e&&e.options.position==o&&e.reserveSpace});if(e.inArray(t,f)==f.length-1)s=0;if(r==null)r="full";var d=e.grep(u,function(e){return e&&e.reserveSpace});var p=e.inArray(t,d)==0;if(!p&&r=="full")r=5;if(!isNaN(+r))a+=+r;if(t.direction=="x"){i+=a;if(o=="bottom"){g.bottom+=i+s;t.box={top:y-g.bottom,height:i}}else{t.box={top:g.top+s,height:i};g.top+=i+s}}else{n+=a;if(o=="left"){t.box={left:g.left+s,width:n};g.left+=n+s}else{g.right+=n+s;t.box={left:v-g.right,width:n}}}t.position=o;t.tickLength=r;t.box.padding=a;t.innermost=p}function q(e){if(e.direction=="x"){e.box.left=g.left;e.box.width=b}else{e.box.top=g.top;e.box.height=x}}function U(){var t,n=D();e.each(n,function(e,t){t.show=t.options.show;if(t.show==null)t.show=t.used;t.reserveSpace=t.show||t.options.reserveSpace;X(t)});allocatedAxes=e.grep(n,function(e){return e.reserveSpace});g.left=g.right=g.top=g.bottom=0;if(l.grid.show){e.each(allocatedAxes,function(e,t){V(t);K(t);Q(t,t.ticks);$(t)});for(t=allocatedAxes.length-1;t>=0;--t)z(allocatedAxes[t]);var i=l.grid.minBorderMargin;if(i==null){i=0;for(t=0;t<a.length;++t)i=Math.max(i,a[t].points.radius+a[t].points.lineWidth/2)}for(var o in g){g[o]+=l.grid.borderWidth;g[o]=Math.max(i,g[o])}}b=v-g.left-g.right;x=y-g.bottom-g.top;e.each(n,function(e,t){j(t)});if(l.grid.show){e.each(allocatedAxes,function(e,t){q(t)});et()}at()}function X(e){var t=e.options,n=+(t.min!=null?t.min:e.datamin),i=+(t.max!=null?t.max:e.datamax),o=i-n;if(o==0){var r=i==0?1:.01;if(t.min==null)n-=r;if(t.max==null||t.min!=null)i+=r}else{var s=t.autoscaleMargin;if(s!=null){if(t.min==null){n-=o*s;if(n<0&&e.datamin!=null&&e.datamin>=0)n=0}if(t.max==null){i+=o*s;if(i>0&&e.datamax!=null&&e.datamax<=0)i=0}}}e.min=n;e.max=i}function V(t){var i=t.options;var o;if(typeof i.ticks=="number"&&i.ticks>0)o=i.ticks;else o=.3*Math.sqrt(t.direction=="x"?v:y);var r=(t.max-t.min)/o,s,a,l,u,c,f,d;if(i.mode=="time"){var p={second:1e3,minute:60*1e3,hour:60*60*1e3,day:24*60*60*1e3,month:30*24*60*60*1e3,year:365.2425*24*60*60*1e3};var g=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var b=0;if(i.minTickSize!=null){if(typeof i.tickSize=="number")b=i.tickSize;else b=i.minTickSize[0]*p[i.minTickSize[1]]}for(var c=0;c<g.length-1;++c)if(r<(g[c][0]*p[g[c][1]]+g[c+1][0]*p[g[c+1][1]])/2&&g[c][0]*p[g[c][1]]>=b)break;s=g[c][0];l=g[c][1];if(l=="year"){f=Math.pow(10,Math.floor(Math.log(r/p.year)/Math.LN10));d=r/p.year/f;if(d<1.5)s=1;else if(d<3)s=2;else if(d<7.5)s=5;else s=10;s*=f}t.tickSize=i.tickSize||[s,l];a=function(e){var t=[],i=e.tickSize[0],o=e.tickSize[1],r=new Date(e.min);var s=i*p[o];if(o=="second")r.setUTCSeconds(n(r.getUTCSeconds(),i));if(o=="minute")r.setUTCMinutes(n(r.getUTCMinutes(),i));if(o=="hour")r.setUTCHours(n(r.getUTCHours(),i));if(o=="month")r.setUTCMonth(n(r.getUTCMonth(),i));if(o=="year")r.setUTCFullYear(n(r.getUTCFullYear(),i));r.setUTCMilliseconds(0);if(s>=p.minute)r.setUTCSeconds(0);if(s>=p.hour)r.setUTCMinutes(0);if(s>=p.day)r.setUTCHours(0);if(s>=p.day*4)r.setUTCDate(1);if(s>=p.year)r.setUTCMonth(0);var a=0,l=Number.NaN,u;do{u=l;l=r.getTime();t.push(l);if(o=="month"){if(i<1){r.setUTCDate(1);var c=r.getTime();r.setUTCMonth(r.getUTCMonth()+1);var f=r.getTime();r.setTime(l+a*p.hour+(f-c)*i);a=r.getUTCHours();r.setUTCHours(0)}else r.setUTCMonth(r.getUTCMonth()+i)}else if(o=="year"){r.setUTCFullYear(r.getUTCFullYear()+i)}else r.setTime(l+s)}while(l<e.max&&l!=u);return t};u=function(t,n){var o=new Date(t);if(i.timeformat!=null)return e.plot.formatDate(o,i.timeformat,i.monthNames);var r=n.tickSize[0]*p[n.tickSize[1]];var s=n.max-n.min;var a=i.twelveHourClock?" %p":"";if(r<p.minute)fmt="%h:%M:%S"+a;else if(r<p.day){if(s<2*p.day)fmt="%h:%M"+a;else fmt="%b %d %h:%M"+a}else if(r<p.month)fmt="%b %d";else if(r<p.year){if(s<p.year)fmt="%b";else fmt="%b %y"}else fmt="%y";return e.plot.formatDate(o,fmt,i.monthNames)}}else{var x=i.tickDecimals;var w=-Math.floor(Math.log(r)/Math.LN10);if(x!=null&&w>x)w=x;f=Math.pow(10,-w);d=r/f;if(d<1.5)s=1;else if(d<3){s=2;if(d>2.25&&(x==null||w+1<=x)){s=2.5;++w}}else if(d<7.5)s=5;else s=10;s*=f;if(i.minTickSize!=null&&s<i.minTickSize)s=i.minTickSize;t.tickDecimals=Math.max(0,x!=null?x:w);t.tickSize=i.tickSize||s;a=function(e){var t=[];var i=n(e.min,e.tickSize),o=0,r=Number.NaN,s;do{s=r;r=i+o*e.tickSize;t.push(r);++o}while(r<e.max&&r!=s);return t};u=function(e,t){return e.toFixed(t.tickDecimals)}}if(i.alignTicksWithAxis!=null){var k=(t.direction=="x"?h:m)[i.alignTicksWithAxis-1];if(k&&k.used&&k!=t){var T=a(t);if(T.length>0){if(i.min==null)t.min=Math.min(t.min,T[0]);if(i.max==null&&T.length>1)t.max=Math.max(t.max,T[T.length-1])}a=function(e){var t=[],n,i;for(i=0;i<k.ticks.length;++i){n=(k.ticks[i].v-k.min)/(k.max-k.min);n=e.min+n*(e.max-e.min);t.push(n)}return t};if(t.mode!="time"&&i.tickDecimals==null){var C=Math.max(0,-Math.floor(Math.log(r)/Math.LN10)+1),S=a(t);if(!(S.length>1&&/\..*0$/.test((S[1]-S[0]).toFixed(C))))t.tickDecimals=C}}}t.tickGenerator=a;if(e.isFunction(i.tickFormatter))t.tickFormatter=function(e,t){return""+i.tickFormatter(e,t)};else t.tickFormatter=u}function K(t){var n=t.options.ticks,i=[];if(n==null||typeof n=="number"&&n>0)i=t.tickGenerator(t);else if(n){if(e.isFunction(n))i=n({min:t.min,max:t.max});else i=n}var o,r;t.ticks=[];for(o=0;o<i.length;++o){var s=null;var a=i[o];if(typeof a=="object"){r=+a[0];if(a.length>1)s=a[1]}else r=+a;if(s==null)s=t.tickFormatter(r,t);if(!isNaN(r))t.ticks.push({v:r,label:s})}}function Q(e,t){if(e.options.autoscaleMargin&&t.length>0){if(e.options.min==null)e.min=Math.min(e.min,t[0].v);if(e.options.max==null&&t.length>1)e.max=Math.max(e.max,t[t.length-1].v)}}function Y(){d.clearRect(0,0,v,y);var e=l.grid;if(e.show&&e.backgroundColor)G();if(e.show&&!e.aboveData)Z();for(var t=0;t<a.length;++t){T(w.drawSeries,[d,a[t]]);tt(a[t])}T(w.draw,[d]);if(e.show&&e.aboveData)Z()}function J(e,t){var n,o,r,s,a=D();for(i=0;i<a.length;++i){n=a[i];if(n.direction==t){s=t+n.n+"axis";if(!e[s]&&n.n==1)s=t+"axis";if(e[s]){o=e[s].from;r=e[s].to;break}}}if(!e[s]){n=t=="x"?h[0]:m[0];o=e[t+"1"];r=e[t+"2"]}if(o!=null&&r!=null&&o>r){var l=o;o=r;r=l}return{from:o,to:r,axis:n}}function G(){d.save();d.translate(g.left,g.top);d.fillStyle=kt(l.grid.backgroundColor,x,0,"rgba(255, 255, 255, 0)");d.fillRect(0,0,b,x);d.restore()}function Z(){var t;d.save();d.translate(g.left,g.top);var n=l.grid.markings;if(n){if(e.isFunction(n)){var i=k.getAxes();i.xmin=i.xaxis.min;i.xmax=i.xaxis.max;i.ymin=i.yaxis.min;i.ymax=i.yaxis.max;n=n(i)}for(t=0;t<n.length;++t){var o=n[t],r=J(o,"x"),s=J(o,"y");if(r.from==null)r.from=r.axis.min;if(r.to==null)r.to=r.axis.max;if(s.from==null)s.from=s.axis.min;if(s.to==null)s.to=s.axis.max;if(r.to<r.axis.min||r.from>r.axis.max||s.to<s.axis.min||s.from>s.axis.max)continue;r.from=Math.max(r.from,r.axis.min);r.to=Math.min(r.to,r.axis.max);s.from=Math.max(s.from,s.axis.min);s.to=Math.min(s.to,s.axis.max);if(r.from==r.to&&s.from==s.to)continue;r.from=r.axis.p2c(r.from);r.to=r.axis.p2c(r.to);s.from=s.axis.p2c(s.from);s.to=s.axis.p2c(s.to);if(r.from==r.to||s.from==s.to){d.beginPath();d.strokeStyle=o.color||l.grid.markingsColor;d.lineWidth=o.lineWidth||l.grid.markingsLineWidth;d.moveTo(r.from,s.from);d.lineTo(r.to,s.to);d.stroke()}else{d.fillStyle=o.color||l.grid.markingsColor;d.fillRect(r.from,s.to,r.to-r.from,s.from-s.to)}}}var i=D(),a=l.grid.borderWidth;for(var u=0;u<i.length;++u){var c=i[u],f=c.box,p=c.tickLength,h,m,v,y;if(!c.show||c.ticks.length==0)continue;d.strokeStyle=c.options.tickColor||e.color.parse(c.options.color).scale("a",.22).toString();d.lineWidth=1;if(c.direction=="x"){h=0;if(p=="full")m=c.position=="top"?0:x;else m=f.top-g.top+(c.position=="top"?f.height:0)}else{m=0;if(p=="full")h=c.position=="left"?0:b;else h=f.left-g.left+(c.position=="left"?f.width:0)}if(!c.innermost){d.beginPath();v=y=0;if(c.direction=="x")v=b;else y=x;if(d.lineWidth==1){h=Math.floor(h)+.5;m=Math.floor(m)+.5}d.moveTo(h,m);d.lineTo(h+v,m+y);d.stroke()}d.beginPath();for(t=0;t<c.ticks.length;++t){var w=c.ticks[t].v;v=y=0;if(w<c.min||w>c.max||p=="full"&&a>0&&(w==c.min||w==c.max))continue;if(c.direction=="x"){h=c.p2c(w);y=p=="full"?-x:p;if(c.position=="top")y=-y}else{m=c.p2c(w);v=p=="full"?-b:p;if(c.position=="left")v=-v}if(d.lineWidth==1){if(c.direction=="x")h=Math.floor(h)+.5;else m=Math.floor(m)+.5}d.moveTo(h,m);d.lineTo(h+v,m+y)}d.stroke()}if(a){d.lineWidth=a;d.strokeStyle=l.grid.borderColor;d.strokeRect(-a/2,-a/2,b+a,x+a)}d.restore()}function et(){t.find(".tickLabels").remove();var e=['<div class="tickLabels" style="font-size:smaller">'];var n=D();for(var i=0;i<n.length;++i){var o=n[i],r=o.box;if(!o.show)continue;e.push('<div class="'+o.direction+"Axis "+o.direction+o.n+'Axis" style="color:'+o.options.color+'">');for(var s=0;s<o.ticks.length;++s){var a=o.ticks[s];if(!a.label||a.v<o.min||a.v>o.max)continue;var l={},u;if(o.direction=="x"){u="center";l.left=Math.round(g.left+o.p2c(a.v)-o.labelWidth/2);if(o.position=="bottom")l.top=r.top+r.padding;else l.bottom=y-(r.top+r.height-r.padding)}else{l.top=Math.round(g.top+o.p2c(a.v)-o.labelHeight/2);if(o.position=="left"){l.right=v-(r.left+r.width-r.padding);u="right"}else{l.left=r.left+r.padding;u="left"}}l.width=o.labelWidth;var c=["position:absolute","text-align:"+u];for(var f in l)c.push(f+":"+l[f]+"px");e.push('<div class="tickLabel" style="'+c.join(";")+'">'+a.label+"</div>")}e.push("</div>")}e.push("</div>");t.append(e.join(""))}function tt(e){if(e.lines.show)nt(e);if(e.bars.show)rt(e);if(e.points.show)it(e)}function nt(e){function t(e,t,n,i,o){var r=e.points,s=e.pointsize,a=null,l=null;d.beginPath();for(var u=s;u<r.length;u+=s){var c=r[u-s],f=r[u-s+1],p=r[u],h=r[u+1];if(c==null||p==null)continue;if(f<=h&&f<o.min){if(h<o.min)continue;c=(o.min-f)/(h-f)*(p-c)+c;f=o.min}else if(h<=f&&h<o.min){if(f<o.min)continue;p=(o.min-f)/(h-f)*(p-c)+c;h=o.min}if(f>=h&&f>o.max){if(h>o.max)continue;c=(o.max-f)/(h-f)*(p-c)+c;f=o.max}else if(h>=f&&h>o.max){if(f>o.max)continue;p=(o.max-f)/(h-f)*(p-c)+c;h=o.max}if(c<=p&&c<i.min){if(p<i.min)continue;f=(i.min-c)/(p-c)*(h-f)+f;c=i.min}else if(p<=c&&p<i.min){if(c<i.min)continue;h=(i.min-c)/(p-c)*(h-f)+f;p=i.min}if(c>=p&&c>i.max){if(p>i.max)continue;f=(i.max-c)/(p-c)*(h-f)+f;c=i.max}else if(p>=c&&p>i.max){if(c>i.max)continue;h=(i.max-c)/(p-c)*(h-f)+f;p=i.max}if(c!=a||f!=l)d.moveTo(i.p2c(c)+t,o.p2c(f)+n);a=p;l=h;d.lineTo(i.p2c(p)+t,o.p2c(h)+n)}d.stroke()}function n(e,t,n){var i=e.points,o=e.pointsize,r=Math.min(Math.max(0,n.min),n.max),s=0,a,l=false,u=1,c=0,f=0;while(true){if(o>0&&s>i.length+o)break;s+=o;var p=i[s-o],h=i[s-o+u],m=i[s],g=i[s+u];if(l){if(o>0&&p!=null&&m==null){f=s;o=-o;u=2;continue}if(o<0&&s==c+o){d.fill();l=false;o=-o;u=1;s=c=f+o;continue}}if(p==null||m==null)continue;if(p<=m&&p<t.min){if(m<t.min)continue;h=(t.min-p)/(m-p)*(g-h)+h;p=t.min}else if(m<=p&&m<t.min){if(p<t.min)continue;g=(t.min-p)/(m-p)*(g-h)+h;m=t.min}if(p>=m&&p>t.max){if(m>t.max)continue;h=(t.max-p)/(m-p)*(g-h)+h;p=t.max}else if(m>=p&&m>t.max){if(p>t.max)continue;g=(t.max-p)/(m-p)*(g-h)+h;m=t.max}if(!l){d.beginPath();d.moveTo(t.p2c(p),n.p2c(r));l=true}if(h>=n.max&&g>=n.max){d.lineTo(t.p2c(p),n.p2c(n.max));d.lineTo(t.p2c(m),n.p2c(n.max));continue}else if(h<=n.min&&g<=n.min){d.lineTo(t.p2c(p),n.p2c(n.min));d.lineTo(t.p2c(m),n.p2c(n.min));continue}var v=p,y=m;if(h<=g&&h<n.min&&g>=n.min){p=(n.min-h)/(g-h)*(m-p)+p;h=n.min}else if(g<=h&&g<n.min&&h>=n.min){m=(n.min-h)/(g-h)*(m-p)+p;g=n.min}if(h>=g&&h>n.max&&g<=n.max){p=(n.max-h)/(g-h)*(m-p)+p;h=n.max}else if(g>=h&&g>n.max&&h<=n.max){m=(n.max-h)/(g-h)*(m-p)+p;g=n.max}if(p!=v){d.lineTo(t.p2c(v),n.p2c(h))}d.lineTo(t.p2c(p),n.p2c(h));d.lineTo(t.p2c(m),n.p2c(g));if(m!=y){d.lineTo(t.p2c(m),n.p2c(g));d.lineTo(t.p2c(y),n.p2c(g))}}}d.save();d.translate(g.left,g.top);d.lineJoin="round";var i=e.lines.lineWidth,o=e.shadowSize;if(i>0&&o>0){d.lineWidth=o;d.strokeStyle="rgba(0,0,0,0.1)";var r=Math.PI/18;t(e.datapoints,Math.sin(r)*(i/2+o/2),Math.cos(r)*(i/2+o/2),e.xaxis,e.yaxis);d.lineWidth=o/2;t(e.datapoints,Math.sin(r)*(i/2+o/4),Math.cos(r)*(i/2+o/4),e.xaxis,e.yaxis)}d.lineWidth=i;d.strokeStyle=e.color;var s=st(e.lines,e.color,0,x);if(s){d.fillStyle=s;n(e.datapoints,e.xaxis,e.yaxis)}if(i>0)t(e.datapoints,0,0,e.xaxis,e.yaxis);d.restore()}function it(e){function t(e,t,n,i,o,r,s,a){var l=e.points,u=e.pointsize;for(var c=0;c<l.length;c+=u){var f=l[c],p=l[c+1];if(f==null||f<r.min||f>r.max||p<s.min||p>s.max)continue;d.beginPath();f=r.p2c(f);p=s.p2c(p)+i;if(a=="circle")d.arc(f,p,t,0,o?Math.PI:Math.PI*2,false);else a(d,f,p,t,o);d.closePath();if(n){d.fillStyle=n;d.fill()}d.stroke()}}d.save();d.translate(g.left,g.top);var n=e.points.lineWidth,i=e.shadowSize,o=e.points.radius,r=e.points.symbol;if(n>0&&i>0){var s=i/2;d.lineWidth=s;d.strokeStyle="rgba(0,0,0,0.1)";t(e.datapoints,o,null,s+s/2,true,e.xaxis,e.yaxis,r);d.strokeStyle="rgba(0,0,0,0.2)";t(e.datapoints,o,null,s/2,true,e.xaxis,e.yaxis,r)}d.lineWidth=n;d.strokeStyle=e.color;t(e.datapoints,o,st(e.points,e.color),0,false,e.xaxis,e.yaxis,r);d.restore()}function ot(e,t,n,i,o,r,s,a,l,u,c,f){var d,p,h,m,g,v,y,b,x;if(c){b=v=y=true;g=false;d=n;p=e;m=t+i;h=t+o;if(p<d){x=p;p=d;d=x;g=true;v=false}}else{g=v=y=true;b=false;d=e+i;p=e+o;h=n;m=t;if(m<h){x=m;m=h;h=x;b=true;y=false}}if(p<a.min||d>a.max||m<l.min||h>l.max)return;if(d<a.min){d=a.min;g=false}if(p>a.max){p=a.max;v=false}if(h<l.min){h=l.min;b=false}if(m>l.max){m=l.max;y=false}d=a.p2c(d);h=l.p2c(h);p=a.p2c(p);m=l.p2c(m);if(s){u.beginPath();u.moveTo(d,h);u.lineTo(d,m);u.lineTo(p,m);u.lineTo(p,h);u.fillStyle=s(h,m);u.fill()}if(f>0&&(g||v||y||b)){u.beginPath();u.moveTo(d,h+r);if(g)u.lineTo(d,m+r);else u.moveTo(d,m+r);if(y)u.lineTo(p,m+r);else u.moveTo(p,m+r);if(v)u.lineTo(p,h+r);else u.moveTo(p,h+r);if(b)u.lineTo(d,h+r);else u.moveTo(d,h+r);u.stroke()}}function rt(e){function t(t,n,i,o,r,s,a){var l=t.points,u=t.pointsize;for(var c=0;c<l.length;c+=u){if(l[c]==null)continue;ot(l[c],l[c+1],l[c+2],n,i,o,r,s,a,d,e.bars.horizontal,e.bars.lineWidth)}}d.save();d.translate(g.left,g.top);d.lineWidth=e.bars.lineWidth;d.strokeStyle=e.color;var n=e.bars.align=="left"?0:-e.bars.barWidth/2;var i=e.bars.fill?function(t,n){return st(e.bars,e.color,t,n)}:null;t(e.datapoints,n,n+e.bars.barWidth,0,i,e.xaxis,e.yaxis);d.restore()}function st(t,n,i,o){var r=t.fill;if(!r)return null;if(t.fillColor)return kt(t.fillColor,i,o,n);var s=e.color.parse(n);s.a=typeof r=="number"?r:.4;s.normalize();return s.toString()}function at(){t.find(".legend").remove();if(!l.legend.show)return;var n=[],i=false,o=l.legend.labelFormatter,r,s;for(var u=0;u<a.length;++u){r=a[u];s=r.label;if(!s)continue;if(u%l.legend.noColumns==0){if(i)n.push("</tr>");n.push("<tr>");i=true}if(o)s=o(s,r);n.push('<td class="legendColorBox"><div style="border:1px solid '+l.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+r.color+';overflow:hidden"></div></div></td>'+'<td class="legendLabel">'+s+"</td>")}if(i)n.push("</tr>");if(n.length==0)return;var c='<table style="font-size:smaller;color:'+l.grid.color+'">'+n.join("")+"</table>";if(l.legend.container!=null)e(l.legend.container).html(c);else{var f="",d=l.legend.position,p=l.legend.margin;if(p[0]==null)p=[p,p];if(d.charAt(0)=="n")f+="top:"+(p[1]+g.top)+"px;";else if(d.charAt(0)=="s")f+="bottom:"+(p[1]+g.bottom)+"px;";if(d.charAt(1)=="e")f+="right:"+(p[0]+g.right)+"px;";else if(d.charAt(1)=="w")f+="left:"+(p[0]+g.left)+"px;";var h=e('<div class="legend">'+c.replace('style="','style="position:absolute;'+f+";")+"</div>").appendTo(t);if(l.legend.backgroundOpacity!=0){var m=l.legend.backgroundColor;if(m==null){m=l.grid.backgroundColor;if(m&&typeof m=="string")m=e.color.parse(m);else m=e.color.extract(h,"background-color");m.a=1;m=m.toString()}var v=h.children();e('<div style="position:absolute;width:'+v.width()+"px;height:"+v.height()+"px;"+f+"background-color:"+m+';"> </div>').prependTo(h).css("opacity",l.legend.backgroundOpacity)}}}var lt=[],ut=null;function ct(e,t,n){var i=l.grid.mouseActiveRadius,o=i*i+1,r=null,s=false,u,c;for(u=a.length-1;u>=0;--u){if(!n(a[u]))continue;var f=a[u],d=f.xaxis,p=f.yaxis,h=f.datapoints.points,m=f.datapoints.pointsize,g=d.c2p(e),v=p.c2p(t),y=i/d.scale,b=i/p.scale;if(d.options.inverseTransform)y=Number.MAX_VALUE;if(p.options.inverseTransform)b=Number.MAX_VALUE;if(f.lines.show||f.points.show){for(c=0;c<h.length;c+=m){var x=h[c],w=h[c+1];if(x==null)continue;if(x-g>y||x-g<-y||w-v>b||w-v<-b)continue;var k=Math.abs(d.p2c(x)-e),T=Math.abs(p.p2c(w)-t),C=k*k+T*T;if(C<o){o=C;r=[u,c/m]}}}if(f.bars.show&&!r){var S=f.bars.align=="left"?0:-f.bars.barWidth/2,_=S+f.bars.barWidth;for(c=0;c<h.length;c+=m){var x=h[c],w=h[c+1],E=h[c+2];if(x==null)continue;if(a[u].bars.horizontal?g<=Math.max(E,x)&&g>=Math.min(E,x)&&v>=w+S&&v<=w+_:g>=x+S&&g<=x+_&&v>=Math.min(E,w)&&v<=Math.max(E,w))r=[u,c/m]}}}if(r){u=r[0];c=r[1];m=a[u].datapoints.pointsize;return{datapoint:a[u].datapoints.points.slice(c*m,(c+1)*m),dataIndex:c,series:a[u],seriesIndex:u}}return null}function ft(e){if(l.grid.hoverable)ht("plothover",e,function(e){return e["hoverable"]!=false})}function dt(e){if(l.grid.hoverable)ht("plothover",e,function(e){return false})}function pt(e){ht("plotclick",e,function(e){return e["clickable"]!=false})}function ht(e,n,i){var o=f.offset(),r=n.pageX-o.left-g.left,s=n.pageY-o.top-g.top,a=O({left:r,top:s});a.pageX=n.pageX;a.pageY=n.pageY;var u=ct(r,s,i);if(u){u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+o.left+g.left);u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+o.top+g.top)}if(l.grid.autoHighlight){for(var c=0;c<lt.length;++c){var d=lt[c];if(d.auto==e&&!(u&&d.series==u.series&&d.point[0]==u.datapoint[0]&&d.point[1]==u.datapoint[1]))yt(d.series,d.point)}if(u)vt(u.series,u.datapoint,e)}t.trigger(e,[a,u])}function mt(){if(!ut)ut=setTimeout(gt,30)}function gt(){ut=null;
p.save();p.clearRect(0,0,v,y);p.translate(g.left,g.top);var e,t;for(e=0;e<lt.length;++e){t=lt[e];if(t.series.bars.show)wt(t.series,t.point);else xt(t.series,t.point)}p.restore();T(w.drawOverlay,[p])}function vt(e,t,n){if(typeof e=="number")e=a[e];if(typeof t=="number"){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var o=bt(e,t);if(o==-1){lt.push({series:e,point:t,auto:n});mt()}else if(!n)lt[o].auto=false}function yt(e,t){if(e==null&&t==null){lt=[];mt()}if(typeof e=="number")e=a[e];if(typeof t=="number")t=e.data[t];var n=bt(e,t);if(n!=-1){lt.splice(n,1);mt()}}function bt(e,t){for(var n=0;n<lt.length;++n){var i=lt[n];if(i.series==e&&i.point[0]==t[0]&&i.point[1]==t[1])return n}return-1}function xt(t,n){var i=n[0],o=n[1],r=t.xaxis,s=t.yaxis;if(i<r.min||i>r.max||o<s.min||o>s.max)return;var a=t.points.radius+t.points.lineWidth/2;p.lineWidth=a;p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var l=1.5*a,i=r.p2c(i),o=s.p2c(o);p.beginPath();if(t.points.symbol=="circle")p.arc(i,o,l,0,2*Math.PI,false);else t.points.symbol(p,i,o,l,false);p.closePath();p.stroke()}function wt(t,n){p.lineWidth=t.bars.lineWidth;p.strokeStyle=e.color.parse(t.color).scale("a",.5).toString();var i=e.color.parse(t.color).scale("a",.5).toString();var o=t.bars.align=="left"?0:-t.bars.barWidth/2;ot(n[0],n[1],n[2]||0,o,o+t.bars.barWidth,0,function(){return i},t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function kt(t,n,i,o){if(typeof t=="string")return t;else{var r=d.createLinearGradient(0,i,0,n);for(var s=0,a=t.colors.length;s<a;++s){var l=t.colors[s];if(typeof l!="string"){var u=e.color.parse(o);if(l.brightness!=null)u=u.scale("rgb",l.brightness);if(l.opacity!=null)u.a*=l.opacity;l=u.toString()}r.addColorStop(s/(a-1),l)}return r}}}e.plot=function(n,i,o){var r=new t(e(n),i,o,e.plot.plugins);return r};e.plot.version="0.7";e.plot.plugins=[];e.plot.formatDate=function(e,t,n){var i=function(e){e=""+e;return e.length==1?"0"+e:e};var o=[];var r=false,s=false;var a=e.getUTCHours();var l=a<12;if(n==null)n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(t.search(/%p|%P/)!=-1){if(a>12){a=a-12}else if(a==0){a=12}}for(var u=0;u<t.length;++u){var c=t.charAt(u);if(r){switch(c){case"h":c=""+a;break;case"H":c=i(a);break;case"M":c=i(e.getUTCMinutes());break;case"S":c=i(e.getUTCSeconds());break;case"d":c=""+e.getUTCDate();break;case"m":c=""+(e.getUTCMonth()+1);break;case"y":c=""+e.getUTCFullYear();break;case"b":c=""+n[e.getUTCMonth()];break;case"p":c=l?""+"am":""+"pm";break;case"P":c=l?""+"AM":""+"PM";break;case"0":c="";s=true;break}if(c&&s){c=i(c);s=false}o.push(c);if(!s)r=false}else{if(c=="%")r=true;else o.push(c)}}return o.join("")};function n(e,t){return t*Math.floor(e/t)}}(jQuery);!function($){$.fn.markItUp=function(settings,extraSettings){var method,params,options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=false;if(typeof settings=="string"){method=settings;params=extraSettings}options={id:"",nameSpace:"",root:"",previewHandler:false,previewInWindow:"",previewInElement:"",previewAutoRefresh:true,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:false,previewParserPath:"",previewParserVar:"data",resizeHandle:true,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}]};$.extend(options,settings,extraSettings);if(!options.root){$("script").each(function(e,t){miuScript=$(t).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/);if(miuScript!==null){options.root=miuScript[1]}})}var uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}};var matched=uaMatch(navigator.userAgent);var browser={};if(matched.browser){browser[matched.browser]=true;browser.version=matched.version}if(browser.chrome){browser.webkit=true}else if(browser.webkit){browser.safari=true}return this.each(function(){var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this);textarea=this;levels=[];abort=false;scrollPosition=caretPosition=0;caretOffset=-1;options.previewParserPath=localize(options.previewParserPath);options.previewTemplatePath=localize(options.previewTemplatePath);if(method){switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}return}function localize(e,t){if(t){return e.replace(/("|')~\//g,"$1"+options.root)}return e.replace(/^~\//,options.root)}function init(){id="";nameSpace="";if(options.id){id='id="'+options.id+'"'}else if($$.attr("id")){id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'}if(options.nameSpace){nameSpace='class="'+options.nameSpace+'"'}$$.wrap("<div "+nameSpace+"></div>");$$.wrap("<div "+id+' class="markItUp"></div>');$$.wrap('<div class="markItUpContainer"></div>');$$.addClass("markItUpEditor");header=$('<div class="markItUpHeader"></div>').insertBefore($$);$(dropMenus(options.markupSet)).appendTo(header);footer=$('<div class="markItUpFooter"></div>').insertAfter($$);if(options.resizeHandle===true&&browser.safari!==true){resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(e){var t=$$.height(),n=e.clientY,i,o;i=function(e){$$.css("height",Math.max(20,e.clientY+t-n)+"px");return false};o=function(e){$("html").unbind("mousemove.markItUp",i).unbind("mouseup.markItUp",o);return false};$("html").bind("mousemove.markItUp",i).bind("mouseup.markItUp",o)});footer.append(resizeHandle)}$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed);$$.bind("insertion.markItUp",function(e,t){if(t.target!==false){get()}if(textarea===$.markItUp.focused){markup(t)}});$$.bind("focus.markItUp",function(){$.markItUp.focused=this});if(options.previewInElement){refreshPreview()}}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;$("li:hover > ul",ul).css("display","block");$.each(markupSet,function(){var button=this,t="",title,li,j;title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"";key=button.key?'accesskey="'+button.key+'"':"";if(button.separator){li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul)}else{i++;for(j=levels.length-1;j>=0;j--){t+=levels[j]+"-"}li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return false}).bind("click.markItUp",function(e){e.preventDefault()}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){if(button.call){eval(button.call)()}setTimeout(function(){markup(button)},1);return false}).bind("mouseenter.markItUp",function(){$("> ul",this).show();$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul);if(button.dropMenu){levels.push(i);$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu))}}});levels.pop();return ul}function magicMarkups(e){if(e){e=e.toString();e=e.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(e,t){var n=t.split("|!|");if(altKey===true){return n[1]!==undefined?n[1]:n[0]}else{return n[1]===undefined?"":n[0]}});e=e.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(e,t){var n=t.split(":!:");if(abort===true){return false}value=prompt(n[0],n[1]?n[1]:"");if(value===null){abort=true}return value});return e}return""}function prepare(e){if($.isFunction(e)){e=e(hash)}return magicMarkups(e)}function build(e){var t=prepare(clicked.openWith);var n=prepare(clicked.placeHolder);var i=prepare(clicked.replaceWith);var o=prepare(clicked.closeWith);var r=prepare(clicked.openBlockWith);var s=prepare(clicked.closeBlockWith);var a=clicked.multiline;if(i!==""){block=t+i+o}else if(selection===""&&n!==""){block=t+n+o}else{e=e||selection;var l=[e],u=[];if(a===true){l=e.split(/\r?\n/)}for(var c=0;c<l.length;c++){line=l[c];var f;if(f=line.match(/ *$/)){u.push(t+line.replace(/ *$/g,"")+o+f)}else{u.push(t+line+o)}}block=u.join("\n")}block=r+block+s;return{block:block,openBlockWith:r,openWith:t,replaceWith:i,placeHolder:n,closeWith:o,closeBlockWith:s}}function markup(e){var t,n,i,o;hash=clicked=e;get();$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey});prepare(options.beforeInsert);prepare(clicked.beforeInsert);if(ctrlKey===true&&shiftKey===true||e.multiline===true){prepare(clicked.beforeMultiInsert)}$.extend(hash,{line:1});if(ctrlKey===true&&shiftKey===true){lines=selection.split(/\r?\n/);for(n=0,i=lines.length,o=0;o<i;o++){if($.trim(lines[o])!==""){$.extend(hash,{line:++n,selection:lines[o]});lines[o]=build(lines[o]).block}else{lines[o]=""}}string={block:lines.join("\n")};start=caretPosition;t=string.block.length+(browser.opera?i-1:0)}else if(ctrlKey===true){string=build(selection);start=caretPosition+string.openWith.length;t=string.block.length-string.openWith.length-string.closeWith.length;t=t-(string.block.match(/ $/)?1:0);t-=fixIeBug(string.block)}else if(shiftKey===true){string=build(selection);start=caretPosition;t=string.block.length;t-=fixIeBug(string.block)}else{string=build(selection);start=caretPosition+string.block.length;t=0;start-=fixIeBug(string.block)}if(selection===""&&string.replaceWith===""){caretOffset+=fixOperaBug(string.block);start=caretPosition+string.openBlockWith.length+string.openWith.length;t=string.block.length-string.openBlockWith.length-string.openWith.length-string.closeWith.length-string.closeBlockWith.length;caretOffset=$$.val().substring(caretPosition,$$.val().length).length;caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))}$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition});if(string.block!==selection&&abort===false){insert(string.block);set(start,t)}else{caretOffset=-1}get();$.extend(hash,{line:"",selection:selection});if(ctrlKey===true&&shiftKey===true||e.multiline===true){prepare(clicked.afterMultiInsert)}prepare(clicked.afterInsert);prepare(options.afterInsert);if(previewWindow&&options.previewAutoRefresh){refreshPreview()}shiftKey=altKey=ctrlKey=abort=false}function fixOperaBug(e){if(browser.opera){return e.length-e.replace(/\n*/g,"").length}return 0}function fixIeBug(e){if(browser.msie){return e.length-e.replace(/\r*/g,"").length}return 0}function insert(e){if(document.selection){var t=document.selection.createRange();t.text=e}else{textarea.value=textarea.value.substring(0,caretPosition)+e+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}}function set(e,t){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&t==0){return false}range=textarea.createTextRange();range.collapse(true);range.moveStart("character",e);range.moveEnd("character",t);range.select()}else if(textarea.setSelectionRange){textarea.setSelectionRange(e,e+t)}textarea.scrollTop=scrollPosition;textarea.focus()}function get(){textarea.focus();scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if(browser.msie){var e=document.selection.createRange(),t=e.duplicate();t.moveToElementText(textarea);caretPosition=-1;while(t.inRange(e)){t.moveStart("character");caretPosition++}}else{caretPosition=textarea.selectionStart}}else{caretPosition=textarea.selectionStart;selection=textarea.value.substring(caretPosition,textarea.selectionEnd)}return selection}function preview(){if(typeof options.previewHandler==="function"){previewWindow=true}else if(options.previewInElement){previewWindow=$(options.previewInElement)}else if(!previewWindow||previewWindow.closed){if(options.previewInWindow){previewWindow=window.open("","preview",options.previewInWindow);$(window).unload(function(){previewWindow.close()})}else{iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>');if(options.previewPosition=="after"){iFrame.insertAfter(footer)}else{iFrame.insertBefore(header)}previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]}}else if(altKey===true){if(iFrame){iFrame.remove()}else{previewWindow.close()}previewWindow=iFrame=false}if(!options.previewAutoRefresh){refreshPreview()}if(options.previewInWindow){previewWindow.focus()}}function refreshPreview(){renderPreview()}function renderPreview(){var e;if(options.previewHandler&&typeof options.previewHandler==="function"){options.previewHandler($$.val())}else if(options.previewParser&&typeof options.previewParser==="function"){var t=options.previewParser($$.val());writeInPreview(localize(t,1))}else if(options.previewParserPath!==""){$.ajax({type:"POST",dataType:"text",global:false,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(e){writeInPreview(localize(e,1))}})}else{if(!template){$.ajax({url:options.previewTemplatePath,dataType:"text",global:false,success:function(e){writeInPreview(localize(e,1).replace(/<!-- content -->/g,$$.val()))}})}}return false}function writeInPreview(e){if(options.previewInElement){$(options.previewInElement).html(e)}else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(t){sp=0}previewWindow.document.open();previewWindow.document.write(e);previewWindow.document.close();previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){shiftKey=e.shiftKey;altKey=e.altKey;ctrlKey=!(e.altKey&&e.ctrlKey)?e.ctrlKey||e.metaKey:false;if(e.type==="keydown"){if(ctrlKey===true){li=$('a[accesskey="'+(e.keyCode==13?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li");if(li.length!==0){ctrlKey=false;setTimeout(function(){li.triggerHandler("mouseup")},1);return false}}if(e.keyCode===13||e.keyCode===10){if(ctrlKey===true){ctrlKey=false;markup(options.onCtrlEnter);return options.onCtrlEnter.keepDefault}else if(shiftKey===true){shiftKey=false;markup(options.onShiftEnter);return options.onShiftEnter.keepDefault}else{markup(options.onEnter);return options.onEnter.keepDefault}}if(e.keyCode===9){if(shiftKey==true||ctrlKey==true||altKey==true){return false}if(caretOffset!==-1){get();caretOffset=$$.val().length-caretOffset;set(caretOffset,0);caretOffset=-1;return false}else{markup(options.onTab);return options.onTab.keepDefault}}}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor");$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$);$$.data("markItUp",null)}init()})};$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})};$.markItUp=function(e){var t={target:false};$.extend(t,e);if(t.target){return $(t.target).each(function(){$(this).focus();$(this).trigger("insertion",[t])})}else{$("textarea").trigger("insertion",[t])}}}(jQuery);!function(e,t,n){var i="placeholder"in t.createElement("input");var o="placeholder"in t.createElement("textarea");var r=n.fn;var s=n.valHooks;var a=n.propHooks;var l;var u;if(i&&o){u=r.placeholder=function(){return this};u.input=u.textarea=true}else{u=r.placeholder=function(){var e=this;e.filter((i?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":f,"blur.placeholder":d}).data("placeholder-enabled",true).trigger("blur.placeholder");return e};u.input=i;u.textarea=o;l={get:function(e){var t=n(e);var i=t.data("placeholder-password");if(i){return i[0].value}return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,i){var o=n(e);var r=o.data("placeholder-password");if(r){return r[0].value=i}if(!o.data("placeholder-enabled")){return e.value=i}if(i==""){e.value=i;if(e!=t.activeElement){d.call(e)}}else if(o.hasClass("placeholder")){f.call(e,true,i)||(e.value=i)}else{e.value=i}return o}};if(!i){s.input=l;a.value=l}if(!o){s.textarea=l;a.value=l}n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(f);setTimeout(function(){e.each(d)},10)})});n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})})}function c(e){var t={};var i=/^jQuery\d+$/;n.each(e.attributes,function(e,n){if(n.specified&&!i.test(n.name)){t[n.name]=n.value}});return t}function f(e,i){var o=this;var r=n(o);if(o.value==r.attr("placeholder")&&r.hasClass("placeholder")){if(r.data("placeholder-password")){r=r.hide().next().show().attr("id",r.removeAttr("id").data("placeholder-id"));if(e===true){return r[0].value=i}r.focus()}else{o.value="";r.removeClass("placeholder");o==t.activeElement&&o.select()}}}function d(){var e;var t=this;var i=n(t);var o=this.id;if(t.value==""){if(t.type=="password"){if(!i.data("placeholder-textinput")){try{e=i.clone().attr({type:"text"})}catch(r){e=n("<input>").attr(n.extend(c(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":i,"placeholder-id":o}).bind("focus.placeholder",f);i.data({"placeholder-textinput":e,"placeholder-id":o}).before(e)}i=i.removeAttr("id").hide().prev().attr("id",o).show()}i.addClass("placeholder");i[0].value=i.attr("placeholder")}else{i.removeClass("placeholder")}}}(this,document,jQuery);!function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else{e(jQuery)}}(function(e){e.timeago=function(t){if(t instanceof Date){return r(t)}else if(typeof t==="string"){return r(e.timeago.parse(t))}else if(typeof t==="number"){return r(new Date(t))}else{return r(e.timeago.datetime(t))}};var t=e.timeago;e.extend(e.timeago,{settings:{refreshMillis:6e4,allowFuture:false,localeTitle:false,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(t){var n=this.settings.strings;var i=n.prefixAgo;var o=n.suffixAgo;if(this.settings.allowFuture){if(t<0){i=n.prefixFromNow;o=n.suffixFromNow}}var r=Math.abs(t)/1e3;var s=r/60;var a=s/60;var l=a/24;var u=l/365;function c(i,o){var r=e.isFunction(i)?i(o,t):i;var s=n.numbers&&n.numbers[o]||o;return r.replace(/%d/i,s)}var f=r<45&&c(n.seconds,Math.round(r))||r<90&&c(n.minute,1)||s<45&&c(n.minutes,Math.round(s))||s<90&&c(n.hour,1)||a<24&&c(n.hours,Math.round(a))||a<42&&c(n.day,1)||l<30&&c(n.days,Math.round(l))||l<45&&c(n.month,1)||l<365&&c(n.months,Math.round(l/30))||u<1.5&&c(n.year,1)||c(n.years,Math.round(u));var d=n.wordSeparator||"";if(n.wordSeparator===undefined){d=" "}return e.trim([i,f,o].join(d))},parse:function(t){var n=e.trim(t);n=n.replace(/\.\d+/,"");n=n.replace(/-/,"/").replace(/-/,"/");n=n.replace(/T/," ").replace(/Z/," UTC");n=n.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(n)},datetime:function(n){var i=t.isTime(n)?e(n).attr("datetime"):e(n).attr("title");return t.parse(i)},isTime:function(t){return e(t).get(0).tagName.toLowerCase()==="time"}});var n={init:function(){var n=e.proxy(i,this);n();var o=t.settings;if(o.refreshMillis>0){setInterval(n,o.refreshMillis)}},update:function(n){e(this).data("timeago",{datetime:t.parse(n)});i.apply(this)},updateFromDOM:function(){e(this).data("timeago",{datetime:t.parse(t.isTime(this)?e(this).attr("datetime"):e(this).attr("title"))});i.apply(this)}};e.fn.timeago=function(e,t){var i=e?n[e]:n.init;if(!i){throw new Error("Unknown function name '"+e+"' for timeago")}this.each(function(){i.call(this,t)});return this};function i(){var n=o(this);var i=t.settings;if(!isNaN(n.datetime)){if(i.cutoff==0||s(n.datetime)<i.cutoff){e(this).text(r(n.datetime))}}return this}function o(n){n=e(n);if(!n.data("timeago")){n.data("timeago",{datetime:t.datetime(n)});var i=e.trim(n.text());if(t.settings.localeTitle){n.attr("title",n.data("timeago").datetime.toLocaleString())}else if(i.length>0&&!(t.isTime(n)&&n.attr("title"))){n.attr("title",i)}}return n.data("timeago")}function r(e){return t.inWords(s(e))}function s(e){return(new Date).getTime()-e.getTime()}document.createElement("abbr");document.createElement("time")});!function(e){function t(e,t){return typeof e=="function"?e.call(t):e}function n(e){while(e=e.parentNode){if(e==document)return true}return false}function i(t,n){this.$element=e(t);this.options=n;this.enabled=true;this.fixTitle()}i.prototype={show:function(){var n=this.getTitle();if(n&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](n);i[0].className="tipsy";i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var o=e.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var r=i[0].offsetWidth,s=i[0].offsetHeight,a=t(this.options.gravity,this.$element[0]);var l;switch(a.charAt(0)){case"n":l={top:o.top+o.height+this.options.offset,left:o.left+o.width/2-r/2};break;case"s":l={top:o.top-s-this.options.offset,left:o.left+o.width/2-r/2};break;case"e":l={top:o.top+o.height/2-s/2,left:o.left-r-this.options.offset};break;case"w":l={top:o.top+o.height/2-s/2,left:o.left+o.width+this.options.offset};break}if(a.length==2){if(a.charAt(1)=="w"){l.left=o.left+o.width/2-15}else{l.left=o.left+o.width/2-r+15}}i.css(l).addClass("tipsy-"+a);i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+a.charAt(0);if(this.options.className){i.addClass(t(this.options.className,this.$element[0]))}if(this.options.fade){i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{i.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){e(this).remove()})}else{this.tip().remove()}},fixTitle:function(){var e=this.$element;if(e.attr("title")||typeof e.attr("original-title")!="string"){e.attr("original-title",e.attr("title")||"").removeAttr("title")}},getTitle:function(){var e,t=this.$element,n=this.options;this.fixTitle();var e,n=this.options;if(typeof n.title=="string"){e=t.attr(n.title=="title"?"original-title":n.title)}else if(typeof n.title=="function"){e=n.title.call(t[0])}e=(""+e).replace(/(^\s*|\s*$)/,"");return e||n.fallback},tip:function(){if(!this.$tip){this.$tip=e('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');this.$tip.data("tipsy-pointee",this.$element[0])}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};e.fn.tipsy=function(t){if(t===true){return this.data("tipsy")}else if(typeof t=="string"){var n=this.data("tipsy");if(n)n[t]();return this}t=e.extend({},e.fn.tipsy.defaults,t);function o(n){var o=e.data(n,"tipsy");if(!o){o=new i(n,e.fn.tipsy.elementOptions(n,t));e.data(n,"tipsy",o)}return o}function r(){var e=o(this);e.hoverState="in";if(t.delayIn==0){e.show()}else{e.fixTitle();setTimeout(function(){if(e.hoverState=="in")e.show()},t.delayIn)}}function s(){var e=o(this);e.hoverState="out";if(t.delayOut==0){e.hide()}else{setTimeout(function(){if(e.hoverState=="out")e.hide()},t.delayOut)}}if(!t.live)this.each(function(){o(this)});if(t.trigger!="manual"){var a=t.live?"live":"bind",l=t.trigger=="hover"?"mouseenter":"focus",u=t.trigger=="hover"?"mouseleave":"blur";this[a](l,r)[a](u,s)}return this};e.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:.8,title:"title",trigger:"hover"};e.fn.tipsy.revalidate=function(){e(".tipsy").each(function(){var t=e.data(this,"tipsy-pointee");if(!t||!n(t)){e(this).remove()}})};e.fn.tipsy.elementOptions=function(t,n){return e.metadata?e.extend({},n,e(t).metadata()):n};e.fn.tipsy.autoNS=function(){return e(this).offset().top>e(document).scrollTop()+e(window).height()/2?"s":"n"};e.fn.tipsy.autoWE=function(){return e(this).offset().left>e(document).scrollLeft()+e(window).width()/2?"e":"w"};e.fn.tipsy.autoBounds=function(t,n){return function(){var i={ns:n[0],ew:n.length>1?n[1]:false},o=e(document).scrollTop()+t,r=e(document).scrollLeft()+t,s=e(this);if(s.offset().top<o)i.ns="n";if(s.offset().left<r)i.ew="w";if(e(window).width()+e(document).scrollLeft()-s.offset().left<t)i.ew="e";if(e(window).height()+e(document).scrollTop()-s.offset().top<t)i.ns="s";return i.ns+(i.ew?i.ew:"")}}}(jQuery);!function(e,t,n){"use strict";var i={html:'<!DOCTYPE html><html><head><style>.ie * {min-height: auto !important}</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" value="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" value="http://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'},o=function(t,n,o){var r=i[t];return e.each(n,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","g"),t)}),o&&(r=e(r)),r};e.sceditor=function(i,r){var s,a,l,u,c,f,d,p,h,m,g,v,y,b,x,w,k,T,C,S,_,E,M,D,O,N,L,P,H,A,I,R,F,B,W,j,$,z,q,U,X,V,K,Q,Y,J,G,Z,et,tt,nt,it,ot,rt,st=this,at=i.get?i.get(0):i,lt=e(at),ut=[],ct=[],ft=[],dt=[],pt={},ht=[];st.commands=e.extend(!0,{},r.commands||e.sceditor.commands),st.opts=r=e.extend({},e.sceditor.defaultOptions,r),_=function(){lt.data("sceditor",st),e.each(r,function(t,n){e.isPlainObject(n)&&(r[t]=e.extend(!0,{},n))}),r.locale&&"en"!==r.locale&&L(),s=e('<div class="sceditor-container" />').insertAfter(lt).css("z-index",r.zIndex),e.sceditor.ie&&s.addClass("ie ie"+e.sceditor.ie),C=!!lt.attr("required"),lt.removeAttr("required"),N(),F(),P(),O(),I(),H(),A(),e.sceditor.isWysiwygSupported||st.toggleSourceMode();var i=function(){e(t).unbind("load",i),r.autofocus&&nt(),r.autoExpand&&st.expandToContent(),Q()};e(t).load(i),n.readyState&&"complete"===n.readyState&&i(),J(),b.call("ready")},N=function(){var t=r.plugins;t=t?t.toString().split(","):[],b=new e.sceditor.PluginManager(st),e.each(t,function(t,n){b.register(e.trim(n))})},L=function(){var t;e.sceditor.locale[r.locale]?g=e.sceditor.locale[r.locale]:(t=r.locale.split("-"),e.sceditor.locale[t[0]]&&(g=e.sceditor.locale[t[0]])),g&&g.dateFormat&&(r.dateFormat=g.dateFormat)},O=function(){var n,i;d=e("<textarea></textarea>").hide(),l=e('<iframe frameborder="0"></iframe>'),r.spellcheck||d.attr("spellcheck","false"),"https:"===t.location.protocol&&l.attr("src","javascript:false"),s.append(l).append(d),u=l[0],p=d[0],st.width(r.width||lt.width()),st.height(r.height||lt.height()),n=B(),n.open(),n.write(o("html",{spellcheck:r.spellcheck?"":'spellcheck="false"',charset:r.charset,style:r.style})),n.close(),f=e(n),c=e(n.body),st.readOnly(!!r.readOnly),e.sceditor.ie&&f.find("html").addClass("ie ie"+e.sceditor.ie),(e.sceditor.ios||e.sceditor.ie)&&(c.height("100%"),e.sceditor.ie||c.bind("touchend",st.focus)),v=new e.sceditor.rangeHelper(u.contentWindow),st.val(lt.hide().val()),i=lt.attr("tabindex"),d.attr("tabindex",i),l.attr("tabindex",i)},H=function(){r.autoUpdate&&(c.bind("blur",st.updateOriginal),d.bind("blur",st.updateOriginal)),null===r.rtl&&(r.rtl="rtl"===d.css("direction")),st.rtl(!!r.rtl),r.autoExpand&&f.bind("keyup",st.expandToContent),r.resizeEnabled&&R(),s.attr("id",r.id),st.emoticons(r.emoticonsEnabled)},A=function(){e(n).click(K),e(at.form).bind("reset",U).submit(st.updateOriginal),e(t).bind("resize orientationChanged",Q),c.keypress(q).keydown($).keydown(z).keyup(Z).bind("paste",W).bind(e.sceditor.ie?"selectionchange":"keyup focus blur contextmenu mouseup touchend click",et).bind("keydown keyup keypress focus blur contextmenu",V),r.emoticonsCompat&&t.getSelection&&c.keyup(ot),d.bind("keydown keyup keypress focus blur contextmenu",V).keydown($),f.keypress(q).mousedown(X).bind(e.sceditor.ie?"selectionchange":"focus blur contextmenu mouseup click",et).bind("beforedeactivate keyup",D).keyup(Z).focus(function(){m=null}),s.bind("selectionchanged",tt).bind("selectionchanged",J).bind("selectionchanged",V).bind("nodechanged",V)},P=function(){var t,n,i=(r.toolbarExclude||"").split(","),l=r.toolbar.split("|");a=e('<div class="sceditor-toolbar" unselectable="on" />'),e.each(l,function(r,s){t=e('<div class="sceditor-group" />'),e.each(s.split(","),function(r,s){!st.commands[s]||e.inArray(s,i)>-1||(n=o("toolbarButton",{name:s,dispName:st._(st.commands[s].tooltip||s)},!0),n.data("sceditor-txtmode",!!st.commands[s].txtExec),n.data("sceditor-wysiwygmode",!!st.commands[s].exec),n.click(function(){var t=e(this);return t.hasClass("disabled")||M(t,st.commands[s]),J(),!1}),st.commands[s].tooltip&&n.attr("title",st._(st.commands[s].tooltip)),st.commands[s].exec||n.addClass("disabled"),st.commands[s].shortcut&&st.addShortcut(st.commands[s].shortcut,s),t.append(n))}),t[0].firstChild&&a.append(t)}),e(r.toolbarContainer||s).append(a)},I=function(){e.each(st.commands,function(t,n){n.keyPress&&ut.push(n.keyPress),n.forceNewLineAfter&&e.isArray(n.forceNewLineAfter)&&(ft=e.merge(ft,n.forceNewLineAfter)),n.state?dt.push({name:t,state:n.state}):"string"==typeof n.exec&&dt.push({name:t,state:n.exec})}),Z()},R=function(){var i,o,a,l,u,c,f=e('<div class="sceditor-grip" />'),d=e('<div class="sceditor-resize-cover" />'),p=0,h=0,m=0,g=0,v=s.width(),y=s.height(),b=!1,x=st.rtl();i=r.resizeMinHeight||y/1.5,o=r.resizeMaxHeight||2.5*y,a=r.resizeMinWidth||v/1.25,l=r.resizeMaxWidth||1.25*v,u=function(n){"touchmove"===n.type&&(n=t.event);var u=g+(n.pageY-h),c=x?m-(n.pageX-p):m+(n.pageX-p);l>0&&c>l&&(c=l),o>0&&u>o&&(u=o),(!r.resizeWidth||a>c||l>0&&c>l)&&(c=!1),(!r.resizeHeight||i>u||o>0&&u>o)&&(u=!1),(c||u)&&(st.dimensions(c,u),e.sceditor.ie<7&&s.height(u)),n.preventDefault()},c=function(t){b&&(b=!1,d.hide(),s.removeClass("resizing").height("auto"),e(n).unbind("touchmove mousemove",u),e(n).unbind("touchend mouseup",c),t.preventDefault())},s.append(f),s.append(d.hide()),f.bind("touchstart mousedown",function(i){"touchstart"===i.type&&(i=t.event),p=i.pageX,h=i.pageY,m=s.width(),g=s.height(),b=!0,s.addClass("resizing"),d.show(),e(n).bind("touchmove mousemove",u),e(n).bind("touchend mouseup",c),e.sceditor.ie<7&&s.height(g),i.preventDefault()
})},F=function(){var t,i=r.emoticons,o=r.emoticonsRoot;e.isPlainObject(i)&&r.emoticonsEnabled&&e.each(i,function(r,s){e.each(s,function(e,s){o&&(s={url:o+(s.url||s),tooltip:s.tooltip||e},i[r][e]=s),t=n.createElement("img"),t.src=s.url||s,ct.push(t)})})},nt=function(){var t,n,i,o=f[0],a=c[0],l=!!r.autofocusEnd;if(s.is(":visible")){if(st.sourceMode())i=p.value.length,p.setSelectionRange?p.setSelectionRange(i,i):p.createTextRange&&(t=p.createTextRange(),t.moveEnd("character",i),t.moveStart("character",i),v.selectRange(t));else{if(e.sceditor.dom.removeWhiteSpace(a),l)for((n=a.lastChild)||c.append(n=o.createElement("div"));n.lastChild;)n=n.lastChild,/br/i.test(n.nodeName)&&n.previousSibling&&(n=n.previousSibling);else n=a.firstChild;o.createRange?(t=o.createRange(),/br/i.test(n.nodeName)?t.setStartBefore(n):t.selectNodeContents(n),t.collapse(!1)):(t=a.createTextRange(),t.moveToElementText(3!==n.nodeType?n:n.parentNode),t.collapse(!1)),v.selectRange(t),l&&(f.scrollTop(a.scrollHeight),c.scrollTop(a.scrollHeight))}st.focus()}},st.readOnly=function(e){return"boolean"!=typeof e?"readonly"===d.attr("readonly"):(c[0].contentEditable=!e,e?d.attr("readonly","readonly"):d.removeAttr("readonly"),Y(e),this)},st.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===d.attr("dir"):(c.attr("dir",t),d.attr("dir",t),s.removeClass("rtl").removeClass("ltr").addClass(t),this)},Y=function(t){var n=st.inSourceMode();a.find(".sceditor-button").removeClass("disabled").each(function(){var i=e(this);t===!0||n&&!i.data("sceditor-txtmode")?i.addClass("disabled"):n||i.data("sceditor-wysiwygmode")||i.addClass("disabled")})},st.width=function(e,t){return e||0===e?(st.dimensions(e,null,t),this):s.width()},st.dimensions=function(t,i,o){var u=e.sceditor.ie<8||n.documentMode<8?2:0;return t=t||0===t?t:!1,i=i||0===i?i:!1,t===!1&&i===!1?{width:st.width(),height:st.height()}:("undefined"==typeof l.data("outerWidthOffset")&&st.updateStyleCache(),t!==!1&&(o!==!1&&(r.width=t),i===!1&&(i=s.height(),o=!1),s.width(t),t&&t.toString().indexOf("%")>-1&&(t=s.width()),l.width(t-l.data("outerWidthOffset")),d.width(t-d.data("outerWidthOffset")),e.sceditor.ios&&c&&c.width(t-l.data("outerWidthOffset")-(c.outerWidth(!0)-c.width()))),i!==!1&&(o!==!1&&(r.height=i),i&&i.toString().indexOf("%")>-1&&(i=s.height(i).height(),s.height("auto")),i-=r.toolbarContainer?0:a.outerHeight(!0),l.height(i-l.data("outerHeightOffset")),d.height(i-u-d.data("outerHeightOffset"))),this)},st.updateStyleCache=function(){l.data("outerWidthOffset",l.outerWidth(!0)-l.width()),d.data("outerWidthOffset",d.outerWidth(!0)-d.width()),l.data("outerHeightOffset",l.outerHeight(!0)-l.height()),d.data("outerHeightOffset",d.outerHeight(!0)-d.height())},st.height=function(e,t){return e||0===e?(st.dimensions(null,e,t),this):s.height()},st.maximize=function(t){return"undefined"==typeof t?s.is(".sceditor-maximize"):(t=!!t,e.sceditor.ie<7&&e("html, body").toggleClass("sceditor-maximize",t),s.toggleClass("sceditor-maximize",t),st.width(t?"100%":r.width,!1),st.height(t?"100%":r.height,!1),this)},st.expandToContent=function(e){var t=s.height(),n=c[0].scrollHeight||f[0].documentElement.scrollHeight,i=t-l.height(),o=r.resizeMaxHeight||2*(r.height||lt.height());n+=i,e!==!0&&n>o&&(n=o),n>t&&st.height(n)},st.destroy=function(){b.destroy(),v=null,m=null,b=null,e(n).unbind("click",K),e(t).unbind("resize orientationChanged",Q),e(at.form).unbind("reset",U).unbind("submit",st.updateOriginal),c.unbind(),f.unbind().find("*").remove(),d.unbind().remove(),a.remove(),s.unbind().find("*").unbind().remove(),s.remove(),lt.removeData("sceditor").removeData("sceditorbbcode").show(),C&&lt.attr("required","required")},st.createDropDown=function(t,n,i,o){var s,a=h&&h.is(".sceditor-"+n);st.closeDropDown(),a||(o!==!1&&e(i).find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"),s={top:t.offset().top,left:t.offset().left,marginTop:t.outerHeight()},e.extend(s,r.dropDownCss),h=e('<div class="sceditor-dropdown sceditor-'+n+'" />').css(s).append(i).appendTo(e("body")).click(function(e){e.stopPropagation()}))},K=function(e){3!==e.which&&st.closeDropDown()},W=function(e){var t,i,o=c[0],s=f[0],a=0,l=n.createElement("div"),u=s.createDocumentFragment();if(r.disablePasting)return!1;if(r.enablePasteFiltering){if(v.saveRange(),n.body.appendChild(l),e&&e.clipboardData&&e.clipboardData.getData&&((t=e.clipboardData.getData("text/html"))||(t=e.clipboardData.getData("text/plain"))))return l.innerHTML=t,j(o,l),!1;for(;o.firstChild;)u.appendChild(o.firstChild);return i=function(e,t){if(e.childNodes.length>0){for(;e.firstChild;)t.appendChild(e.firstChild);for(;u.firstChild;)e.appendChild(u.firstChild);j(e,t)}else{if(a>25){for(;u.firstChild;)e.appendChild(u.firstChild);return v.restoreRange(),void 0}++a,setTimeout(function(){i(e,t)},20)}},i(o,l),st.focus(),!0}},j=function(t,n){e.sceditor.dom.fixNesting(n);var i=n.innerHTML;b.hasHandler("toSource")&&(i=b.callOnlyFirst("toSource",i,e(n))),n.parentNode.removeChild(n),b.hasHandler("toWysiwyg")&&(i=b.callOnlyFirst("toWysiwyg",i,!0)),v.restoreRange(),st.wysiwygEditorInsertHtml(i,null,!0)},st.closeDropDown=function(e){h&&(h.unbind().remove(),h=null),e===!0&&st.focus()},B=function(){return u.contentDocument?u.contentDocument:u.contentWindow&&u.contentWindow.document?u.contentWindow.document:u.document?u.document:null},st.wysiwygEditorInsertHtml=function(t,n,i){var o,r,s='<span id="sceditor-cursor">&nbsp;</span>';st.focus(),(i||!e(w).is("code")&&0===e(w).parents("code").length)&&(n?n+=s:t+=s,v.insertHTML(t,n),r=c.find("#sceditor-cursor"),o=r.offset().top+2*r.outerHeight(!0)-l.height(),r.remove(),f.scrollTop(o),c.scrollTop(o),v.saveRange(),E(c[0]),v.restoreRange(),Z())},st.wysiwygEditorInsertText=function(t,n){st.wysiwygEditorInsertHtml(e.sceditor.escapeEntities(t),e.sceditor.escapeEntities(n))},st.insertText=function(e,t){return st.inSourceMode()?st.sourceEditorInsertText(e,t):st.wysiwygEditorInsertText(e,t),this},st.sourceEditorInsertText=function(e,t){var i,o,r,s,a;a=p.scrollTop,p.focus(),"undefined"!=typeof p.selectionStart?(o=p.selectionStart,r=p.selectionEnd,s=e.length,t&&(e+=p.value.substring(o,r)+t),p.value=p.value.substring(0,o)+e+p.value.substring(r,p.value.length),p.selectionStart=o+e.length-(t?t.length:0),p.selectionEnd=p.selectionStart):"undefined"!=typeof n.selection.createRange?(i=n.selection.createRange(),t&&(e+=i.text+t),i.text=e,t&&i.moveEnd("character",0-t.length),i.moveStart("character",i.End-i.Start),i.select()):p.value+=e+t,p.scrollTop=a,p.focus()},st.getRangeHelper=function(){return v},st.val=function(e,t){return"string"==typeof e?(st.inSourceMode()?st.setSourceEditorValue(e):(t!==!1&&b.hasHandler("toWysiwyg")&&(e=b.callOnlyFirst("toWysiwyg",e)),st.setWysiwygEditorValue(e)),this):st.inSourceMode()?st.getSourceEditorValue(!1):st.getWysiwygEditorValue()},st.insert=function(t,n,i,o,r){if(st.inSourceMode())st.sourceEditorInsertText(t,n);else{if(n){var s=st.getRangeHelper().selectedHtml(),a=e("<div>").appendTo(e("body")).hide().html(s);i!==!1&&b.hasHandler("toSource")&&(s=b.callOnlyFirst("toSource",s,a)),a.remove(),t+=s+n}i!==!1&&b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t,!0)),i!==!1&&r===!0&&(t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),st.wysiwygEditorInsertHtml(t)}return this},st.getWysiwygEditorValue=function(t){var n,i,o=v.hasSelection();return o?v.saveRange():m&&m.getBookmark&&(i=m.getBookmark()),e.sceditor.dom.fixNesting(c[0]),n=c.html(),t!==!1&&b.hasHandler("toSource")&&(n=b.callOnlyFirst("toSource",n,c)),o?(v.restoreRange(),m=null):i&&(m.moveToBookmark(i),m=null),n},st.getBody=function(){return c},st.getContentAreaContainer=function(){return l},st.getSourceEditorValue=function(e){var t=d.val();return e!==!1&&b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t)),t},st.setWysiwygEditorValue=function(t){t||(t="<p>"+(e.sceditor.ie?"":"<br />")+"</p>"),c[0].innerHTML=t,E(c[0]),Z()},st.setSourceEditorValue=function(e){d.val(e)},st.updateOriginal=function(){lt.val(st.val())},E=function(t){if(r.emoticonsEnabled&&!e(t).parents("code").length){var n=t.ownerDocument,i=[],s=[],a=e.extend({},r.emoticons.more,r.emoticons.dropdown,r.emoticons.hidden);e.each(a,function(t){r.emoticonsCompat&&(s[t]=new RegExp("(>|^|\\s| | | | |&nbsp;)"+e.sceditor.regexEscape(t)+"(\\s|$|<| | | | |&nbsp;)")),i.push(t)}),function l(t){for(t=t.firstChild;null!=t;){var u,c,f,d,p,h,m,g=t.parentNode,v=t.nodeValue;if(3!==t.nodeType)e(t).is("code")||l(t);else if(v)for(p=i.length;p--;)c=i[p],m=r.emoticonsCompat?v.search(s[c]):v.indexOf(c),m>-1&&(h=t.nextSibling,f=a[c],u=v.substr(m).split(c),v=v.substr(0,m)+u.shift(),t.nodeValue=v,d=e.sceditor.dom.parseHTML(o("emoticon",{key:c,url:f.url||f,tooltip:f.tooltip||c}),n),g.insertBefore(d[0],h),g.insertBefore(n.createTextNode(u.join(c)),h));t=t.nextSibling}}(t),r.emoticonsCompat&&(ht=c.find("img[data-sceditor-emoticon]"))}},st.inSourceMode=function(){return s.hasClass("sourceMode")},st.sourceMode=function(e){return"boolean"!=typeof e?st.inSourceMode():((st.inSourceMode()&&!e||!st.inSourceMode()&&e)&&st.toggleSourceMode(),this)},st.toggleSourceMode=function(){(e.sceditor.isWysiwygSupported||!st.inSourceMode())&&(st.blur(),st.inSourceMode()?st.setWysiwygEditorValue(st.getSourceEditorValue()):st.setSourceEditorValue(st.getWysiwygEditorValue()),m=null,d.toggle(),l.toggle(),st.inSourceMode()?s.removeClass("sourceMode").addClass("wysiwygMode"):s.removeClass("wysiwygMode").addClass("sourceMode"),Y(),J())},G=function(){return p.focus(),null!=p.selectionStart?p.value.substring(p.selectionStart,p.selectionEnd):n.selection.createRange?n.selection.createRange().text:void 0},M=function(t,n){return st.inSourceMode()?(n.txtExec&&(e.isArray(n.txtExec)?st.sourceEditorInsertText.apply(st,n.txtExec):n.txtExec.call(st,t,G())),void 0):(n.exec&&(e.isFunction(n.exec)?n.exec.call(st,t):st.execCommand(n.exec,n.hasOwnProperty("execParam")?n.execParam:null)),void 0)},D=function(){e.sceditor.ie&&(m=v.selectedRange())},st.execCommand=function(t,n){var i=!1,o=e(v.parentNode());if(st.focus(),!o.is("code")&&0===o.parents("code").length){try{i=f[0].execCommand(t,!1,n)}catch(r){}!i&&st.commands[t]&&st.commands[t].errorMessage&&alert(st._(st.commands[t].errorMessage))}},et=function(){var t=function(){v&&!v.compare(k)&&(k=v.cloneSelected(),s.trigger(e.Event("selectionchanged"))),T=!1};T||(T=!0,e.sceditor.ie?t():setTimeout(t,100))},tt=function(){var t,n=v.parentNode();x!==n&&(t=x,x=n,w=v.getFirstBlockParent(n),s.trigger(e.Event("nodechanged",{oldNode:t,newNode:x})))},st.currentNode=function(){return x},st.currentBlockNode=function(){return w},J=function(e){var t,n,i,o,r,s=f[0],l=dt.length,u=st.sourceMode();if(st.sourceMode()||st.readOnly())a.find(".sceditor-button").removeClass("active");else for(r=e?e.newNode:v.parentNode(),i=v.getFirstBlockParent(r);l--;)if(t=0,n=dt[l],o=a.find(".sceditor-button-"+n.name),u&&!o.data("sceditor-txtmode"))o.addClass("disabled");else if(u||o.data("sceditor-wysiwygmode")){if("string"==typeof n.state)try{t=s.queryCommandEnabled(n.state)?0:-1,t>-1&&(t=s.queryCommandState(n.state)?1:0)}catch(c){}else t=n.state.call(st,r,i);0>t?o.addClass("disabled"):o.removeClass("disabled"),t>0?o.addClass("active"):o.removeClass("active")}else o.addClass("disabled")},q=function(t){var n,i=ut.length;if(st.closeDropDown(),n=e(x),13===t.which&&(n.is("code,blockquote,pre")||0!==n.parents("code,blockquote,pre").length))return m=null,st.wysiwygEditorInsertHtml("<br />",null,!0),!1;if(!n.is("code")&&0===n.parents("code").length)for(;i--;)ut[i].call(st,t,u,d)},Z=function(){var t,n,i;e.sceditor.dom.rTraverse(c[0],function(o){return t=o.nodeName.toLowerCase(),e.inArray(t,ft)>-1&&(n=!0),3===o.nodeType&&!/^\s*$/.test(o.nodeValue)||"br"===t||e.sceditor.ie&&!o.firstChild&&!e.sceditor.dom.isInline(o,!1)?(n&&(i=c[0].ownerDocument.createElement("div"),i.className="sceditor-nlf",i.innerHTML=e.sceditor.ie?"":"<br />",c[0].appendChild(i)),!1):void 0})},U=function(){st.val(lt.val())},X=function(){st.closeDropDown(),m=null},Q=function(){var e=r.height,t=r.width;st.maximize()?st.dimensions("100%","100%",!1):(e&&e.toString().indexOf("%")>-1&&st.height(e),t&&t.toString().indexOf("%")>-1&&st.width(t))},st._=function(){var e=arguments;return g&&g[e[0]]&&(e[0]=g[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n-0+1]?e[n-0+1]:"{"+n+"}"})},V=function(t){var n,i=e.extend({},t);b.call(i.type+"Event",t,st),delete i.type,n=e.Event((t.target===p?"scesrc":"scewys")+t.type,i),s.trigger.apply(s,[n,st]),n.isDefaultPrevented()&&t.preventDefault(),n.isImmediatePropagationStopped()&&n.stopImmediatePropagation(),n.isPropagationStopped()&&n.stopPropagation()},st.bind=function(t,n,i,o){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(i||s.bind("scewys"+t[r],n),o||s.bind("scesrc"+t[r],n));return this},st.unbind=function(t,n,i,o){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(i||s.unbind("scewys"+t[r],n),o||s.unbind("scesrc"+t[r],n));return this},st.blur=function(t,n,i){return e.isFunction(t)?st.bind("blur",t,n,i):st.sourceMode()?d.blur():(y||(y=e('<input style="position:absolute;width:0;height:0;opacity:0;border:0;padding:0;filter:alpha(opacity=0)" type="text" />').appendTo(s)),y.removeAttr("disabled").show().focus().blur().hide().attr("disabled","disabled")),this},st.focus=function(t,n,i){return e.isFunction(t)?st.bind("focus",t,n,i):st.inSourceMode()?p.focus():(u.contentWindow.focus(),c[0].focus(),m&&(v.selectRange(m),m=null)),this},st.keyDown=function(e,t,n){return st.bind("keydown",e,t,n)},st.keyPress=function(e,t,n){return st.bind("keypress",e,t,n)},st.keyUp=function(e,t,n){return st.bind("keyup",e,t,n)},st.nodeChanged=function(e){return st.bind("nodechanged",e,!1,!0)},st.selectionChanged=function(e){return st.bind("selectionchanged",e,!1,!0)},it=function(t){var n=0,i=String.fromCharCode(t.which);if(!e(w).is("code")&&!e(w).parents("code").length)return st.emoticonsCache||(st.emoticonsCache=[],e.each(e.extend({},r.emoticons.more,r.emoticons.dropdown,r.emoticons.hidden),function(e,t){st.emoticonsCache[n++]=[e,o("emoticon",{key:e,url:t.url||t,tooltip:t.tooltip||e})]}),st.emoticonsCache.sort(function(e,t){return e[0].length-t[0].length}),st.longestEmoticonCode=st.emoticonsCache[st.emoticonsCache.length-1][0].length),st.getRangeHelper().raplaceKeyword(st.emoticonsCache,!0,!0,st.longestEmoticonCode,r.emoticonsCompat,i)?(r.emoticonsCompat&&(ht=c.find("img[data-sceditor-emoticon]")),/^\s$/.test(i)&&r.emoticonsCompat):void 0},ot=function(){if(ht.length){var t,n,i,o,r,s,a=st.currentBlockNode(),l=!1,u=/[^\s\xA0\u2002\u2003\u2009]+/;ht=e.map(ht,function(c){return c&&c.parentNode?e.contains(a,c)?(t=c.previousSibling,n=c.nextSibling,r=t.nodeValue,null===r&&(r=t.innerText||""),t&&u.test(t.nodeValue.slice(-1))||n&&u.test((n.nodeValue||"")[0])?(i=c.parentNode,o=v.cloneSelected(),s=o.startContainer,r+=e(c).data("sceditor-emoticon"),s===n?l=r.length+o.startOffset:s===a&&a.childNodes[o.startOffset]===n?l=r.length:s===t&&(l=o.startOffset),n&&3===n.nodeType||(n=i.insertBefore(i.ownerDocument.createTextNode(""),n)),n.insertData(0,r),i.removeChild(t),i.removeChild(c),l!==!1&&(o.setStart(n,l),o.collapse(!0),v.selectRange(o)),null):c):c:null})}},st.emoticons=function(t){return t||t===!1?(r.emoticonsEnabled=t,t?(c.keypress(it),st.sourceMode()||(v.saveRange(),E(c[0]),ht=c.find("img[data-sceditor-emoticon]"),v.restoreRange())):(c.find("img[data-sceditor-emoticon]").replaceWith(function(){return e(this).data("sceditor-emoticon")}),ht=[],c.unbind("keypress",it)),this):r.emoticonsEnabled},st.css=function(t){return S||(S=e('<style id="#inline" />').appendTo(f.find("head"))[0]),"string"!=typeof t?S.styleSheet?S.styleSheet.cssText:S.innerHTML:(S.styleSheet?S.styleSheet.cssText=t:S.innerHTML=t,this)},$=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,s=i[r]||String.fromCharCode(r).toLowerCase();return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?s=o[r]:n[s]&&(s=n[s])),s&&(16>r||r>18)&&t.push(s),t=t.join("+"),pt[t]?pt[t].call(st):void 0},st.addShortcut=function(e,t){return e=e.toLowerCase(),pt[e]="string"==typeof t?function(){return M(a.find(".sceditor-button-"+t),st.commands[t]),!1}:t,this},st.removeShortcut=function(e){return delete pt[e.toLowerCase()],this},z=function(n){var i,o,s,a,l;if(!e.sceditor.ie&&!r.disableBlockRemove&&8===n.which&&(a=v.selectedRange())&&(t.getSelection?(i=a.startContainer,o=a.startOffset):(i=a.parentElement(),s=f[0].selection.createRange(),s.moveToElementText(i),s.setEndPoint("EndToStart",a),o=s.text.length),0===o&&(l=rt()))){for(;i!==l;){for(;i.previousSibling;)if(i=i.previousSibling,3!==i.nodeType||i.nodeValue)return;if(!(i=i.parentNode))return}if(l&&!e(l).is("body"))return st.clearBlockFormatting(l),!1}},rt=function(){for(var t=w;!e.sceditor.dom.hasStyling(t);)if(!(t=t.parentNode)||e(t).is("body"))return;return t},st.clearBlockFormatting=function(t){return t=t||rt(),!t||e(t).is("body")?this:(v.saveRange(),m=null,t.className="",e(t).attr("style",""),e(t).is("p,div")||e.sceditor.dom.convertElement(t,"p"),v.restoreRange(),this)},_()},e.sceditor.ie=function(){var e,i=3,o=n.createElement("div"),r=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->";while(r[0]);return n.documentMode&&n.all&&t.atob&&(i=10),4===i&&n.documentMode&&(i=11),i>4?i:e}(),e.sceditor.ios=/iPhone|iPod|iPad| wosbrowser\//i.test(navigator.userAgent),e.sceditor.isWysiwygSupported=function(){var t,n,i=e('<div contenteditable="true">')[0].contentEditable,o="undefined"!=typeof i&&"inherit"!==i,r=navigator.userAgent;return o?(n=/Opera Mobi|Opera Mini/i.test(r),/Android/i.test(r)&&(n=!0,/Safari/.test(r)&&(t=/Safari\/(\d+)/.exec(r),n=t&&t[1]?t[1]<534:!0)),/ Silk\//i.test(r)&&(t=/AppleWebKit\/(\d+)/.exec(r),n=t&&t[1]?t[1]<534:!0),e.sceditor.ios&&(n=!/OS [5-9](_\d)+ like Mac OS X/i.test(r)),/fennec/i.test(r)&&(n=!1),/OneBrowser/i.test(r)&&(n=!1),"UCWEB"===navigator.vendor&&(n=!1),!n):!1}(),e.sceditor.regexEscape=function(e){return e.replace(/[\$\?\[\]\.\*\(\)\|\\]/g,"\\$&")},e.sceditor.escapeEntities=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />"):e},e.sceditor.locale={},e.sceditor.commands={bold:{exec:"bold",tooltip:"Bold",shortcut:"ctrl+b"},italic:{exec:"italic",tooltip:"Italic",shortcut:"ctrl+i"},underline:{exec:"underline",tooltip:"Underline",shortcut:"ctrl+u"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,n,i){for(var r=t.opts.fonts.split(","),s=e("<div />"),a=function(){return i(e(this).data("font")),t.closeDropDown(!0),!1},l=0;l<r.length;l++)s.append(o("fontOpt",{font:r[l]},!0).click(a));t.createDropDown(n,"font-picker",s)},exec:function(t){var n=this;e.sceditor.command.get("font")._dropDown(n,t,function(e){n.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,n,i){for(var r=e("<div />"),s=function(n){i(e(this).data("size")),t.closeDropDown(!0),n.preventDefault()},a=1;7>=a;a++)r.append(o("sizeOpt",{size:a},!0).click(s));t.createDropDown(n,"fontsize-picker",r)},exec:function(t){var n=this;e.sceditor.command.get("size")._dropDown(n,t,function(e){n.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,n,i){var o,r,s,a,l={r:255,g:255,b:255},u=e("<div />"),c=t.opts.colors?t.opts.colors.split("|"):new Array(21),f=[],d=e.sceditor.command.get("color");if(!d._htmlCache){for(o=0;o<c.length;++o){for(a=c[o]?c[o].split(","):new Array(21),f.push('<div class="sceditor-color-column">'),r=0;r<a.length;++r)s=a[r]||"#"+l.r.toString(16)+l.g.toString(16)+l.b.toString(16),f.push('<a href="#" class="sceditor-color-option" style="background-color: '+s+'" data-color="'+s+'"></a>'),0===r%5?(l.g-=51,l.b=255):l.b-=51;f.push("</div>"),0===o%5?(l.r-=51,l.g=255,l.b=255):(l.g=255,l.b=255)}d._htmlCache=f.join("")}u.append(d._htmlCache).find("a").click(function(n){i(e(this).attr("data-color")),t.closeDropDown(!0),n.preventDefault()}),t.createDropDown(n,"color-picker",u)},exec:function(t){var n=this;e.sceditor.command.get("color")._dropDown(n,t,function(e){n.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=this,i=o("pastetext",{label:n._("Paste your text inside the following box:"),insert:n._("Insert")},!0);i.find(".button").click(function(e){t=i.find("#txt").val(),t&&n.wysiwygEditorInsertText(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"pastetext",i)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},table:{exec:function(t){var n=this,i=o("table",{rows:n._("Rows:"),cols:n._("Cols:"),insert:n._("Insert")},!0);i.find(".button").click(function(t){var o=i.find("#rows").val()-0,r=i.find("#cols").val()-0,s="<table>";if(!(1>o||1>r)){for(var a=0;o>a;a++){s+="<tr>";for(var l=0;r>l;l++)s+="<td>"+(e.sceditor.ie?"":"<br />")+"</td>";s+="</tr>"}s+="</table>",n.wysiwygEditorInsertHtml(s),n.closeDropDown(!0),t.preventDefault()}}),n.createDropDown(t,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(e){var t=this,n=o("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#image").val(),o=n.find("#width").val(),r=n.find("#height").val(),s="";o&&(s+=' width="'+o+'"'),r&&(s+=' height="'+r+'"'),i&&"http://"!==i&&t.wysiwygEditorInsertHtml("<img"+s+' src="'+i+'" />'),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",n)},tooltip:"Insert an image"},email:{exec:function(e){var t=this,n=o("email",{label:t._("E-mail:"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#email").val();i&&(t.focus(),t.getRangeHelper().selectedHtml()?t.execCommand("createlink","mailto:"+i):t.wysiwygEditorInsertHtml('<a href="mailto:'+i+'">'+i+"</a>")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertemail",n)},tooltip:"Insert an email"},link:{exec:function(e){var t=this,n=o("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#link").val(),o=n.find("#des").val();i&&"http://"!==i&&(t.focus(),!t.getRangeHelper().selectedHtml()||o?(o||(o=i),t.wysiwygEditorInsertHtml('<a href="'+i+'">'+o+"</a>")):t.execCommand("createlink",i)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertlink",n)},tooltip:"Insert a link"},unlink:{state:function(){var t=e(this.currentNode());return t.is("a")||t.parents("a").length>0?0:-1},exec:function(){var t=e(this.currentNode()),n=t.is("a")?t:t.parents("a").first();n.length&&n.replaceWith(n.contents())},tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(t,n,i){var o="<blockquote>",r="</blockquote>";n?(i=i?"<cite>"+i+"</cite>":"",o=o+i+n+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r=e.sceditor.ie?"":"<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(t){var n=this,i=function(o){var r=n.opts.emoticonsCompat,s=n.getRangeHelper(),a=r&&" "!==s.getOuterText(!0,1)?" ":"",l=r&&" "!==s.getOuterText(!1,1)?" ":"",u=e("<div />"),c=e("<div />").appendTo(u),f=e.extend({},n.opts.emoticons.dropdown,o?n.opts.emoticons.more:{}),d=0;return e.each(f,function(){d++}),d=Math.sqrt(d),e.each(f,function(t,i){c.append(e("<img />").attr({src:i.url||i,alt:t,title:i.tooltip||t}).click(function(){return n.insert(a+e(this).attr("alt")+l,null,!1).closeDropDown(!0),!1})),c.children().length>=d&&(c=e("<div />").appendTo(u))}),o||u.append(e(n._('<a class="sceditor-more">{0}</a>',n._("More"))).click(function(){return n.createDropDown(t,"more-emoticons",i(!0)),!1})),u};n.createDropDown(t,"emoticons",i(!1))},txtExec:function(t){e.sceditor.command.get("emoticon").exec.call(this,t)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var i,r=o("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0);r.find(".button").click(function(t){var o=r.find("#link").val().replace("http://","");""!==o&&(i=o.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),i&&(o=i[1]),/^[a-zA-Z0-9_\-]{11}$/.test(o)?n(o):alert("Invalid YouTube video")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",r)},exec:function(t){var n=this;e.sceditor.command.get("youtube")._dropDown(n,t,function(e){n.wysiwygEditorInsertHtml(o("youtube",{id:e}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),i=t.getMonth()+1,o=t.getDate();return 2e3>n&&(n=1900+n),10>i&&(i="0"+i),10>o&&(o="0"+o),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,i).replace(/day/i,o)},exec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},txtExec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>i&&(i="0"+i),t+":"+n+":"+i},exec:function(){this.insertText(e.sceditor.command.get("time")._time())},txtExec:function(){this.insertText(e.sceditor.command.get("time")._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),i=e(n);t.focus(),(n&&!i.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),i=e(n),n&&!i.is("body")))&&("ltr"===i.css("direction")?i.css("direction",""):i.css("direction","ltr"))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),i=e(n);t.focus(),(n&&!i.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),i=e(n),n&&!i.is("body")))&&("rtl"===i.css("direction")?i.css("direction",""):i.css("direction","rtl"))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"ctrl+shift+m"},source:{exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"ctrl+shift+s"},ignore:{}},e.sceditor.rangeHelper=function(t,n){var i,o,r,s,a,l=!0,u="sceditor-start-marker",c="sceditor-end-marker",f="character",d=this;r=function(e,t){o=t||e.contentDocument||e.document,i=e,l=!!e.getSelection}(t,n),d.insertHTML=function(e,t){var n,i,r=d.selectedRange();if(t&&(e+=d.selectedHtml()+t),l){for(i=o.createElement("div"),n=o.createDocumentFragment(),i.innerHTML=e;i.firstChild;)n.appendChild(i.firstChild);d.insertNode(n)}else{if(!r)return!1;r.pasteHTML(e)}},d.insertNode=function(e,t){if(l){var n,i,r=o.createDocumentFragment(),s=d.selectedRange();if(!s)return!1;if(r.appendChild(e),t&&(r.appendChild(s.extractContents()),r.appendChild(t)),i=r.lastChild,!i)return;s.deleteContents(),s.insertNode(r),n=o.createRange(),n.setStartAfter(i),d.selectRange(n)}else d.insertHTML(e.outerHTML,t?t.outerHTML:null)},d.cloneSelected=function(){var e=d.selectedRange();return e?l?e.cloneRange():e.duplicate():void 0},d.selectedRange=function(){var e,t,n=l?i.getSelection():o.selection;if(n){if(n.getRangeAt&&n.rangeCount<=0){for(t=o.body;t.firstChild;)t=t.firstChild;e=o.createRange(),e.setStart(t,0),n.addRange(e)}return l&&(e=n.getRangeAt(0)),l||"Control"===n.type||(e=n.createRange()),a(e)?e:null}},a=function(e){var t;return e&&e.parentElement&&(t=e.parentElement())?t.ownerDocument===o:!0},d.hasSelection=function(){var e,t=l?i.getSelection():o.selection;return l||!t?t&&t.rangeCount>0:(e=t.createRange(),e&&a(e))},d.selectedHtml=function(){var e,t=d.selectedRange();return t?!l&&""!==t.text&&t.htmlText?t.htmlText:l?(e=o.createElement("div"),e.appendChild(t.cloneContents()),e.innerHTML):"":""},d.parentNode=function(){var e=d.selectedRange();return e?e.parentElement?e.parentElement():e.commonAncestorContainer:void 0},d.getFirstBlockParent=function(t){var n=function(t){return e.sceditor.dom.isInline(t,!0)?(t=t?t.parentNode:null,t?n(t):null):t};return n(t||d.parentNode())},d.insertNodeAt=function(e,t){var n=d.selectedRange(),i=d.cloneSelected();return i?(i.collapse(e),i.insertNode?i.insertNode(t):i.pasteHTML(t.outerHTML),d.selectRange(n),void 0):!1},s=function(e){d.removeMarker(e);var t=o.createElement("span");return t.id=e,t.style.lineHeight="0",t.style.display="none",t.className="sceditor-selection sceditor-ignore",t.innerHTML=" ",t},d.insertMarkers=function(){d.insertNodeAt(!0,s(u)),d.insertNodeAt(!1,s(c))},d.getMarker=function(e){return o.getElementById(e)},d.removeMarker=function(e){var t=d.getMarker(e);t&&t.parentNode.removeChild(t)},d.removeMarkers=function(){d.removeMarker(u),d.removeMarker(c)},d.saveRange=function(){d.insertMarkers()},d.selectRange=function(e){l?(i.getSelection().removeAllRanges(),i.getSelection().addRange(e)):e.select()},d.restoreRange=function(){var e,t=d.selectedRange(),n=d.getMarker(u),i=d.getMarker(c);return n&&i&&t?(l?(t=o.createRange(),t.setStartBefore(n),t.setEndAfter(i),d.selectRange(t)):(t=o.body.createTextRange(),e=o.body.createTextRange(),e.moveToElementText(n),t.setEndPoint("StartToStart",e),t.moveStart(f,0),e.moveToElementText(i),t.setEndPoint("EndToStart",e),t.moveEnd(f,0),d.selectRange(t)),d.removeMarkers(),void 0):!1},d.selectOuterText=function(e,t){var n=d.cloneSelected();return n?(n.collapse(!1),l?(n.setStart(n.startContainer,n.startOffset-e),n.setEnd(n.endContainer,n.endOffset+t)):(n.moveStart(f,0-e),n.moveEnd(f,t)),d.selectRange(n),void 0):!1},d.getOuterText=function(e,t){var n="",i=d.cloneSelected();return i?(i.collapse(!1),e?l?(n=i.startContainer.textContent.substr(0,i.startOffset),n=n.substr(Math.max(0,n.length-t))):(i.moveStart(f,0-t),n=i.text):l?n=i.startContainer.textContent.substr(i.startOffset,t):(i.moveEnd(f,t),n=i.text),n):""},d.raplaceKeyword=function(t,n,i,o,r,s){i||t.sort(function(e,t){return e.length-t.length});var a,u,c,f,p,h,m,g=t.length,v=o||t[g-1][0].length;if(r){if(!l)return!1;++v}for(a=d.getOuterText(!0,v),u=a+(null!=s?s:""),n&&(u+=d.getOuterText(!1,v));g--;)if(m=t[g][0],p=new RegExp("(?:[\\s    ])"+e.sceditor.regexEscape(m)+"(?=[\\s    ])"),h=a.length-1-m.length,r&&--h,h=Math.max(0,h),(c=r?u.substr(h).search(p):u.indexOf(m,h))>-1){if(r&&(c+=h+1),c>a.length||c+m.length+(r?1:0)<a.length)continue;
return f=a.length-c,d.selectOuterText(f,m.length-f-(null!=s&&/^\S/.test(s)?1:0)),d.insertHTML(t[g][1]),!0}return!1},d.compare=function(e,t){return t||(t=d.selectedRange()),e&&t?l?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):a(e)&&a(t)&&0===e.compareEndPoints("EndToEnd",t)&&0===e.compareEndPoints("StartToStart",t):!e&&!t}},e.sceditor.dom={traverse:function(e,t,n,i,o){if(e)for(e=o?e.lastChild:e.firstChild;null!=e;){var r=o?e.previousSibling:e.nextSibling;if(!n&&t(e)===!1)return!1;if(!i&&this.traverse(e,t,n,i,o)===!1)return!1;if(n&&t(e)===!1)return!1;e=r}},rTraverse:function(e,t,n,i){this.traverse(e,t,n,i,!0)},parseHTML:function(t,i){var o=[],r=(i||n).createElement("div");return r.innerHTML=t,e.merge(o,r.childNodes),o},hasStyling:function(t){var n=e(t);return t&&(!n.is("p,div")||t.className||n.attr("style")||!e.isEmptyObject(n.data()))},convertElement:function(t,n){for(var i,o,r=t.attributes.length,s=t.ownerDocument.createElement(n);r--;)o=t.attributes[r],(!e.sceditor.ie||o.specified)&&(e.sceditor.ie<8&&/style/i.test(o.name)?t.style.cssText=t.style.cssText:s.setAttribute(o.name,o.value));for(;i=t.firstChild;)s.appendChild(i);return t.parentNode.replaceChild(s,t),s},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",isInline:function(t,n){return t&&1===t.nodeType?(t=t.tagName.toLowerCase(),"code"===t?!n:e.sceditor.dom.blockLevelList.indexOf("|"+t+"|")<0):!0},copyCSS:function(e,t){t.style.cssText=e.style.cssText+t.style.cssText},fixNesting:function(e){var t=this,n=function(e){for(;t.isInline(e.parentNode,!0);)e=e.parentNode;return e};t.traverse(e,function(e){if(1===e.nodeType&&!t.isInline(e,!0)&&t.isInline(e.parentNode,!0)){var i=n(e),o=i.parentNode,r=t.extractContents(i,e),s=e;t.copyCSS(i,s),o.insertBefore(r,i),o.insertBefore(s,i)}})},findCommonAncestor:function(t,n){return e(t).parents().has(e(n)).first()},getSibling:function(t,n){var i;return t?(i=t[n?"previousSibling":"nextSibling"])?i:e.sceditor.dom.getSibling(t.parentNode,n):null},removeWhiteSpace:function(t,n){for(var i,o,r,s,a,l,u,c,f=e.sceditor.dom.getSibling,d=e.sceditor.dom.isInline,p=t.firstChild,h=/[\t ]+/g,m=/[\t\n\r ]+/g;p;){if(l=p.nextSibling,i=p.nodeValue,o=p.nodeType,1===o&&p.firstChild&&(a=e(p).css("whiteSpace"),/pre(?:\-wrap)?$/i.test(a)||e.sceditor.dom.removeWhiteSpace(p,/line$/i.test(a))),3===o&&i){for(r=f(p),s=f(p,!0),c=s,u=!1;e(c).hasClass("sceditor-ignore");)c=f(c,!0);if(d(p)&&c){for(;c.lastChild;)c=c.lastChild;u=3===c.nodeType?/[\t\n\r ]$/.test(c.nodeValue):!d(c)}d(p)&&s&&d(s)&&!u||(i=i.replace(/^[\t\n\r ]+/,"")),d(p)&&r&&d(r)||(i=i.replace(/[\t\n\r ]+$/,"")),i.length?p.nodeValue=i.replace(n?h:m," "):t.removeChild(p)}p=l}},extractContents:function(e,t){var n=this,i=n.findCommonAncestor(e,t),o=i?i[0]:null,r=!1,s=!1;return function a(i){var o=e.ownerDocument.createDocumentFragment();return n.traverse(i,function(n){if(s||n===t&&r)return s=!0,!1;n===e&&(r=!0);var i,l;r?jQuery.contains(n,t)&&1===n.nodeType?(i=a(n),l=n.cloneNode(!1),l.appendChild(i),o.appendChild(l)):o.appendChild(n):jQuery.contains(n,e)&&1===n.nodeType&&(i=a(n),l=n.cloneNode(!1),l.appendChild(i),o.appendChild(l))},!1),o}(o)}},e.sceditor.plugins={},e.sceditor.PluginManager=function(t){var n=this,i=[],o=t,r=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},s=function(e,t){e=[].slice.call(e);for(var n=i.length,s=r(e.shift());n--;)if(s in i[n]){if(t)return i[n][s].apply(o,e);i[n][s].apply(o,e)}};n.call=function(){s(arguments,!1)},n.callOnlyFirst=function(){return s(arguments,!0)},n.iter=function(e){return e=r(e),function(){var t=i.length;return{callNext:function(n){for(;t--;)if(i[t]&&e in i[t])return i[t].apply(o,n)},hasNext:function(){for(var n=t;n--;)if(i[n]&&e in i[n])return!0;return!1}}}()},n.hasHandler=function(e){var t=i.length;for(e=r(e);t--;)if(e in i[t])return!0;return!1},n.exsists=function(t){return t in e.sceditor.plugins?(t=e.sceditor.plugins[t],"function"==typeof t&&"object"==typeof t.prototype):!1},n.isRegistered=function(t){var o=i.length;if(!n.exsists(t))return!1;for(;o--;)if(i[o]instanceof e.sceditor.plugins[t])return!0;return!1},n.register=function(t){return n.exsists(t)?(t=new e.sceditor.plugins[t],i.push(t),"init"in t&&t.init.apply(o),!0):!1},n.deregister=function(t){var r,s=i.length,a=!1;if(!n.isRegistered(t))return!1;for(;s--;)i[s]instanceof e.sceditor.plugins[t]&&(r=i.splice(s,1)[0],a=!0,"destroy"in r&&r.destroy.apply(o));return a},n.destroy=function(){for(var e=i.length;e--;)"destroy"in i[e]&&i[e].destroy.apply(o);i=null,o=null}},e.sceditor.command={get:function(t){return e.sceditor.commands[t]||null},set:function(t,n){return t&&n?(n=e.extend(e.sceditor.commands[t]||{},n),n.remove=function(){e.sceditor.command.remove(t)},e.sceditor.commands[t]=n,this):!1},remove:function(t){return e.sceditor.commands[t]&&delete e.sceditor.commands[t],this}},e.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}},e.fn.sceditor=function(t){var n,i=[];return t=t||{},t.runWithoutWysiwygSupport||e.sceditor.isWysiwygSupported?(this.each(function(){n=this.jquery?this:e(this),n.parents(".sceditor-container").length>0||("state"===t?i.push(!!n.data("sceditor")):"instance"===t?i.push(n.data("sceditor")):n.data("sceditor")||new e.sceditor(this,t))}),i.length?1===i.length?i[0]:e(i):this):void 0}}(jQuery,window,document);!function(e,t,n){"use strict";var i={html:'<!DOCTYPE html><html><head><style>.ie * {min-height: auto !important}</style><meta http-equiv="Content-Type" content="text/html;charset={charset}" /><link rel="stylesheet" type="text/css" href="{style}" /></head><body contenteditable="true" {spellcheck}></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="link">{url}</label> <input type="text" id="image" value="http://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" value="http://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" value="http://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{id}?wmode=opaque" data-youtube-id="{id}" frameborder="0" allowfullscreen></iframe>'},o=function(t,n,o){var r=i[t];return e.each(n,function(e,t){r=r.replace(new RegExp("\\{"+e+"\\}","g"),t)}),o&&(r=e(r)),r};e.sceditor=function(i,r){var s,a,l,u,c,f,d,p,h,m,g,v,y,b,x,w,k,T,C,S,_,E,M,D,O,N,L,P,H,A,I,R,F,B,W,j,$,z,q,U,X,V,K,Q,Y,J,G,Z,et,tt,nt,it,ot,rt,st=this,at=i.get?i.get(0):i,lt=e(at),ut=[],ct=[],ft=[],dt=[],pt={},ht=[];st.commands=e.extend(!0,{},r.commands||e.sceditor.commands),st.opts=r=e.extend({},e.sceditor.defaultOptions,r),_=function(){lt.data("sceditor",st),e.each(r,function(t,n){e.isPlainObject(n)&&(r[t]=e.extend(!0,{},n))}),r.locale&&"en"!==r.locale&&L(),s=e('<div class="sceditor-container" />').insertAfter(lt).css("z-index",r.zIndex),e.sceditor.ie&&s.addClass("ie ie"+e.sceditor.ie),C=!!lt.attr("required"),lt.removeAttr("required"),N(),F(),P(),O(),I(),H(),A(),e.sceditor.isWysiwygSupported||st.toggleSourceMode();var i=function(){e(t).unbind("load",i),r.autofocus&&nt(),r.autoExpand&&st.expandToContent(),Q()};e(t).load(i),n.readyState&&"complete"===n.readyState&&i(),J(),b.call("ready")},N=function(){var t=r.plugins;t=t?t.toString().split(","):[],b=new e.sceditor.PluginManager(st),e.each(t,function(t,n){b.register(e.trim(n))})},L=function(){var t;e.sceditor.locale[r.locale]?g=e.sceditor.locale[r.locale]:(t=r.locale.split("-"),e.sceditor.locale[t[0]]&&(g=e.sceditor.locale[t[0]])),g&&g.dateFormat&&(r.dateFormat=g.dateFormat)},O=function(){var n,i;d=e("<textarea></textarea>").hide(),l=e('<iframe frameborder="0"></iframe>'),r.spellcheck||d.attr("spellcheck","false"),"https:"===t.location.protocol&&l.attr("src","javascript:false"),s.append(l).append(d),u=l[0],p=d[0],st.width(r.width||lt.width()),st.height(r.height||lt.height()),n=B(),n.open(),n.write(o("html",{spellcheck:r.spellcheck?"":'spellcheck="false"',charset:r.charset,style:r.style})),n.close(),f=e(n),c=e(n.body),st.readOnly(!!r.readOnly),e.sceditor.ie&&f.find("html").addClass("ie ie"+e.sceditor.ie),(e.sceditor.ios||e.sceditor.ie)&&(c.height("100%"),e.sceditor.ie||c.bind("touchend",st.focus)),v=new e.sceditor.rangeHelper(u.contentWindow),st.val(lt.hide().val()),i=lt.attr("tabindex"),d.attr("tabindex",i),l.attr("tabindex",i)},H=function(){r.autoUpdate&&(c.bind("blur",st.updateOriginal),d.bind("blur",st.updateOriginal)),null===r.rtl&&(r.rtl="rtl"===d.css("direction")),st.rtl(!!r.rtl),r.autoExpand&&f.bind("keyup",st.expandToContent),r.resizeEnabled&&R(),s.attr("id",r.id),st.emoticons(r.emoticonsEnabled)},A=function(){e(n).click(K),e(at.form).bind("reset",U).submit(st.updateOriginal),e(t).bind("resize orientationChanged",Q),c.keypress(q).keydown($).keydown(z).keyup(Z).bind("paste",W).bind(e.sceditor.ie?"selectionchange":"keyup focus blur contextmenu mouseup touchend click",et).bind("keydown keyup keypress focus blur contextmenu",V),r.emoticonsCompat&&t.getSelection&&c.keyup(ot),d.bind("keydown keyup keypress focus blur contextmenu",V).keydown($),f.keypress(q).mousedown(X).bind(e.sceditor.ie?"selectionchange":"focus blur contextmenu mouseup click",et).bind("beforedeactivate keyup",D).keyup(Z).focus(function(){m=null}),s.bind("selectionchanged",tt).bind("selectionchanged",J).bind("selectionchanged",V).bind("nodechanged",V)},P=function(){var t,n,i=(r.toolbarExclude||"").split(","),l=r.toolbar.split("|");a=e('<div class="sceditor-toolbar" unselectable="on" />'),e.each(l,function(r,s){t=e('<div class="sceditor-group" />'),e.each(s.split(","),function(r,s){!st.commands[s]||e.inArray(s,i)>-1||(n=o("toolbarButton",{name:s,dispName:st._(st.commands[s].tooltip||s)},!0),n.data("sceditor-txtmode",!!st.commands[s].txtExec),n.data("sceditor-wysiwygmode",!!st.commands[s].exec),n.click(function(){var t=e(this);return t.hasClass("disabled")||M(t,st.commands[s]),J(),!1}),st.commands[s].tooltip&&n.attr("title",st._(st.commands[s].tooltip)),st.commands[s].exec||n.addClass("disabled"),st.commands[s].shortcut&&st.addShortcut(st.commands[s].shortcut,s),t.append(n))}),t[0].firstChild&&a.append(t)}),e(r.toolbarContainer||s).append(a)},I=function(){e.each(st.commands,function(t,n){n.keyPress&&ut.push(n.keyPress),n.forceNewLineAfter&&e.isArray(n.forceNewLineAfter)&&(ft=e.merge(ft,n.forceNewLineAfter)),n.state?dt.push({name:t,state:n.state}):"string"==typeof n.exec&&dt.push({name:t,state:n.exec})}),Z()},R=function(){var i,o,a,l,u,c,f=e('<div class="sceditor-grip" />'),d=e('<div class="sceditor-resize-cover" />'),p=0,h=0,m=0,g=0,v=s.width(),y=s.height(),b=!1,x=st.rtl();i=r.resizeMinHeight||y/1.5,o=r.resizeMaxHeight||2.5*y,a=r.resizeMinWidth||v/1.25,l=r.resizeMaxWidth||1.25*v,u=function(n){"touchmove"===n.type&&(n=t.event);var u=g+(n.pageY-h),c=x?m-(n.pageX-p):m+(n.pageX-p);l>0&&c>l&&(c=l),o>0&&u>o&&(u=o),(!r.resizeWidth||a>c||l>0&&c>l)&&(c=!1),(!r.resizeHeight||i>u||o>0&&u>o)&&(u=!1),(c||u)&&(st.dimensions(c,u),e.sceditor.ie<7&&s.height(u)),n.preventDefault()},c=function(t){b&&(b=!1,d.hide(),s.removeClass("resizing").height("auto"),e(n).unbind("touchmove mousemove",u),e(n).unbind("touchend mouseup",c),t.preventDefault())},s.append(f),s.append(d.hide()),f.bind("touchstart mousedown",function(i){"touchstart"===i.type&&(i=t.event),p=i.pageX,h=i.pageY,m=s.width(),g=s.height(),b=!0,s.addClass("resizing"),d.show(),e(n).bind("touchmove mousemove",u),e(n).bind("touchend mouseup",c),e.sceditor.ie<7&&s.height(g),i.preventDefault()})},F=function(){var t,i=r.emoticons,o=r.emoticonsRoot;e.isPlainObject(i)&&r.emoticonsEnabled&&e.each(i,function(r,s){e.each(s,function(e,s){o&&(s={url:o+(s.url||s),tooltip:s.tooltip||e},i[r][e]=s),t=n.createElement("img"),t.src=s.url||s,ct.push(t)})})},nt=function(){var t,n,i,o=f[0],a=c[0],l=!!r.autofocusEnd;if(s.is(":visible")){if(st.sourceMode())i=p.value.length,p.setSelectionRange?p.setSelectionRange(i,i):p.createTextRange&&(t=p.createTextRange(),t.moveEnd("character",i),t.moveStart("character",i),v.selectRange(t));else{if(e.sceditor.dom.removeWhiteSpace(a),l)for((n=a.lastChild)||c.append(n=o.createElement("div"));n.lastChild;)n=n.lastChild,/br/i.test(n.nodeName)&&n.previousSibling&&(n=n.previousSibling);else n=a.firstChild;o.createRange?(t=o.createRange(),/br/i.test(n.nodeName)?t.setStartBefore(n):t.selectNodeContents(n),t.collapse(!1)):(t=a.createTextRange(),t.moveToElementText(3!==n.nodeType?n:n.parentNode),t.collapse(!1)),v.selectRange(t),l&&(f.scrollTop(a.scrollHeight),c.scrollTop(a.scrollHeight))}st.focus()}},st.readOnly=function(e){return"boolean"!=typeof e?"readonly"===d.attr("readonly"):(c[0].contentEditable=!e,e?d.attr("readonly","readonly"):d.removeAttr("readonly"),Y(e),this)},st.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===d.attr("dir"):(c.attr("dir",t),d.attr("dir",t),s.removeClass("rtl").removeClass("ltr").addClass(t),this)},Y=function(t){var n=st.inSourceMode();a.find(".sceditor-button").removeClass("disabled").each(function(){var i=e(this);t===!0||n&&!i.data("sceditor-txtmode")?i.addClass("disabled"):n||i.data("sceditor-wysiwygmode")||i.addClass("disabled")})},st.width=function(e,t){return e||0===e?(st.dimensions(e,null,t),this):s.width()},st.dimensions=function(t,i,o){var u=e.sceditor.ie<8||n.documentMode<8?2:0;return t=t||0===t?t:!1,i=i||0===i?i:!1,t===!1&&i===!1?{width:st.width(),height:st.height()}:("undefined"==typeof l.data("outerWidthOffset")&&st.updateStyleCache(),t!==!1&&(o!==!1&&(r.width=t),i===!1&&(i=s.height(),o=!1),s.width(t),t&&t.toString().indexOf("%")>-1&&(t=s.width()),l.width(t-l.data("outerWidthOffset")),d.width(t-d.data("outerWidthOffset")),e.sceditor.ios&&c&&c.width(t-l.data("outerWidthOffset")-(c.outerWidth(!0)-c.width()))),i!==!1&&(o!==!1&&(r.height=i),i&&i.toString().indexOf("%")>-1&&(i=s.height(i).height(),s.height("auto")),i-=r.toolbarContainer?0:a.outerHeight(!0),l.height(i-l.data("outerHeightOffset")),d.height(i-u-d.data("outerHeightOffset"))),this)},st.updateStyleCache=function(){l.data("outerWidthOffset",l.outerWidth(!0)-l.width()),d.data("outerWidthOffset",d.outerWidth(!0)-d.width()),l.data("outerHeightOffset",l.outerHeight(!0)-l.height()),d.data("outerHeightOffset",d.outerHeight(!0)-d.height())},st.height=function(e,t){return e||0===e?(st.dimensions(null,e,t),this):s.height()},st.maximize=function(t){return"undefined"==typeof t?s.is(".sceditor-maximize"):(t=!!t,e.sceditor.ie<7&&e("html, body").toggleClass("sceditor-maximize",t),s.toggleClass("sceditor-maximize",t),st.width(t?"100%":r.width,!1),st.height(t?"100%":r.height,!1),this)},st.expandToContent=function(e){var t=s.height(),n=c[0].scrollHeight||f[0].documentElement.scrollHeight,i=t-l.height(),o=r.resizeMaxHeight||2*(r.height||lt.height());n+=i,e!==!0&&n>o&&(n=o),n>t&&st.height(n)},st.destroy=function(){b.destroy(),v=null,m=null,b=null,e(n).unbind("click",K),e(t).unbind("resize orientationChanged",Q),e(at.form).unbind("reset",U).unbind("submit",st.updateOriginal),c.unbind(),f.unbind().find("*").remove(),d.unbind().remove(),a.remove(),s.unbind().find("*").unbind().remove(),s.remove(),lt.removeData("sceditor").removeData("sceditorbbcode").show(),C&&lt.attr("required","required")},st.createDropDown=function(t,n,i,o){var s,a=h&&h.is(".sceditor-"+n);st.closeDropDown(),a||(o!==!1&&e(i).find(":not(input,textarea)").filter(function(){return 1===this.nodeType}).attr("unselectable","on"),s={top:t.offset().top,left:t.offset().left,marginTop:t.outerHeight()},e.extend(s,r.dropDownCss),h=e('<div class="sceditor-dropdown sceditor-'+n+'" />').css(s).append(i).appendTo(e("body")).click(function(e){e.stopPropagation()}))},K=function(e){3!==e.which&&st.closeDropDown()},W=function(e){var t,i,o=c[0],s=f[0],a=0,l=n.createElement("div"),u=s.createDocumentFragment();if(r.disablePasting)return!1;if(r.enablePasteFiltering){if(v.saveRange(),n.body.appendChild(l),e&&e.clipboardData&&e.clipboardData.getData&&((t=e.clipboardData.getData("text/html"))||(t=e.clipboardData.getData("text/plain"))))return l.innerHTML=t,j(o,l),!1;for(;o.firstChild;)u.appendChild(o.firstChild);return i=function(e,t){if(e.childNodes.length>0){for(;e.firstChild;)t.appendChild(e.firstChild);for(;u.firstChild;)e.appendChild(u.firstChild);j(e,t)}else{if(a>25){for(;u.firstChild;)e.appendChild(u.firstChild);return v.restoreRange(),void 0}++a,setTimeout(function(){i(e,t)},20)}},i(o,l),st.focus(),!0}},j=function(t,n){e.sceditor.dom.fixNesting(n);var i=n.innerHTML;b.hasHandler("toSource")&&(i=b.callOnlyFirst("toSource",i,e(n))),n.parentNode.removeChild(n),b.hasHandler("toWysiwyg")&&(i=b.callOnlyFirst("toWysiwyg",i,!0)),v.restoreRange(),st.wysiwygEditorInsertHtml(i,null,!0)},st.closeDropDown=function(e){h&&(h.unbind().remove(),h=null),e===!0&&st.focus()},B=function(){return u.contentDocument?u.contentDocument:u.contentWindow&&u.contentWindow.document?u.contentWindow.document:u.document?u.document:null},st.wysiwygEditorInsertHtml=function(t,n,i){var o,r,s='<span id="sceditor-cursor">&nbsp;</span>';st.focus(),(i||!e(w).is("code")&&0===e(w).parents("code").length)&&(n?n+=s:t+=s,v.insertHTML(t,n),r=c.find("#sceditor-cursor"),o=r.offset().top+2*r.outerHeight(!0)-l.height(),r.remove(),f.scrollTop(o),c.scrollTop(o),v.saveRange(),E(c[0]),v.restoreRange(),Z())},st.wysiwygEditorInsertText=function(t,n){st.wysiwygEditorInsertHtml(e.sceditor.escapeEntities(t),e.sceditor.escapeEntities(n))},st.insertText=function(e,t){return st.inSourceMode()?st.sourceEditorInsertText(e,t):st.wysiwygEditorInsertText(e,t),this},st.sourceEditorInsertText=function(e,t){var i,o,r,s,a;a=p.scrollTop,p.focus(),"undefined"!=typeof p.selectionStart?(o=p.selectionStart,r=p.selectionEnd,s=e.length,t&&(e+=p.value.substring(o,r)+t),p.value=p.value.substring(0,o)+e+p.value.substring(r,p.value.length),p.selectionStart=o+e.length-(t?t.length:0),p.selectionEnd=p.selectionStart):"undefined"!=typeof n.selection.createRange?(i=n.selection.createRange(),t&&(e+=i.text+t),i.text=e,t&&i.moveEnd("character",0-t.length),i.moveStart("character",i.End-i.Start),i.select()):p.value+=e+t,p.scrollTop=a,p.focus()},st.getRangeHelper=function(){return v},st.val=function(e,t){return"string"==typeof e?(st.inSourceMode()?st.setSourceEditorValue(e):(t!==!1&&b.hasHandler("toWysiwyg")&&(e=b.callOnlyFirst("toWysiwyg",e)),st.setWysiwygEditorValue(e)),this):st.inSourceMode()?st.getSourceEditorValue(!1):st.getWysiwygEditorValue()},st.insert=function(t,n,i,o,r){if(st.inSourceMode())st.sourceEditorInsertText(t,n);else{if(n){var s=st.getRangeHelper().selectedHtml(),a=e("<div>").appendTo(e("body")).hide().html(s);i!==!1&&b.hasHandler("toSource")&&(s=b.callOnlyFirst("toSource",s,a)),a.remove(),t+=s+n}i!==!1&&b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t,!0)),i!==!1&&r===!0&&(t=t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),st.wysiwygEditorInsertHtml(t)}return this},st.getWysiwygEditorValue=function(t){var n,i,o=v.hasSelection();return o?v.saveRange():m&&m.getBookmark&&(i=m.getBookmark()),e.sceditor.dom.fixNesting(c[0]),n=c.html(),t!==!1&&b.hasHandler("toSource")&&(n=b.callOnlyFirst("toSource",n,c)),o?(v.restoreRange(),m=null):i&&(m.moveToBookmark(i),m=null),n},st.getBody=function(){return c},st.getContentAreaContainer=function(){return l},st.getSourceEditorValue=function(e){var t=d.val();return e!==!1&&b.hasHandler("toWysiwyg")&&(t=b.callOnlyFirst("toWysiwyg",t)),t},st.setWysiwygEditorValue=function(t){t||(t="<p>"+(e.sceditor.ie?"":"<br />")+"</p>"),c[0].innerHTML=t,E(c[0]),Z()},st.setSourceEditorValue=function(e){d.val(e)},st.updateOriginal=function(){lt.val(st.val())},E=function(t){if(r.emoticonsEnabled&&!e(t).parents("code").length){var n=t.ownerDocument,i=[],s=[],a=e.extend({},r.emoticons.more,r.emoticons.dropdown,r.emoticons.hidden);e.each(a,function(t){r.emoticonsCompat&&(s[t]=new RegExp("(>|^|\\s| | | | |&nbsp;)"+e.sceditor.regexEscape(t)+"(\\s|$|<| | | | |&nbsp;)")),i.push(t)}),function l(t){for(t=t.firstChild;null!=t;){var u,c,f,d,p,h,m,g=t.parentNode,v=t.nodeValue;if(3!==t.nodeType)e(t).is("code")||l(t);else if(v)for(p=i.length;p--;)c=i[p],m=r.emoticonsCompat?v.search(s[c]):v.indexOf(c),m>-1&&(h=t.nextSibling,f=a[c],u=v.substr(m).split(c),v=v.substr(0,m)+u.shift(),t.nodeValue=v,d=e.sceditor.dom.parseHTML(o("emoticon",{key:c,url:f.url||f,tooltip:f.tooltip||c}),n),g.insertBefore(d[0],h),g.insertBefore(n.createTextNode(u.join(c)),h));t=t.nextSibling}}(t),r.emoticonsCompat&&(ht=c.find("img[data-sceditor-emoticon]"))}},st.inSourceMode=function(){return s.hasClass("sourceMode")},st.sourceMode=function(e){return"boolean"!=typeof e?st.inSourceMode():((st.inSourceMode()&&!e||!st.inSourceMode()&&e)&&st.toggleSourceMode(),this)},st.toggleSourceMode=function(){(e.sceditor.isWysiwygSupported||!st.inSourceMode())&&(st.blur(),st.inSourceMode()?st.setWysiwygEditorValue(st.getSourceEditorValue()):st.setSourceEditorValue(st.getWysiwygEditorValue()),m=null,d.toggle(),l.toggle(),st.inSourceMode()?s.removeClass("sourceMode").addClass("wysiwygMode"):s.removeClass("wysiwygMode").addClass("sourceMode"),Y(),J())},G=function(){return p.focus(),null!=p.selectionStart?p.value.substring(p.selectionStart,p.selectionEnd):n.selection.createRange?n.selection.createRange().text:void 0},M=function(t,n){return st.inSourceMode()?(n.txtExec&&(e.isArray(n.txtExec)?st.sourceEditorInsertText.apply(st,n.txtExec):n.txtExec.call(st,t,G())),void 0):(n.exec&&(e.isFunction(n.exec)?n.exec.call(st,t):st.execCommand(n.exec,n.hasOwnProperty("execParam")?n.execParam:null)),void 0)},D=function(){e.sceditor.ie&&(m=v.selectedRange())},st.execCommand=function(t,n){var i=!1,o=e(v.parentNode());if(st.focus(),!o.is("code")&&0===o.parents("code").length){try{i=f[0].execCommand(t,!1,n)}catch(r){}!i&&st.commands[t]&&st.commands[t].errorMessage&&alert(st._(st.commands[t].errorMessage))}},et=function(){var t=function(){v&&!v.compare(k)&&(k=v.cloneSelected(),s.trigger(e.Event("selectionchanged"))),T=!1};T||(T=!0,e.sceditor.ie?t():setTimeout(t,100))},tt=function(){var t,n=v.parentNode();x!==n&&(t=x,x=n,w=v.getFirstBlockParent(n),s.trigger(e.Event("nodechanged",{oldNode:t,newNode:x})))},st.currentNode=function(){return x},st.currentBlockNode=function(){return w},J=function(e){var t,n,i,o,r,s=f[0],l=dt.length,u=st.sourceMode();if(st.sourceMode()||st.readOnly())a.find(".sceditor-button").removeClass("active");else for(r=e?e.newNode:v.parentNode(),i=v.getFirstBlockParent(r);l--;)if(t=0,n=dt[l],o=a.find(".sceditor-button-"+n.name),u&&!o.data("sceditor-txtmode"))o.addClass("disabled");else if(u||o.data("sceditor-wysiwygmode")){if("string"==typeof n.state)try{t=s.queryCommandEnabled(n.state)?0:-1,t>-1&&(t=s.queryCommandState(n.state)?1:0)}catch(c){}else t=n.state.call(st,r,i);0>t?o.addClass("disabled"):o.removeClass("disabled"),t>0?o.addClass("active"):o.removeClass("active")}else o.addClass("disabled")},q=function(t){var n,i=ut.length;if(st.closeDropDown(),n=e(x),13===t.which&&(n.is("code,blockquote,pre")||0!==n.parents("code,blockquote,pre").length))return m=null,st.wysiwygEditorInsertHtml("<br />",null,!0),!1;if(!n.is("code")&&0===n.parents("code").length)for(;i--;)ut[i].call(st,t,u,d)},Z=function(){var t,n,i;e.sceditor.dom.rTraverse(c[0],function(o){return t=o.nodeName.toLowerCase(),e.inArray(t,ft)>-1&&(n=!0),3===o.nodeType&&!/^\s*$/.test(o.nodeValue)||"br"===t||e.sceditor.ie&&!o.firstChild&&!e.sceditor.dom.isInline(o,!1)?(n&&(i=c[0].ownerDocument.createElement("div"),i.className="sceditor-nlf",i.innerHTML=e.sceditor.ie?"":"<br />",c[0].appendChild(i)),!1):void 0})},U=function(){st.val(lt.val())},X=function(){st.closeDropDown(),m=null},Q=function(){var e=r.height,t=r.width;st.maximize()?st.dimensions("100%","100%",!1):(e&&e.toString().indexOf("%")>-1&&st.height(e),t&&t.toString().indexOf("%")>-1&&st.width(t))},st._=function(){var e=arguments;return g&&g[e[0]]&&(e[0]=g[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n-0+1]?e[n-0+1]:"{"+n+"}"})},V=function(t){var n,i=e.extend({},t);b.call(i.type+"Event",t,st),delete i.type,n=e.Event((t.target===p?"scesrc":"scewys")+t.type,i),s.trigger.apply(s,[n,st]),n.isDefaultPrevented()&&t.preventDefault(),n.isImmediatePropagationStopped()&&n.stopImmediatePropagation(),n.isPropagationStopped()&&n.stopPropagation()},st.bind=function(t,n,i,o){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(i||s.bind("scewys"+t[r],n),o||s.bind("scesrc"+t[r],n));return this},st.unbind=function(t,n,i,o){var r=t.length;for(t=t.split(" ");r--;)e.isFunction(n)&&(i||s.unbind("scewys"+t[r],n),o||s.unbind("scesrc"+t[r],n));return this},st.blur=function(t,n,i){return e.isFunction(t)?st.bind("blur",t,n,i):st.sourceMode()?d.blur():(y||(y=e('<input style="position:absolute;width:0;height:0;opacity:0;border:0;padding:0;filter:alpha(opacity=0)" type="text" />').appendTo(s)),y.removeAttr("disabled").show().focus().blur().hide().attr("disabled","disabled")),this},st.focus=function(t,n,i){return e.isFunction(t)?st.bind("focus",t,n,i):st.inSourceMode()?p.focus():(u.contentWindow.focus(),c[0].focus(),m&&(v.selectRange(m),m=null)),this},st.keyDown=function(e,t,n){return st.bind("keydown",e,t,n)},st.keyPress=function(e,t,n){return st.bind("keypress",e,t,n)},st.keyUp=function(e,t,n){return st.bind("keyup",e,t,n)},st.nodeChanged=function(e){return st.bind("nodechanged",e,!1,!0)},st.selectionChanged=function(e){return st.bind("selectionchanged",e,!1,!0)},it=function(t){var n=0,i=String.fromCharCode(t.which);if(!e(w).is("code")&&!e(w).parents("code").length)return st.emoticonsCache||(st.emoticonsCache=[],e.each(e.extend({},r.emoticons.more,r.emoticons.dropdown,r.emoticons.hidden),function(e,t){st.emoticonsCache[n++]=[e,o("emoticon",{key:e,url:t.url||t,tooltip:t.tooltip||e})]}),st.emoticonsCache.sort(function(e,t){return e[0].length-t[0].length}),st.longestEmoticonCode=st.emoticonsCache[st.emoticonsCache.length-1][0].length),st.getRangeHelper().raplaceKeyword(st.emoticonsCache,!0,!0,st.longestEmoticonCode,r.emoticonsCompat,i)?(r.emoticonsCompat&&(ht=c.find("img[data-sceditor-emoticon]")),/^\s$/.test(i)&&r.emoticonsCompat):void 0},ot=function(){if(ht.length){var t,n,i,o,r,s,a=st.currentBlockNode(),l=!1,u=/[^\s\xA0\u2002\u2003\u2009]+/;ht=e.map(ht,function(c){return c&&c.parentNode?e.contains(a,c)?(t=c.previousSibling,n=c.nextSibling,r=t.nodeValue,null===r&&(r=t.innerText||""),t&&u.test(t.nodeValue.slice(-1))||n&&u.test((n.nodeValue||"")[0])?(i=c.parentNode,o=v.cloneSelected(),s=o.startContainer,r+=e(c).data("sceditor-emoticon"),s===n?l=r.length+o.startOffset:s===a&&a.childNodes[o.startOffset]===n?l=r.length:s===t&&(l=o.startOffset),n&&3===n.nodeType||(n=i.insertBefore(i.ownerDocument.createTextNode(""),n)),n.insertData(0,r),i.removeChild(t),i.removeChild(c),l!==!1&&(o.setStart(n,l),o.collapse(!0),v.selectRange(o)),null):c):c:null})}},st.emoticons=function(t){return t||t===!1?(r.emoticonsEnabled=t,t?(c.keypress(it),st.sourceMode()||(v.saveRange(),E(c[0]),ht=c.find("img[data-sceditor-emoticon]"),v.restoreRange())):(c.find("img[data-sceditor-emoticon]").replaceWith(function(){return e(this).data("sceditor-emoticon")}),ht=[],c.unbind("keypress",it)),this):r.emoticonsEnabled},st.css=function(t){return S||(S=e('<style id="#inline" />').appendTo(f.find("head"))[0]),"string"!=typeof t?S.styleSheet?S.styleSheet.cssText:S.innerHTML:(S.styleSheet?S.styleSheet.cssText=t:S.innerHTML=t,this)},$=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,s=i[r]||String.fromCharCode(r).toLowerCase();return e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?s=o[r]:n[s]&&(s=n[s])),s&&(16>r||r>18)&&t.push(s),t=t.join("+"),pt[t]?pt[t].call(st):void 0},st.addShortcut=function(e,t){return e=e.toLowerCase(),pt[e]="string"==typeof t?function(){return M(a.find(".sceditor-button-"+t),st.commands[t]),!1
}:t,this},st.removeShortcut=function(e){return delete pt[e.toLowerCase()],this},z=function(n){var i,o,s,a,l;if(!e.sceditor.ie&&!r.disableBlockRemove&&8===n.which&&(a=v.selectedRange())&&(t.getSelection?(i=a.startContainer,o=a.startOffset):(i=a.parentElement(),s=f[0].selection.createRange(),s.moveToElementText(i),s.setEndPoint("EndToStart",a),o=s.text.length),0===o&&(l=rt()))){for(;i!==l;){for(;i.previousSibling;)if(i=i.previousSibling,3!==i.nodeType||i.nodeValue)return;if(!(i=i.parentNode))return}if(l&&!e(l).is("body"))return st.clearBlockFormatting(l),!1}},rt=function(){for(var t=w;!e.sceditor.dom.hasStyling(t);)if(!(t=t.parentNode)||e(t).is("body"))return;return t},st.clearBlockFormatting=function(t){return t=t||rt(),!t||e(t).is("body")?this:(v.saveRange(),m=null,t.className="",e(t).attr("style",""),e(t).is("p,div")||e.sceditor.dom.convertElement(t,"p"),v.restoreRange(),this)},_()},e.sceditor.ie=function(){var e,i=3,o=n.createElement("div"),r=o.getElementsByTagName("i");do o.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->";while(r[0]);return n.documentMode&&n.all&&t.atob&&(i=10),4===i&&n.documentMode&&(i=11),i>4?i:e}(),e.sceditor.ios=/iPhone|iPod|iPad| wosbrowser\//i.test(navigator.userAgent),e.sceditor.isWysiwygSupported=function(){var t,n,i=e('<div contenteditable="true">')[0].contentEditable,o="undefined"!=typeof i&&"inherit"!==i,r=navigator.userAgent;return o?(n=/Opera Mobi|Opera Mini/i.test(r),/Android/i.test(r)&&(n=!0,/Safari/.test(r)&&(t=/Safari\/(\d+)/.exec(r),n=t&&t[1]?t[1]<534:!0)),/ Silk\//i.test(r)&&(t=/AppleWebKit\/(\d+)/.exec(r),n=t&&t[1]?t[1]<534:!0),e.sceditor.ios&&(n=!/OS [5-9](_\d)+ like Mac OS X/i.test(r)),/fennec/i.test(r)&&(n=!1),/OneBrowser/i.test(r)&&(n=!1),"UCWEB"===navigator.vendor&&(n=!1),!n):!1}(),e.sceditor.regexEscape=function(e){return e.replace(/[\$\?\[\]\.\*\(\)\|\\]/g,"\\$&")},e.sceditor.escapeEntities=function(e){return e?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/ {2}/g," &nbsp;").replace(/\r\n|\r/g,"\n").replace(/\n/g,"<br />"):e},e.sceditor.locale={},e.sceditor.commands={bold:{exec:"bold",tooltip:"Bold",shortcut:"ctrl+b"},italic:{exec:"italic",tooltip:"Italic",shortcut:"ctrl+i"},underline:{exec:"underline",tooltip:"Underline",shortcut:"ctrl+u"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{exec:"justifyleft",tooltip:"Align left"},center:{exec:"justifycenter",tooltip:"Center"},right:{exec:"justifyright",tooltip:"Align right"},justify:{exec:"justifyfull",tooltip:"Justify"},font:{_dropDown:function(t,n,i){for(var r=t.opts.fonts.split(","),s=e("<div />"),a=function(){return i(e(this).data("font")),t.closeDropDown(!0),!1},l=0;l<r.length;l++)s.append(o("fontOpt",{font:r[l]},!0).click(a));t.createDropDown(n,"font-picker",s)},exec:function(t){var n=this;e.sceditor.command.get("font")._dropDown(n,t,function(e){n.execCommand("fontname",e)})},tooltip:"Font Name"},size:{_dropDown:function(t,n,i){for(var r=e("<div />"),s=function(n){i(e(this).data("size")),t.closeDropDown(!0),n.preventDefault()},a=1;7>=a;a++)r.append(o("sizeOpt",{size:a},!0).click(s));t.createDropDown(n,"fontsize-picker",r)},exec:function(t){var n=this;e.sceditor.command.get("size")._dropDown(n,t,function(e){n.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(t,n,i){var o,r,s,a,l={r:255,g:255,b:255},u=e("<div />"),c=t.opts.colors?t.opts.colors.split("|"):new Array(21),f=[],d=e.sceditor.command.get("color");if(!d._htmlCache){for(o=0;o<c.length;++o){for(a=c[o]?c[o].split(","):new Array(21),f.push('<div class="sceditor-color-column">'),r=0;r<a.length;++r)s=a[r]||"#"+l.r.toString(16)+l.g.toString(16)+l.b.toString(16),f.push('<a href="#" class="sceditor-color-option" style="background-color: '+s+'" data-color="'+s+'"></a>'),0===r%5?(l.g-=51,l.b=255):l.b-=51;f.push("</div>"),0===o%5?(l.r-=51,l.g=255,l.b=255):(l.g=255,l.b=255)}d._htmlCache=f.join("")}u.append(d._htmlCache).find("a").click(function(n){i(e(this).attr("data-color")),t.closeDropDown(!0),n.preventDefault()}),t.createDropDown(n,"color-picker",u)},exec:function(t){var n=this;e.sceditor.command.get("color")._dropDown(n,t,function(e){n.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=this,i=o("pastetext",{label:n._("Paste your text inside the following box:"),insert:n._("Insert")},!0);i.find(".button").click(function(e){t=i.find("#txt").val(),t&&n.wysiwygEditorInsertText(t),n.closeDropDown(!0),e.preventDefault()}),n.createDropDown(e,"pastetext",i)},tooltip:"Paste Text"},bulletlist:{exec:"insertunorderedlist",tooltip:"Bullet list"},orderedlist:{exec:"insertorderedlist",tooltip:"Numbered list"},table:{exec:function(t){var n=this,i=o("table",{rows:n._("Rows:"),cols:n._("Cols:"),insert:n._("Insert")},!0);i.find(".button").click(function(t){var o=i.find("#rows").val()-0,r=i.find("#cols").val()-0,s="<table>";if(!(1>o||1>r)){for(var a=0;o>a;a++){s+="<tr>";for(var l=0;r>l;l++)s+="<td>"+(e.sceditor.ie?"":"<br />")+"</td>";s+="</tr>"}s+="</table>",n.wysiwygEditorInsertHtml(s),n.closeDropDown(!0),t.preventDefault()}}),n.createDropDown(t,"inserttable",i)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{forceNewLineAfter:["code"],exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{exec:function(e){var t=this,n=o("image",{url:t._("URL:"),width:t._("Width (optional):"),height:t._("Height (optional):"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#image").val(),o=n.find("#width").val(),r=n.find("#height").val(),s="";o&&(s+=' width="'+o+'"'),r&&(s+=' height="'+r+'"'),i&&"http://"!==i&&t.wysiwygEditorInsertHtml("<img"+s+' src="'+i+'" />'),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertimage",n)},tooltip:"Insert an image"},email:{exec:function(e){var t=this,n=o("email",{label:t._("E-mail:"),insert:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#email").val();i&&(t.focus(),t.getRangeHelper().selectedHtml()?t.execCommand("createlink","mailto:"+i):t.wysiwygEditorInsertHtml('<a href="mailto:'+i+'">'+i+"</a>")),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertemail",n)},tooltip:"Insert an email"},link:{exec:function(e){var t=this,n=o("link",{url:t._("URL:"),desc:t._("Description (optional):"),ins:t._("Insert")},!0);n.find(".button").click(function(e){var i=n.find("#link").val(),o=n.find("#des").val();i&&"http://"!==i&&(t.focus(),!t.getRangeHelper().selectedHtml()||o?(o||(o=i),t.wysiwygEditorInsertHtml('<a href="'+i+'">'+o+"</a>")):t.execCommand("createlink",i)),t.closeDropDown(!0),e.preventDefault()}),t.createDropDown(e,"insertlink",n)},tooltip:"Insert a link"},unlink:{state:function(){var t=e(this.currentNode());return t.is("a")||t.parents("a").length>0?0:-1},exec:function(){var t=e(this.currentNode()),n=t.is("a")?t:t.parents("a").first();n.length&&n.replaceWith(n.contents())},tooltip:"Unlink"},quote:{forceNewLineAfter:["blockquote"],exec:function(t,n,i){var o="<blockquote>",r="</blockquote>";n?(i=i?"<cite>"+i+"</cite>":"",o=o+i+n+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r=e.sceditor.ie?"":"<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(t){var n=this,i=function(o){var r=n.opts.emoticonsCompat,s=n.getRangeHelper(),a=r&&" "!==s.getOuterText(!0,1)?" ":"",l=r&&" "!==s.getOuterText(!1,1)?" ":"",u=e("<div />"),c=e("<div />").appendTo(u),f=e.extend({},n.opts.emoticons.dropdown,o?n.opts.emoticons.more:{}),d=0;return e.each(f,function(){d++}),d=Math.sqrt(d),e.each(f,function(t,i){c.append(e("<img />").attr({src:i.url||i,alt:t,title:i.tooltip||t}).click(function(){return n.insert(a+e(this).attr("alt")+l,null,!1).closeDropDown(!0),!1})),c.children().length>=d&&(c=e("<div />").appendTo(u))}),o||u.append(e(n._('<a class="sceditor-more">{0}</a>',n._("More"))).click(function(){return n.createDropDown(t,"more-emoticons",i(!0)),!1})),u};n.createDropDown(t,"emoticons",i(!1))},txtExec:function(t){e.sceditor.command.get("emoticon").exec.call(this,t)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var i,r=o("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0);r.find(".button").click(function(t){var o=r.find("#link").val().replace("http://","");""!==o&&(i=o.match(/(?:v=|v\/|embed\/|youtu.be\/)(.{11})/),i&&(o=i[1]),/^[a-zA-Z0-9_\-]{11}$/.test(o)?n(o):alert("Invalid YouTube video")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",r)},exec:function(t){var n=this;e.sceditor.command.get("youtube")._dropDown(n,t,function(e){n.wysiwygEditorInsertHtml(o("youtube",{id:e}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),i=t.getMonth()+1,o=t.getDate();return 2e3>n&&(n=1900+n),10>i&&(i="0"+i),10>o&&(o="0"+o),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,i).replace(/day/i,o)},exec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},txtExec:function(){this.insertText(e.sceditor.command.get("date")._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes(),i=e.getSeconds();return 10>t&&(t="0"+t),10>n&&(n="0"+n),10>i&&(i="0"+i),t+":"+n+":"+i},exec:function(){this.insertText(e.sceditor.command.get("time")._time())},txtExec:function(){this.insertText(e.sceditor.command.get("time")._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),i=e(n);t.focus(),(n&&!i.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),i=e(n),n&&!i.is("body")))&&("ltr"===i.css("direction")?i.css("direction",""):i.css("direction","ltr"))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var t=this,n=t.getRangeHelper().getFirstBlockParent(),i=e(n);t.focus(),(n&&!i.is("body")||(t.execCommand("formatBlock","p"),n=t.getRangeHelper().getFirstBlockParent(),i=e(n),n&&!i.is("body")))&&("rtl"===i.css("direction")?i.css("direction",""):i.css("direction","rtl"))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize())},txtExec:function(){this.maximize(!this.maximize())},tooltip:"Maximize",shortcut:"ctrl+shift+m"},source:{exec:function(){this.toggleSourceMode()},txtExec:function(){this.toggleSourceMode()},tooltip:"View source",shortcut:"ctrl+shift+s"},ignore:{}},e.sceditor.rangeHelper=function(t,n){var i,o,r,s,a,l=!0,u="sceditor-start-marker",c="sceditor-end-marker",f="character",d=this;r=function(e,t){o=t||e.contentDocument||e.document,i=e,l=!!e.getSelection}(t,n),d.insertHTML=function(e,t){var n,i,r=d.selectedRange();if(t&&(e+=d.selectedHtml()+t),l){for(i=o.createElement("div"),n=o.createDocumentFragment(),i.innerHTML=e;i.firstChild;)n.appendChild(i.firstChild);d.insertNode(n)}else{if(!r)return!1;r.pasteHTML(e)}},d.insertNode=function(e,t){if(l){var n,i,r=o.createDocumentFragment(),s=d.selectedRange();if(!s)return!1;if(r.appendChild(e),t&&(r.appendChild(s.extractContents()),r.appendChild(t)),i=r.lastChild,!i)return;s.deleteContents(),s.insertNode(r),n=o.createRange(),n.setStartAfter(i),d.selectRange(n)}else d.insertHTML(e.outerHTML,t?t.outerHTML:null)},d.cloneSelected=function(){var e=d.selectedRange();return e?l?e.cloneRange():e.duplicate():void 0},d.selectedRange=function(){var e,t,n=l?i.getSelection():o.selection;if(n){if(n.getRangeAt&&n.rangeCount<=0){for(t=o.body;t.firstChild;)t=t.firstChild;e=o.createRange(),e.setStart(t,0),n.addRange(e)}return l&&(e=n.getRangeAt(0)),l||"Control"===n.type||(e=n.createRange()),a(e)?e:null}},a=function(e){var t;return e&&e.parentElement&&(t=e.parentElement())?t.ownerDocument===o:!0},d.hasSelection=function(){var e,t=l?i.getSelection():o.selection;return l||!t?t&&t.rangeCount>0:(e=t.createRange(),e&&a(e))},d.selectedHtml=function(){var e,t=d.selectedRange();return t?!l&&""!==t.text&&t.htmlText?t.htmlText:l?(e=o.createElement("div"),e.appendChild(t.cloneContents()),e.innerHTML):"":""},d.parentNode=function(){var e=d.selectedRange();return e?e.parentElement?e.parentElement():e.commonAncestorContainer:void 0},d.getFirstBlockParent=function(t){var n=function(t){return e.sceditor.dom.isInline(t,!0)?(t=t?t.parentNode:null,t?n(t):null):t};return n(t||d.parentNode())},d.insertNodeAt=function(e,t){var n=d.selectedRange(),i=d.cloneSelected();return i?(i.collapse(e),i.insertNode?i.insertNode(t):i.pasteHTML(t.outerHTML),d.selectRange(n),void 0):!1},s=function(e){d.removeMarker(e);var t=o.createElement("span");return t.id=e,t.style.lineHeight="0",t.style.display="none",t.className="sceditor-selection sceditor-ignore",t.innerHTML=" ",t},d.insertMarkers=function(){d.insertNodeAt(!0,s(u)),d.insertNodeAt(!1,s(c))},d.getMarker=function(e){return o.getElementById(e)},d.removeMarker=function(e){var t=d.getMarker(e);t&&t.parentNode.removeChild(t)},d.removeMarkers=function(){d.removeMarker(u),d.removeMarker(c)},d.saveRange=function(){d.insertMarkers()},d.selectRange=function(e){l?(i.getSelection().removeAllRanges(),i.getSelection().addRange(e)):e.select()},d.restoreRange=function(){var e,t=d.selectedRange(),n=d.getMarker(u),i=d.getMarker(c);return n&&i&&t?(l?(t=o.createRange(),t.setStartBefore(n),t.setEndAfter(i),d.selectRange(t)):(t=o.body.createTextRange(),e=o.body.createTextRange(),e.moveToElementText(n),t.setEndPoint("StartToStart",e),t.moveStart(f,0),e.moveToElementText(i),t.setEndPoint("EndToStart",e),t.moveEnd(f,0),d.selectRange(t)),d.removeMarkers(),void 0):!1},d.selectOuterText=function(e,t){var n=d.cloneSelected();return n?(n.collapse(!1),l?(n.setStart(n.startContainer,n.startOffset-e),n.setEnd(n.endContainer,n.endOffset+t)):(n.moveStart(f,0-e),n.moveEnd(f,t)),d.selectRange(n),void 0):!1},d.getOuterText=function(e,t){var n="",i=d.cloneSelected();return i?(i.collapse(!1),e?l?(n=i.startContainer.textContent.substr(0,i.startOffset),n=n.substr(Math.max(0,n.length-t))):(i.moveStart(f,0-t),n=i.text):l?n=i.startContainer.textContent.substr(i.startOffset,t):(i.moveEnd(f,t),n=i.text),n):""},d.raplaceKeyword=function(t,n,i,o,r,s){i||t.sort(function(e,t){return e.length-t.length});var a,u,c,f,p,h,m,g=t.length,v=o||t[g-1][0].length;if(r){if(!l)return!1;++v}for(a=d.getOuterText(!0,v),u=a+(null!=s?s:""),n&&(u+=d.getOuterText(!1,v));g--;)if(m=t[g][0],p=new RegExp("(?:[\\s    ])"+e.sceditor.regexEscape(m)+"(?=[\\s    ])"),h=a.length-1-m.length,r&&--h,h=Math.max(0,h),(c=r?u.substr(h).search(p):u.indexOf(m,h))>-1){if(r&&(c+=h+1),c>a.length||c+m.length+(r?1:0)<a.length)continue;return f=a.length-c,d.selectOuterText(f,m.length-f-(null!=s&&/^\S/.test(s)?1:0)),d.insertHTML(t[g][1]),!0}return!1},d.compare=function(e,t){return t||(t=d.selectedRange()),e&&t?l?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):a(e)&&a(t)&&0===e.compareEndPoints("EndToEnd",t)&&0===e.compareEndPoints("StartToStart",t):!e&&!t}},e.sceditor.dom={traverse:function(e,t,n,i,o){if(e)for(e=o?e.lastChild:e.firstChild;null!=e;){var r=o?e.previousSibling:e.nextSibling;if(!n&&t(e)===!1)return!1;if(!i&&this.traverse(e,t,n,i,o)===!1)return!1;if(n&&t(e)===!1)return!1;e=r}},rTraverse:function(e,t,n,i){this.traverse(e,t,n,i,!0)},parseHTML:function(t,i){var o=[],r=(i||n).createElement("div");return r.innerHTML=t,e.merge(o,r.childNodes),o},hasStyling:function(t){var n=e(t);return t&&(!n.is("p,div")||t.className||n.attr("style")||!e.isEmptyObject(n.data()))},convertElement:function(t,n){for(var i,o,r=t.attributes.length,s=t.ownerDocument.createElement(n);r--;)o=t.attributes[r],(!e.sceditor.ie||o.specified)&&(e.sceditor.ie<8&&/style/i.test(o.name)?t.style.cssText=t.style.cssText:s.setAttribute(o.name,o.value));for(;i=t.firstChild;)s.appendChild(i);return t.parentNode.replaceChild(s,t),s},blockLevelList:"|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|",isInline:function(t,n){return t&&1===t.nodeType?(t=t.tagName.toLowerCase(),"code"===t?!n:e.sceditor.dom.blockLevelList.indexOf("|"+t+"|")<0):!0},copyCSS:function(e,t){t.style.cssText=e.style.cssText+t.style.cssText},fixNesting:function(e){var t=this,n=function(e){for(;t.isInline(e.parentNode,!0);)e=e.parentNode;return e};t.traverse(e,function(e){if(1===e.nodeType&&!t.isInline(e,!0)&&t.isInline(e.parentNode,!0)){var i=n(e),o=i.parentNode,r=t.extractContents(i,e),s=e;t.copyCSS(i,s),o.insertBefore(r,i),o.insertBefore(s,i)}})},findCommonAncestor:function(t,n){return e(t).parents().has(e(n)).first()},getSibling:function(t,n){var i;return t?(i=t[n?"previousSibling":"nextSibling"])?i:e.sceditor.dom.getSibling(t.parentNode,n):null},removeWhiteSpace:function(t,n){for(var i,o,r,s,a,l,u,c,f=e.sceditor.dom.getSibling,d=e.sceditor.dom.isInline,p=t.firstChild,h=/[\t ]+/g,m=/[\t\n\r ]+/g;p;){if(l=p.nextSibling,i=p.nodeValue,o=p.nodeType,1===o&&p.firstChild&&(a=e(p).css("whiteSpace"),/pre(?:\-wrap)?$/i.test(a)||e.sceditor.dom.removeWhiteSpace(p,/line$/i.test(a))),3===o&&i){for(r=f(p),s=f(p,!0),c=s,u=!1;e(c).hasClass("sceditor-ignore");)c=f(c,!0);if(d(p)&&c){for(;c.lastChild;)c=c.lastChild;u=3===c.nodeType?/[\t\n\r ]$/.test(c.nodeValue):!d(c)}d(p)&&s&&d(s)&&!u||(i=i.replace(/^[\t\n\r ]+/,"")),d(p)&&r&&d(r)||(i=i.replace(/[\t\n\r ]+$/,"")),i.length?p.nodeValue=i.replace(n?h:m," "):t.removeChild(p)}p=l}},extractContents:function(e,t){var n=this,i=n.findCommonAncestor(e,t),o=i?i[0]:null,r=!1,s=!1;return function a(i){var o=e.ownerDocument.createDocumentFragment();return n.traverse(i,function(n){if(s||n===t&&r)return s=!0,!1;n===e&&(r=!0);var i,l;r?jQuery.contains(n,t)&&1===n.nodeType?(i=a(n),l=n.cloneNode(!1),l.appendChild(i),o.appendChild(l)):o.appendChild(n):jQuery.contains(n,e)&&1===n.nodeType&&(i=a(n),l=n.cloneNode(!1),l.appendChild(i),o.appendChild(l))},!1),o}(o)}},e.sceditor.plugins={},e.sceditor.PluginManager=function(t){var n=this,i=[],o=t,r=function(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)},s=function(e,t){e=[].slice.call(e);for(var n=i.length,s=r(e.shift());n--;)if(s in i[n]){if(t)return i[n][s].apply(o,e);i[n][s].apply(o,e)}};n.call=function(){s(arguments,!1)},n.callOnlyFirst=function(){return s(arguments,!0)},n.iter=function(e){return e=r(e),function(){var t=i.length;return{callNext:function(n){for(;t--;)if(i[t]&&e in i[t])return i[t].apply(o,n)},hasNext:function(){for(var n=t;n--;)if(i[n]&&e in i[n])return!0;return!1}}}()},n.hasHandler=function(e){var t=i.length;for(e=r(e);t--;)if(e in i[t])return!0;return!1},n.exsists=function(t){return t in e.sceditor.plugins?(t=e.sceditor.plugins[t],"function"==typeof t&&"object"==typeof t.prototype):!1},n.isRegistered=function(t){var o=i.length;if(!n.exsists(t))return!1;for(;o--;)if(i[o]instanceof e.sceditor.plugins[t])return!0;return!1},n.register=function(t){return n.exsists(t)?(t=new e.sceditor.plugins[t],i.push(t),"init"in t&&t.init.apply(o),!0):!1},n.deregister=function(t){var r,s=i.length,a=!1;if(!n.isRegistered(t))return!1;for(;s--;)i[s]instanceof e.sceditor.plugins[t]&&(r=i.splice(s,1)[0],a=!0,"destroy"in r&&r.destroy.apply(o));return a},n.destroy=function(){for(var e=i.length;e--;)"destroy"in i[e]&&i[e].destroy.apply(o);i=null,o=null}},e.sceditor.command={get:function(t){return e.sceditor.commands[t]||null},set:function(t,n){return t&&n?(n=e.extend(e.sceditor.commands[t]||{},n),n.remove=function(){e.sceditor.command.remove(t)},e.sceditor.commands[t]=n,this):!1},remove:function(t){return e.sceditor.commands[t]&&delete e.sceditor.commands[t],this}},e.sceditor.defaultOptions={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,paste,pastetext|bulletlist,orderedlist|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:null,locale:"en",charset:"utf-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,getHtmlHandler:null,getTextHandler:null,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,parserOptions:{},dropDownCss:{}},e.fn.sceditor=function(t){var n,i=[];return t=t||{},t.runWithoutWysiwygSupport||e.sceditor.isWysiwygSupported?(this.each(function(){n=this.jquery?this:e(this),n.parents(".sceditor-container").length>0||("state"===t?i.push(!!n.data("sceditor")):"instance"===t?i.push(n.data("sceditor")):n.data("sceditor")||new e.sceditor(this,t))}),i.length?1===i.length?i[0]:e(i):this):void 0}}(jQuery,window,document),function(e,t,n){"use strict";e.sceditor.BBCodeParser=function(t){if(!(this instanceof e.sceditor.BBCodeParser))return new e.sceditor.BBCodeParser(t);var i,o,r,s,a,l,u,c,f,d,p,h,m,g,v,y=this,b={open:"open",content:"content",newline:"newline",close:"close"},x=function(e,t,n,i,o,r){var s=this;s.type=e,s.name=t,s.val=n,s.attrs=i||{},s.children=o||[],s.closing=r||null};x.prototype={clone:function(e){var t=this;return new x(t.type,t.name,t.val,t.attrs,e?t.children:[],t.closing?t.closing.clone():null)},splitAt:function(t){var n,i=this,o=0,r=i.children.length;if("number"!=typeof object&&(t=e.inArray(t,i.children)),0>t||t>r)return null;for(;r--;)r>=t?o++:r=0;return n=i.clone(),n.children=i.children.splice(t,o),n}},i=function(){y.opts=e.extend({},e.sceditor.BBCodeParser.defaults,t),y.bbcodes=e.sceditor.plugins.bbcode.bbcodes},y.tokenize=function(e){var t,n,i,r=[],s=[{type:"close",regex:/^\[\/[^\[\]]+\]/},{type:"open",regex:/^\[[^\[\]]+\]/},{type:"newline",regex:/^(\r\n|\r|\n)/},{type:"content",regex:/^([^\[\r\n]+|\[)/}];s.reverse();e:for(;e.length;){for(i=s.length;i--;)if(n=s[i].type,(t=e.match(s[i].regex))&&t[0]){r.push(o(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(o(b.content,e)),e=""}return r},o=function(t,n){var i,o,s;return"open"===t&&(i=n.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))?(s=g(i[1]),i[2]&&(i[2]=e.trim(i[2]))&&(o=r(i[2]))):"close"===t&&(i=n.match(/\[\/([^\[\]]+)\]/))?s=g(i[1]):"newline"===t&&(s="#newline"),s&&("open"!==t&&"close"!==t||e.sceditor.plugins.bbcode.bbcodes[s])||(t="content",s="#"),new x(t,s,n,o)},r=function(t){var n,i=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,o=e.sceditor.plugins.bbcode.stripQuotes,r={};if("="===t.charAt(0)&&t.indexOf("=",1)<0)r.defaultattr=o(t.substr(1));else for("="===t.charAt(0)&&(t="defaultattr"+t);n=i.exec(t);)r[g(n[1])]=o(n[3])||n[4];return r},y.parse=function(e,t){var n=s(y.tokenize(e));return y.opts.fixInvalidChildren&&f(n),y.opts.removeEmptyTags&&c(n),y.opts.fixInvalidNesting&&l(n),a(n,null,t),y.opts.removeEmptyTags&&c(n),n},h=function(e,t,n){for(var i=n.length;i--;)if(n[i].type===t&&n[i].name===e)return!0;return!1},u=function(t,n){var i=t?y.bbcodes[t.name]:null,o=i?i.allowedChildren:null;return y.opts.fixInvalidChildren&&o?o&&e.inArray(n.name||"#",o)<0?!1:!0:!0},s=function(t){for(var n,i,o,r,s,a,l,u=[],c=[],f=[],d=function(){return v(f)},p=function(e){d()?d().children.push(e):c.push(e)},m=function(t){return d()&&(i=y.bbcodes[d().name])&&i.closedBy&&e.inArray(t,i.closedBy)>-1};n=t.shift();){switch(l=t[0],n.type){case b.open:m(n.name)&&f.pop(),p(n),i=y.bbcodes[n.name],i&&i.isSelfClosing||!i.closedBy&&!h(n.name,b.close,t)?i&&i.isSelfClosing||(n.type=b.content):f.push(n);break;case b.close:if(d()&&n.name!==d().name&&m("/"+n.name)&&f.pop(),d()&&n.name===d().name)d().closing=n,f.pop();else if(h(n.name,b.open,f)){for(;o=f.pop();){if(o.name===n.name){o.closing=n;break}r=o.clone(),u.length>1&&r.children.push(v(u)),u.push(r)}for(p(v(u)),s=u.length;s--;)f.push(u[s]);u.length=0}else n.type=b.content,p(n);break;case b.newline:d()&&l&&m((l.type===b.close?"/":"")+l.name)&&(l.type!==b.close||l.name!==d().name)&&(i=y.bbcodes[d().name],i&&i.breakAfter?f.pop():i&&i.isInline===!1&&y.opts.breakAfterBlock&&i.breakAfter!==!1&&f.pop()),p(n);break;default:p(n)}a=n}return c},a=function(e,t,n){var i,o,r,s,l,u,c,f,d=e.length,p=d;for(t&&(s=y.bbcodes[t.name]);p--;)if(i=e[p])if(i.type===b.newline){if(o=p>0?e[p-1]:null,r=d-1>p?e[p+1]:null,f=!1,!n&&s&&s.isSelfClosing!==!0&&(o?u||r||(s.isInline===!1&&y.opts.breakEndBlock&&s.breakEnd!==!1&&(f=!0),s.breakEnd&&(f=!0),u=f):(s.isInline===!1&&y.opts.breakStartBlock&&s.breakStart!==!1&&(f=!0),s.breakStart&&(f=!0))),o&&o.type===b.open&&(l=y.bbcodes[o.name])&&(n?l.isInline===!1&&(f=!0):(l.isInline===!1&&y.opts.breakAfterBlock&&l.breakAfter!==!1&&(f=!0),l.breakAfter&&(f=!0))),!n&&!c&&r&&r.type===b.open&&(l=y.bbcodes[r.name])&&(l.isInline===!1&&y.opts.breakBeforeBlock&&l.breakBefore!==!1&&(f=!0),l.breakBefore&&(f=!0),c=f,f)){e.splice(p,1);continue}f&&e.splice(p,1),c=!1}else i.type===b.open&&a(i.children,i,n)},l=function(t,n,i,o){var r,s,a,u,c,f,d=function(e){var t=y.bbcodes[e.name];return!t||t.isInline!==!1};for(n=n||[],o=o||t,s=0;s<t.length;s++)if((r=t[s])&&r.type===b.open){if(!d(r)&&i&&(a=v(n),f=a.splitAt(r),c=n.length>1?n[n.length-2].children:o,(u=e.inArray(a,c))>-1))return f.children.splice(e.inArray(r,f.children),1),c.splice(u+1,0,r,f),void 0;n.push(r),l(r.children,n,i||d(r),o),n.pop(r)}},f=function(e,t){for(var n,i,o=e.length;o--;)(n=e[o])&&(u(t,n)||(n.name=null,n.type=b.content,u(t,n)?(i=[o+1,0].concat(n.children),n.closing&&(n.closing.name=null,n.closing.type=b.content,i.push(n.closing)),o+=i.length-1,Array.prototype.splice.apply(e,i)):t.children.splice(o,1)),n.type===b.open&&f(n.children,n))},c=function(t){var n,i,o,r=t.length;for(o=function(e){for(var t=e.length;t--;){if(e[t].type===b.open)return!1;if(e[t].type===b.close)return!1;if(e[t].type===b.content&&e[t].val&&/\S|\u00A0/.test(e[t].val))return!1}return!0};r--;)(n=t[r])&&n.type===b.open&&(i=y.bbcodes[n.name],c(n.children),o(n.children)&&i&&!i.isSelfClosing&&!i.allowsEmpty&&t.splice.apply(t,e.merge([r,1],n.children)))},y.toHTML=function(e,t){return d(y.parse(e,t),!0)},d=function(t,i){var o,r,s,a,l,u,c,f,p=[];for(c=function(e){return(!e||("undefined"!=typeof e.isHtmlInline?e.isHtmlInline:e.isInline))!==!1};t.length>0;)if(o=t.shift()){if(o.type===b.open)f=o.children[o.children.length-1]||{},r=y.bbcodes[o.name],l=i&&c(r),s=d(o.children,!1),r&&r.html?(c(r)||!c(y.bbcodes[f.name])||r.isPreFormatted||r.skipLastLineBreak||e.sceditor.ie||(s+="<br />"),a=e.isFunction(r.html)?r.html.call(y,o,o.attrs,s):e.sceditor.plugins.bbcode.formatString(r.html,s)):a=o.val+s+(o.closing?o.closing.val:"");else{if(o.type===b.newline){if(!i){p.push("<br />");continue}u||(p.push("<div>"),(n.documentMode&&n.documentMode<8||e.sceditor.ie<8)&&p.push(" ")),e.sceditor.ie||p.push("<br />"),t.length||p.push("<br />"),p.push("</div>\n"),u=!1;continue}l=i,a=e.sceditor.escapeEntities(o.val)}l&&!u?(p.push("<div>"),u=!0):!l&&u&&(p.push("</div>\n"),u=!1),p.push(a)}return u&&p.push("</div>\n"),p.join("")},y.toBBCode=function(e,t){return p(y.parse(e,t))},p=function(t){for(var n,i,o,r,s,a,l,u,c,f,d=[];t.length>0;)if(n=t.shift())if(o=y.bbcodes[n.name],r=!(!o||o.isInline!==!1),s=o&&o.isSelfClosing,l=r&&y.opts.breakBeforeBlock&&o.breakBefore!==!1||o&&o.breakBefore,u=r&&!s&&y.opts.breakStartBlock&&o.breakStart!==!1||o&&o.breakStart,c=r&&y.opts.breakEndBlock&&o.breakEnd!==!1||o&&o.breakEnd,f=r&&y.opts.breakAfterBlock&&o.breakAfter!==!1||o&&o.breakAfter,a=(o?o.quoteType:null)||y.opts.quoteType||e.sceditor.BBCodeParser.QuoteType.auto,o||n.type!==b.open)if(n.type===b.open){if(l&&d.push("\n"),d.push("["+n.name),n.attrs){n.attrs.defaultattr&&(d.push("="+m(n.attrs.defaultattr,a,"defaultattr")),delete n.attrs.defaultattr);for(i in n.attrs)n.attrs.hasOwnProperty(i)&&d.push(" "+i+"="+m(n.attrs[i],a,i))}d.push("]"),u&&d.push("\n"),n.children&&d.push(p(n.children)),s||o.excludeClosing||(c&&d.push("\n"),d.push("[/"+n.name+"]")),f&&d.push("\n"),n.closing&&s&&d.push(n.closing.val)}else d.push(n.val);else d.push(n.val),n.children&&d.push(p(n.children)),n.closing&&d.push(n.closing.val);return d.join("")},m=function(t,n,i){var o=e.sceditor.BBCodeParser.QuoteType,r=/\s|=/.test(t);return e.isFunction(n)?n(t,i):n===o.never||n===o.auto&&!r?t:'"'+t.replace("\\","\\\\").replace('"','\\"')+'"'},v=function(e){return e.length?e[e.length-1]:null},g=function(e){return e.toLowerCase()},i()},e.sceditor.BBCodeParser.QuoteType={always:1,never:2,auto:3},e.sceditor.BBCodeParser.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:e.sceditor.BBCodeParser.QuoteType.auto},e.sceditorBBCodePlugin=e.sceditor.plugins.bbcode=function(){var t,i,o,r,s,a,l,u=this;r=e.sceditor.plugins.bbcode.formatString,u.bbcodes=e.sceditor.plugins.bbcode.bbcodes,u.stripQuotes=e.sceditor.plugins.bbcode.stripQuotes;var c={},f={},d={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]},p={};u.init=function(){u.opts=this.opts,t(),a(this),this.toBBCode=u.signalToSource,this.fromBBCode=u.signalToWysiwyg},a=function(t){var n=e.sceditor.command.get,i={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;n("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(e){var t=this;n("size")._dropDown(t,e,function(e){t.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(e){var t=this;n("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:function(n,i){var o="";e.each(i.split(/\r?\n/),function(){o+=(o?"\n":"")+"[li]"+this+"[/li]"}),t.insertText("[ul]\n"+o+"\n[/ul]")}},orderedlist:{txtExec:function(n,i){var o="";e.each(i.split(/\r?\n/),function(){o+=(o?"\n":"")+"[li]"+this+"[/li]"
}),e.sceditor.plugins.bbcode.bbcode.get(""),t.insertText("[ol]\n"+o+"\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var n=prompt(this._("Enter the image URL:"),t);n&&this.insertText("[img]"+n+"[/img]")}},email:{txtExec:function(e,t){var n=t&&t.indexOf("@")>-1?null:t,i=prompt(this._("Enter the e-mail address:"),n?"":t),o=prompt(this._("Enter the displayed text:"),n||i)||i;i&&this.insertText("[email="+i+"]"+o+"[/email]")}},link:{txtExec:function(e,t){var n=t&&t.indexOf("http://")>-1?null:t,i=prompt(this._("Enter URL:"),n?"http://":t),o=prompt(this._("Enter the displayed text:"),n||i)||i;i&&this.insertText("[url="+i+"]"+o+"[/url]")}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;n("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}};t.commands=e.extend(!0,{},i,t.commands)},t=function(){e.each(u.bbcodes,function(t){u.bbcodes[t].tags&&e.each(u.bbcodes[t].tags,function(e,n){var i=u.bbcodes[t].isInline===!1;c[e]=c[e]||{},c[e][i]=c[e][i]||{},c[e][i][t]=n}),u.bbcodes[t].styles&&e.each(u.bbcodes[t].styles,function(e,n){var i=u.bbcodes[t].isInline===!1;f[i]=f[i]||{},f[i][e]=f[i][e]||{},f[i][e][t]=n})})},s=function(t,n){var i,o,r,s,a,l=t.style;return l?(p[n]||(p[n]=e.camelCase(n)),a=p[n],"text-align"===n?(i=e(t),r=l.direction,s=l[a]||i.css(n),i.parent().css(n)===s||"block"!==i.css("display")||i.is("hr")||i.is("th")||(o=s),r&&o&&(/right/i.test(o)&&"rtl"===r||/left/i.test(o)&&"ltr"===r)?null:o):l[a]):null},i=function(t,n,i){var o;return i=!!i,f[i]?(e.each(f[i],function(i,a){o=s(t[0],i),o&&s(t.parent()[0],i)!==o&&e.each(a,function(i,s){(!s||e.inArray(o.toString(),s)>-1)&&(n=e.isFunction(u.bbcodes[i].format)?u.bbcodes[i].format.call(u,t,n):r(u.bbcodes[i].format,n))})}),n):n},o=function(t,n,i){var o,s=t[0],a=s.nodeName.toLowerCase();if(i=!!i,c[a]&&c[a][i]&&e.each(c[a][i],function(i,s){(!s||(o=!1,e.each(s,function(n,i){return!t.attr(n)||i&&e.inArray(t.attr(n),i)<0?void 0:(o=!0,!1)}),o))&&(n=e.isFunction(u.bbcodes[i].format)?u.bbcodes[i].format.call(u,t,n):r(u.bbcodes[i].format,n))}),i&&(!e.sceditor.dom.isInline(s,!0)||"br"===a)){for(var l=s.parentNode,f=l.lastChild,d=s.previousSibling,p=e.sceditor.dom.isInline(l,!0);d&&e(d).hasClass("sceditor-ignore");)d=d.previousSibling;for(;e(f).hasClass("sceditor-ignore");)f=f.previousSibling;(p||f!==s||"li"===a||"br"===a&&e.sceditor.ie)&&(n+="\n"),"br"!==a&&d&&"br"!==d.nodeName.toLowerCase()&&e.sceditor.dom.isInline(d,!0)&&(n="\n"+n)}return n},u.signalToSource=function(t,i){var o,r,s=new e.sceditor.BBCodeParser(u.opts.parserOptions);return i||("string"==typeof t?(o=e("<div />").css("visibility","hidden").appendTo(n.body).html(t),i=o):i=e(t)),i&&i.jquery?(e.sceditor.dom.removeWhiteSpace(i[0]),r=u.elementToBbcode(i),o&&o.remove(),r=s.toBBCode(r,!0),u.opts.bbcodeTrim&&(r=e.trim(r)),r):""},u.elementToBbcode=function(t){return function n(t,r){var s="";return e.sceditor.dom.traverse(t,function(t){var a=e(t),l="",u=t.nodeType,c=t.nodeName.toLowerCase(),f=d[c],p=t.firstChild,h=!0;if("object"==typeof r&&(h=e.inArray(c,r)>-1,a.is("img")&&a.data("sceditor-emoticon")&&(h=!0),h||(f=r)),3===u||1===u)if(1===u){if(a.hasClass("sceditor-ignore"))return;if(a.hasClass("sceditor-nlf")&&(!p||!e.sceditor.ie&&1===t.childNodes.length&&/br/i.test(p.nodeName)))return;"iframe"!==c&&(l=n(t,f)),h?("code"!==c&&(l=i(a,l),l=o(a,l),l=i(a,l,!0)),s+=o(a,l,!0)):s+=l}else!t.wholeText||t.previousSibling&&3===t.previousSibling.nodeType?t.wholeText||(s+=t.nodeValue):s+=0===a.parents("code").length?t.wholeText.replace(/ +/g," "):t.wholeText},!1,!0),s}(t[0])},u.signalToWysiwyg=function(t,n){var i=new e.sceditor.BBCodeParser(u.opts.parserOptions),o=i.toHTML(u.opts.bbcodeTrim?e.trim(t):t);return n?l(o):o},l=function(t){var i,o,r,s=e("<div />").hide().appendTo(n.body),a=s[0];return r=function(t,i){if(!e.sceditor.dom.hasStyling(t)){if(e.sceditor.ie||1!==t.childNodes.length||!e(t.firstChild).is("br"))for(;o=t.firstChild;)a.insertBefore(o,t);if(i){var r=a.lastChild;t!==r&&e(r).is("div")&&t.nextSibling===r&&a.insertBefore(n.createElement("br"),t)}a.removeChild(t)}},a.innerHTML=t.replace(/<\/div>\n/g,"</div>"),(i=a.firstChild)&&e(i).is("div")&&r(i,!0),(i=a.lastChild)&&e(i).is("div")&&r(i),a=a.innerHTML,s.remove(),a}},e.sceditor.plugins.bbcode.stripQuotes=function(e){return e?e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2"):e},e.sceditor.plugins.bbcode.formatString=function(){var e=arguments;return e[0].replace(/\{(\d+)\}/g,function(t,n){return"undefined"!=typeof e[n-0+1]?e[n-0+1]:"{"+n+"}"})};var i=e.sceditor.plugins.bbcode.normaliseColour=function(e){var t,n;return n=function(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16),e.length<2?"0"+e:e)},e=e||"#000",(t=e.match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+n(t[1])+n(t[2]-0)+n(t[3]-0):(t=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e};e.sceditor.plugins.bbcode.bbcodes={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n;return"font"===e[0].nodeName.toLowerCase()&&(n=e.attr("face"))||(n=e.css("font-family")),"[font="+this.stripQuotes(n)+"]"+t+"[/font]"},html:function(e,t,n){return'<font face="'+t.defaultattr+'">'+n+"</font>"}},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=e.attr("size"),i=1;return n||(n=e.css("fontSize")),n.indexOf("px")>-1?(n=n.replace("px","")-0,n>12&&(i=2),n>15&&(i=3),n>17&&(i=4),n>23&&(i=5),n>31&&(i=6),n>47&&(i=7)):i=n,"[size="+i+"]"+t+"[/size]"},html:function(e,t,n){return'<font size="'+t.defaultattr+'">'+n+"</font>"}},color:{tags:{font:{color:null}},styles:{color:null},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n,o=e[0];return"font"===o.nodeName.toLowerCase()&&(n=e.attr("color"))||(n=o.style.color||e.css("color")),"[color="+i(n)+"]"+t+"[/color]"},html:function(e,t,n){return'<font color="'+i(t.defaultattr)+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},table:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<table>{0}</table>"},tr:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<tr>{0}</tr>"},th:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<th>{0}</th>"},td:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<td>{0}</td>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return e.data("sceditor-emoticon")+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n,i,o="",r=e[0],s=function(e){return r.style?r.style[e]:null};return e.attr("data-sceditor-emoticon")?t:(n=e.attr("width")||s("width"),i=e.attr("height")||s("height"),(r.complete&&(n||i)||n&&i)&&(o="="+e.width()+"x"+e.height()),"[img"+o+"]"+e.attr("src")+"[/img]")},html:function(e,t,n){var i,o="";return"undefined"!=typeof t.width&&(o+=' width="'+t.width+'"'),"undefined"!=typeof t.height&&(o+=' height="'+t.height+'"'),t.defaultattr&&(i=t.defaultattr.split(/x/i),o=' width="'+i[0]+'"'+' height="'+(2===i.length?i[1]:i[0])+'"'),"<img"+o+' src="'+n+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(e,t){var n=e.attr("href");return"mailto:"===n.substr(0,7)?'[email="'+n.substr(7)+'"]'+t+"[/email]":"[url="+decodeURI(n)+"]"+t+"[/url]"},html:function(e,t,n){return'<a href="'+encodeURI(t.defaultattr||n)+'">'+n+"</a>"}},email:{quoteType:e.sceditor.BBCodeParser.QuoteType.never,html:function(e,t,n){return'<a href="mailto:'+(t.defaultattr||n)+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:e.sceditor.BBCodeParser.QuoteType.never,format:function(t,n){var i="",o=e(t),r=o.children("cite").first();return(1===r.length||o.data("author"))&&(i=r.text()||o.data("author"),o.data("author",i),r.remove(),n=this.elementToBbcode(e(t)),i="="+i,o.prepend(r)),"[quote"+i+"]"+n+"[/quote]"},html:function(e,t,n){return t.defaultattr&&(n="<cite>"+t.defaultattr+"</cite>"+n),"<blockquote>"+n+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return e=e.attr("data-youtube-id"),e?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" src="http://www.youtube.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" frameborder="0" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}},e.sceditor.plugins.bbcode.bbcode={get:function(t){return e.sceditor.plugins.bbcode.bbcodes[t]||null},set:function(t,n){return t&&n?(n=e.extend(e.sceditor.plugins.bbcode.bbcodes[t]||{},n),n.remove=function(){e.sceditor.plugins.bbcode.bbcode.remove(t)},e.sceditor.plugins.bbcode.bbcodes[t]=n,this):!1},rename:function(e,t){return this.hasOwnProperty(e)?(this[t]=this[e],this.remove(e),this):!1},remove:function(t){return e.sceditor.plugins.bbcode.bbcodes[t]&&delete e.sceditor.plugins.bbcode.bbcodes[t],this}},e.fn.sceditorBBCodePlugin=function(t){return t=t||{},e.isPlainObject(t)&&(t.plugins=(t.plugins?t.plugins:"")+"bbcode"),this.sceditor(t)}}(jQuery,window,document);var txt="";function copyQ(e){txt="";if(document.getSelection){txt=document.getSelection()}else if(document.selection){txt=document.selection.createRange().text}txt="[quote="+e+"]"+txt+"[/quote]\n"}function insertAtCaret(e,t){if(document.all){if(e.createTextRange&&e.caretPos&&!window.opera){var n=e.caretPos;n.text=n.text.charAt(n.text.length-1)==" "?t+" ":t}else{e.value+=t}}else{if(e.selectionStart){var i=e.selectionStart;var o=e.selectionEnd;var r=e.value.substring(0,i);var s=e.value.substring(o,e.value.length);e.value=r+t+s;e.selectionStart=e.selectionEnd=i+t.length}else{e.value+=t}}}function pasteQ(){if(txt!=""&&document.forms["post"]["body"])insertAtCaret(document.forms["post"]["body"],txt)}function pasteN(e){if(e!=""&&document.forms["post"]["body"])insertAtCaret(document.forms["post"]["body"],"[b]"+e+"[/b]\n")}mySettings={previewParserPath:"/forum/preview/",markupSet:[{name:"Bold",key:"B",openWith:"[b]",closeWith:"[/b]"},{name:"Italic",key:"I",openWith:"[i]",closeWith:"[/i]"},{name:"Underline",key:"U",openWith:"[u]",closeWith:"[/u]"},{name:"Stroke",key:"S",openWith:"[s]",closeWith:"[/s]"},{separator:"---------------"},{name:"Picture",key:"P",replaceWith:"[img][![Url]!][/img]"},{name:"Link",key:"L",openWith:"[url=[![Url]!]]",closeWith:"[/url]",placeHolder:"Your text to link here..."},{separator:"---------------"},{name:"Size",key:"S",openWith:"",closeWith:"",dropMenu:[{name:"Big",openWith:"[size 32]",closeWith:"[/size]"},{name:"Small",openWith:"[size 10]",closeWith:"[/size]"}]},{separator:"---------------"},{name:"Bulleted list",openWith:"[list]\n",closeWith:"\n[/list]"},{name:"Numeric list",openWith:"[list=[![Starting number]!]]\n",closeWith:"\n[/list]"},{name:"List item",openWith:"[*] "},{separator:"---------------"},{name:"Quotes",openWith:"[quote]",closeWith:"[/quote]"},{name:"Code",openWith:"[code]",closeWith:"[/code]"},{name:"Smiles",openWith:"",closeWith:"",dropMenu:[{name:"Smile",openWith:":)"},{name:"Neutral",openWith:":|"},{name:"Sad",openWith:":("},{name:"Big smile",openWith:":D"},{name:"Yikes",openWith:":o"},{name:"Wink",openWith:";)"},{name:"Hmm",openWith:":/"},{name:"Tongue",openWith:":P"},{name:"Lol",openWith:":lol:"},{name:"Mad",openWith:":mad:"},{name:"Roll",openWith:":rolleyes:"},{name:"Cool",openWith:":cool:"}]},{separator:"---------------"},{name:"Clean",className:"clean",replaceWith:function(e){return e.selection.replace(/\[(.*?)\]/g,"")}},{name:"Preview",className:"preview",call:"preview"}]};!function(e,t){"use strict";var n=null;function i(n,i){this.setupOptions={url:n||null,flashVersion:8,debugMode:true,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:true,noSWFCache:false,idPrefix:"sound"};this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.movieID="sm2-container";this.id=i||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20130512";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var o,r=this,s=null,a=null,l="soundManager",u=l+": ",c="HTML5::",f,d=navigator.userAgent,p=e.location.href.toString(),h=document,m,g,v,y,b=[],x=true,w,k=false,T=false,C=false,S=false,_=false,E,M=0,D,O,N,L,P,H,A,I,R,F,B,W,j,$,z,q,U,X,V,K,Q,Y,J=["log","info","warn","error"],G=8,Z,et,tt,nt=null,it=null,ot,rt,st,at,lt,ut,ct,ft,dt,pt=false,ht=false,mt,gt,vt,yt=0,bt=null,xt,wt=[],kt,Tt=null,Ct,St,_t,Et,Mt,Dt,Ot,Nt,Lt=Array.prototype.slice,Pt=false,Ht,At,It,Rt,Ft,Bt,Wt,jt,$t=0,zt=d.match(/(ipad|iphone|ipod)/i),qt=d.match(/android/i),Ut=d.match(/msie/i),Xt=d.match(/webkit/i),Vt=d.match(/safari/i)&&!d.match(/chrome/i),Kt=d.match(/opera/i),Qt=d.match(/firefox/i),Yt=d.match(/(mobile|pre\/|xoom)/i)||zt||qt,Jt=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&Vt&&!d.match(/silk/i)&&d.match(/OS X 10_6_([3-7])/i),Gt=e.console!==t&&console.log!==t,Zt=h.hasFocus!==t?h.hasFocus():null,en=Vt&&(h.hasFocus===t||!h.hasFocus()),tn=!en,nn=/(mp3|mp4|mpa|m4a|m4b)/i,on=1e3,rn="about:blank",sn=h.location?h.location.protocol.match(/http/i):null,an=!sn?"http:/"+"/":"",ln=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,un=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],cn=new RegExp("\\.("+un.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!sn;at={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};this.hasHTML5=function(){try{return Audio!==t&&(Kt&&opera!==t&&opera.version()<10?new Audio(null):new Audio).canPlayType!==t}catch(e){return false}}();this.setup=function(e){var n=!r.url;if(e!==t&&C&&Tt&&r.ok()&&(e.flashVersion!==t||e.url!==t||e.html5Test!==t)){ft(ot("setupLate"))}N(e);if(e){if(n&&U&&e.url!==t){r.beginDelayedInit()}if(!U&&e.url!==t&&h.readyState==="complete"){setTimeout(z,1)}}return r};this.ok=function(){return Tt?C&&!S:r.useHTML5Audio&&r.hasHTML5};this.supported=this.ok;this.getMovie=function(t){return f(t)||h[t]||e[t]};this.createSound=function(e,n){var i,s,u,c=null;i=l+".createSound(): ";s=i+ot(!C?"notReady":"notOK");if(!C||!r.ok()){ft(s);return false}if(n!==t){e={id:e,url:n}}u=O(e);u.url=xt(u.url);if(u.id===undefined){u.id=r.setupOptions.idPrefix+$t++}if(u.id.toString().charAt(0).match(/^[0-9]$/)){r._wD(i+ot("badID",u.id),2)}r._wD(i+u.id+(u.url?" ("+u.url+")":""),1);if(dt(u.id,true)){r._wD(i+u.id+" exists",1);return r.sounds[u.id]}function f(){u=ut(u);r.sounds[u.id]=new o(u);r.soundIDs.push(u.id);return r.sounds[u.id]}if(St(u)){c=f();r._wD(u.id+": Using HTML5");c._setup_html5(u)}else{if(r.html5Only){r._wD(u.id+": No HTML5 support for this sound, and no Flash. Exiting.");return f()}if(r.html5.usingFlash&&u.url&&u.url.match(/data\:/i)){r._wD(u.id+": data: URIs not supported via Flash. Exiting.");return f()}if(y>8){if(u.isMovieStar===null){u.isMovieStar=!!(u.serverURL||(u.type?u.type.match(ln):false)||u.url&&u.url.match(cn))}if(u.isMovieStar){r._wD(i+"using MovieStar handling");if(u.loops>1){E("noNSLoop")}}}u=ct(u,i);c=f();if(y===8){a._createSound(u.id,u.loops||1,u.usePolicyFile)}else{a._createSound(u.id,u.url,u.usePeakData,u.useWaveformData,u.useEQData,u.isMovieStar,u.isMovieStar?u.bufferTime:false,u.loops||1,u.serverURL,u.duration||null,u.autoPlay,true,u.autoLoad,u.usePolicyFile);if(!u.serverURL){c.connected=true;if(u.onconnect){u.onconnect.apply(c)}}}if(!u.serverURL&&(u.autoLoad||u.autoPlay)){c.load(u)}}if(!u.serverURL&&u.autoPlay){c.play()}return c};this.destroySound=function(e,t){if(!dt(e)){return false}var n=r.sounds[e],i;n._iO={};n.stop();n.unload();for(i=0;i<r.soundIDs.length;i++){if(r.soundIDs[i]===e){r.soundIDs.splice(i,1);break}}if(!t){n.destruct(true)}n=null;delete r.sounds[e];return true};this.load=function(e,t){if(!dt(e)){return false}return r.sounds[e].load(t)};this.unload=function(e){if(!dt(e)){return false}return r.sounds[e].unload()};this.onPosition=function(e,t,n,i){if(!dt(e)){return false}return r.sounds[e].onposition(t,n,i)};this.onposition=this.onPosition;this.clearOnPosition=function(e,t,n){if(!dt(e)){return false}return r.sounds[e].clearOnPosition(t,n)};this.play=function(e,t){var n=null,i=t&&!(t instanceof Object);if(!C||!r.ok()){ft(l+".play(): "+ot(!C?"notReady":"notOK"));return false}if(!dt(e,i)){if(!i){return false}if(i){t={url:t}}if(t&&t.url){r._wD(l+'.play(): Attempting to create "'+e+'"',1);t.id=e;n=r.createSound(t).play()}}else if(i){t={url:t}}if(n===null){n=r.sounds[e].play(t)}return n};this.start=this.play;this.setPosition=function(e,t){if(!dt(e)){return false}return r.sounds[e].setPosition(t)};this.stop=function(e){if(!dt(e)){return false}r._wD(l+".stop("+e+")",1);return r.sounds[e].stop()};this.stopAll=function(){var e;r._wD(l+".stopAll()",1);for(e in r.sounds){if(r.sounds.hasOwnProperty(e)){r.sounds[e].stop()}}};this.pause=function(e){if(!dt(e)){return false}return r.sounds[e].pause()};this.pauseAll=function(){var e;for(e=r.soundIDs.length-1;e>=0;e--){r.sounds[r.soundIDs[e]].pause()}};this.resume=function(e){if(!dt(e)){return false}return r.sounds[e].resume()};this.resumeAll=function(){var e;for(e=r.soundIDs.length-1;e>=0;e--){r.sounds[r.soundIDs[e]].resume()}};this.togglePause=function(e){if(!dt(e)){return false}return r.sounds[e].togglePause()};this.setPan=function(e,t){if(!dt(e)){return false}return r.sounds[e].setPan(t)};this.setVolume=function(e,t){if(!dt(e)){return false}return r.sounds[e].setVolume(t)};this.mute=function(e){var t=0;if(e instanceof String){e=null}if(!e){r._wD(l+".mute(): Muting all sounds");for(t=r.soundIDs.length-1;t>=0;t--){r.sounds[r.soundIDs[t]].mute()}r.muted=true}else{if(!dt(e)){return false}r._wD(l+'.mute(): Muting "'+e+'"');return r.sounds[e].mute()}return true};this.muteAll=function(){r.mute()};this.unmute=function(e){var t;if(e instanceof String){e=null}if(!e){r._wD(l+".unmute(): Unmuting all sounds");for(t=r.soundIDs.length-1;t>=0;t--){r.sounds[r.soundIDs[t]].unmute()}r.muted=false}else{if(!dt(e)){return false}r._wD(l+'.unmute(): Unmuting "'+e+'"');return r.sounds[e].unmute()}return true};this.unmuteAll=function(){r.unmute()};this.toggleMute=function(e){if(!dt(e)){return false}return r.sounds[e].toggleMute()};this.getMemoryUse=function(){var e=0;if(a&&y!==8){e=parseInt(a._getMemoryUse(),10)}return e};this.disable=function(n){var i;if(n===t){n=false}if(S){return false}S=true;E("shutdown",1);for(i=r.soundIDs.length-1;i>=0;i--){Z(r.sounds[r.soundIDs[i]])}D(n);Nt.remove(e,"load",A);return true};this.canPlayMIME=function(e){var t;if(r.hasHTML5){t=_t({type:e})}if(!t&&Tt){t=e&&r.ok()?!!((y>8?e.match(ln):null)||e.match(r.mimePattern)):null}return t};this.canPlayURL=function(e){var t;if(r.hasHTML5){t=_t({url:e})}if(!t&&Tt){t=e&&r.ok()?!!e.match(r.filePattern):null}return t};this.canPlayLink=function(e){if(e.type!==t&&e.type){if(r.canPlayMIME(e.type)){return true}}return r.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e){return null}var n=r.sounds[e];if(!n&&!t){r._wD(l+'.getSoundById(): Sound "'+e+'" not found.',2)}return n};this.onready=function(t,n){var i="onready",o=false;if(typeof t==="function"){if(C){r._wD(ot("queue",i))}if(!n){n=e}P(i,t,n);H();o=true}else{throw ot("needFunction",i)}return o};this.ontimeout=function(t,n){var i="ontimeout",o=false;if(typeof t==="function"){if(C){r._wD(ot("queue",i))}if(!n){n=e}P(i,t,n);H({type:i});o=true}else{throw ot("needFunction",i)}return o};this._writeDebug=function(e,n){var i="soundmanager-debug",o,s;if(!r.debugMode){return false}if(Gt&&r.useConsole){if(n&&typeof n==="object"){console.log(e,n)}else if(J[n]!==t){console[J[n]](e)}else{console.log(e)}if(r.consoleOnly){return true}}o=f(i);if(!o){return false}s=h.createElement("div");if(++M%2===0){s.className="sm2-alt"}if(n===t){n=0}else{n=parseInt(n,10)}s.appendChild(h.createTextNode(e));if(n){if(n>=2){s.style.fontWeight="bold"}if(n===3){s.style.color="#ff3333"}}o.insertBefore(s,o.firstChild);o=null;return true};if(p.indexOf("sm2-debug=alert")!==-1){this._writeDebug=function(t){e.alert(t)}}this._wD=this._writeDebug;this._debug=function(){var e,t;E("currentObj",1);for(e=0,t=r.soundIDs.length;e<t;e++){r.sounds[r.soundIDs[e]]._debug()}};this.reboot=function(t,n){if(r.soundIDs.length){r._wD("Destroying "+r.soundIDs.length+" SMSound object"+(r.soundIDs.length!==1?"s":"")+"...")}var i,o,s;for(i=r.soundIDs.length-1;i>=0;i--){r.sounds[r.soundIDs[i]].destruct()}if(a){try{if(Ut){it=a.innerHTML}nt=a.parentNode.removeChild(a)}catch(u){E("badRemove",2)}}it=nt=Tt=a=null;r.enabled=U=C=pt=ht=k=T=S=Pt=r.swfLoaded=false;r.soundIDs=[];r.sounds={};$t=0;if(!t){for(i in b){if(b.hasOwnProperty(i)){for(o=0,s=b[i].length;o<s;o++){b[i][o].fired=false}}}}else{b=[]}if(!n){r._wD(l+": Rebooting...")}r.html5={usingFlash:null};r.flash={};r.html5Only=false;r.ignoreFlash=false;e.setTimeout(function(){$();if(!n){r.beginDelayedInit()}},20);return r};this.reset=function(){E("reset");return r.reboot(true,true)};this.getMoviePercent=function(){return a&&"PercentLoaded"in a?a.PercentLoaded():null};this.beginDelayedInit=function(){_=true;z();setTimeout(function(){if(ht){return false}V();j();ht=true;return true},20);I()};this.destruct=function(){r._wD(l+".destruct()");r.disable(true)};o=function(e){var n=this,i,o,l,u,c,f,d=false,p=[],h=0,m,g,v=null,b,x;b={duration:null,time:null};this.id=e.id;this.sID=this.id;this.url=e.url;this.options=O(e);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;x=this.url?false:true;this.id3={};this._debug=function(){r._wD(n.id+": Merged options:",n.options)};this.load=function(e){var i=null,o;if(e!==t){n._iO=O(e,n.options)}else{e=n.options;n._iO=e;if(v&&v!==n.url){E("manURL");n._iO.url=n.url;n.url=null}}if(!n._iO.url){n._iO.url=n.url}n._iO.url=xt(n._iO.url);n.instanceOptions=n._iO;o=n._iO;r._wD(n.id+": load ("+o.url+")");if(!o.url&&!n.url){r._wD(n.id+": load(): url is unassigned. Exiting.",2);return n}if(!n.isHTML5&&y===8&&!n.url&&!o.autoPlay){r._wD(n.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1)}if(o.url===n.url&&n.readyState!==0&&n.readyState!==2){E("onURL",1);if(n.readyState===3&&o.onload){jt(n,function(){o.onload.apply(n,[!!n.duration])})}return n}n.loaded=false;n.readyState=1;n.playState=0;n.id3={};if(St(o)){i=n._setup_html5(o);if(!i._called_load){n._html5_canplay=false;if(n.url!==o.url){r._wD(E("manURL")+": "+o.url);n._a.src=o.url;n.setPosition(0)}n._a.autobuffer="auto";n._a.preload="auto";n._a._called_load=true;if(o.autoPlay){n.play()}}else{r._wD(n.id+": Ignoring request to load again")}}else{if(r.html5Only){r._wD(n.id+": No flash support. Exiting.");return n}if(n._iO.url&&n._iO.url.match(/data\:/i)){r._wD(n.id+": data: URIs not supported via Flash. Exiting.");return n}try{n.isHTML5=false;n._iO=ct(ut(o));o=n._iO;if(y===8){a._load(n.id,o.url,o.stream,o.autoPlay,o.usePolicyFile)}else{a._load(n.id,o.url,!!o.stream,!!o.autoPlay,o.loops||1,!!o.autoLoad,o.usePolicyFile)}}catch(s){E("smError",2);w("onload",false);K({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}n.url=o.url;return n};this.unload=function(){if(n.readyState!==0){r._wD(n.id+": unload()");if(!n.isHTML5){if(y===8){a._unload(n.id,rn)}else{a._unload(n.id)}}else{u();if(n._a){n._a.pause();v=Mt(n._a)}}i()}return n};this.destruct=function(e){r._wD(n.id+": Destruct");if(!n.isHTML5){n._iO.onfailure=null;a._destroySound(n.id)}else{u();if(n._a){n._a.pause();Mt(n._a);if(!Pt){l()}n._a._s=null;n._a=null}}if(!e){r.destroySound(n.id,true)}};this.play=function(e,i){var o,s,l,u,p,h,m,v=true,b=null;o=n.id+": play(): ";i=i===t?true:i;if(!e){e={}}if(n.url){n._iO.url=n.url}n._iO=O(n._iO,n.options);n._iO=O(e,n._iO);n._iO.url=xt(n._iO.url);n.instanceOptions=n._iO;if(!n.isHTML5&&n._iO.serverURL&&!n.connected){if(!n.getAutoPlay()){r._wD(o+" Netstream not connected yet - setting autoPlay");n.setAutoPlay(true)}return n}if(St(n._iO)){n._setup_html5(n._iO);c()}if(n.playState===1&&!n.paused){s=n._iO.multiShot;if(!s){r._wD(o+"Already playing (one-shot)",1);if(n.isHTML5){n.setPosition(n._iO.position)}b=n}else{r._wD(o+"Already playing (multi-shot)",1)}}if(b!==null){return b}if(e.url&&e.url!==n.url){if(!n.readyState&&!n.isHTML5&&y===8&&x){x=false}else{n.load(n._iO)}}if(!n.loaded){if(n.readyState===0){r._wD(o+"Attempting to load");if(!n.isHTML5&&!r.html5Only){n._iO.autoPlay=true;n.load(n._iO)}else if(n.isHTML5){n.load(n._iO)}else{r._wD(o+"Unsupported type. Exiting.");b=n}n.instanceOptions=n._iO}else if(n.readyState===2){r._wD(o+"Could not load - exiting",2);b=n}else{r._wD(o+"Loading - attempting to play...")}}else{r._wD(o.substr(0,o.lastIndexOf(":")))}if(b!==null){return b}if(!n.isHTML5&&y===9&&n.position>0&&n.position===n.duration){r._wD(o+"Sound at end, resetting to position:0");e.position=0}if(n.paused&&n.position>=0&&(!n._iO.serverURL||n.position>0)){r._wD(o+"Resuming from paused state",1);n.resume()}else{n._iO=O(e,n._iO);if(n._iO.from!==null&&n._iO.to!==null&&n.instanceCount===0&&n.playState===0&&!n._iO.serverURL){u=function(){n._iO=O(e,n._iO);n.play(n._iO)};if(n.isHTML5&&!n._html5_canplay){r._wD(o+"Beginning load for from/to case");n.load({oncanplay:u});b=false}else if(!n.isHTML5&&!n.loaded&&(!n.readyState||n.readyState!==2)){r._wD(o+"Preloading for from/to case");n.load({onload:u});b=false}if(b!==null){return b}n._iO=g()}if(!n.instanceCount||n._iO.multiShotEvents||n.isHTML5&&n._iO.multiShot&&!Pt||!n.isHTML5&&y>8&&!n.getAutoPlay()){n.instanceCount++}if(n._iO.onposition&&n.playState===0){f(n)}n.playState=1;n.paused=false;n.position=n._iO.position!==t&&!isNaN(n._iO.position)?n._iO.position:0;if(!n.isHTML5){n._iO=ct(ut(n._iO))}if(n._iO.onplay&&i){n._iO.onplay.apply(n);d=true}n.setVolume(n._iO.volume,true);n.setPan(n._iO.pan,true);if(!n.isHTML5){v=a._start(n.id,n._iO.loops||1,y===9?n.position:n.position/on,n._iO.multiShot||false);if(y===9&&!v){r._wD(o+"No sound hardware, or 32-sound ceiling hit",2);if(n._iO.onplayerror){n._iO.onplayerror.apply(n)}}}else{if(n.instanceCount<2){c();l=n._setup_html5();n.setPosition(n._iO.position);l.play()}else{r._wD(n.id+": Cloning Audio() for instance #"+n.instanceCount+"...");p=new Audio(n._iO.url);h=function(){Nt.remove(p,"onended",h);n._onfinish(n);Mt(p);p=null};m=function(){Nt.remove(p,"canplay",m);try{p.currentTime=n._iO.position/on}catch(e){ft(n.id+": multiShot play() failed to apply position of "+n._iO.position/on)}p.play()};Nt.add(p,"ended",h);if(n._iO.position){Nt.add(p,"canplay",m)}else{p.play()}}}}return n};this.start=this.play;this.stop=function(e){var t=n._iO,i;if(n.playState===1){r._wD(n.id+": stop()");n._onbufferchange(0);n._resetOnPosition(0);n.paused=false;if(!n.isHTML5){n.playState=0}m();if(t.to){n.clearOnPosition(t.to)}if(!n.isHTML5){a._stop(n.id,e);if(t.serverURL){n.unload()}}else{if(n._a){i=n.position;n.setPosition(0);n.position=i;n._a.pause();n.playState=0;n._onTimer();u()}}n.instanceCount=0;n._iO={};if(t.onstop){t.onstop.apply(n)}}return n};this.setAutoPlay=function(e){r._wD(n.id+": Autoplay turned "+(e?"on":"off"));n._iO.autoPlay=e;if(!n.isHTML5){a._setAutoPlay(n.id,e);if(e){if(!n.instanceCount&&n.readyState===1){n.instanceCount++;r._wD(n.id+": Incremented instance count to "+n.instanceCount)}}}};this.getAutoPlay=function(){return n._iO.autoPlay};this.setPosition=function(e){if(e===t){e=0}var i,o,s=n.isHTML5?Math.max(e,0):Math.min(n.duration||n._iO.duration,Math.max(e,0));n.position=s;o=n.position/on;n._resetOnPosition(n.position);n._iO.position=s;if(!n.isHTML5){i=y===9?n.position:o;if(n.readyState&&n.readyState!==2){a._setPosition(n.id,i,n.paused||!n.playState,n._iO.multiShot)}}else if(n._a){if(n._html5_canplay){if(n._a.currentTime!==o){r._wD(n.id+": setPosition("+o+")");
try{n._a.currentTime=o;if(n.playState===0||n.paused){n._a.pause()}}catch(l){r._wD(n.id+": setPosition("+o+") failed: "+l.message,2)}}}else if(o){r._wD(n.id+": setPosition("+o+"): Cannot seek yet, sound not ready",2);return n}if(n.paused){n._onTimer(true)}}return n};this.pause=function(e){if(n.paused||n.playState===0&&n.readyState!==1){return n}r._wD(n.id+": pause()");n.paused=true;if(!n.isHTML5){if(e||e===t){a._pause(n.id,n._iO.multiShot)}}else{n._setup_html5().pause();u()}if(n._iO.onpause){n._iO.onpause.apply(n)}return n};this.resume=function(){var e=n._iO;if(!n.paused){return n}r._wD(n.id+": resume()");n.paused=false;n.playState=1;if(!n.isHTML5){if(e.isMovieStar&&!e.serverURL){n.setPosition(n.position)}a._pause(n.id,e.multiShot)}else{n._setup_html5().play();c()}if(!d&&e.onplay){e.onplay.apply(n);d=true}else if(e.onresume){e.onresume.apply(n)}return n};this.togglePause=function(){r._wD(n.id+": togglePause()");if(n.playState===0){n.play({position:y===9&&!n.isHTML5?n.position:n.position/on});return n}if(n.paused){n.resume()}else{n.pause()}return n};this.setPan=function(e,i){if(e===t){e=0}if(i===t){i=false}if(!n.isHTML5){a._setPan(n.id,e)}n._iO.pan=e;if(!i){n.pan=e;n.options.pan=e}return n};this.setVolume=function(e,i){if(e===t){e=100}if(i===t){i=false}if(!n.isHTML5){a._setVolume(n.id,r.muted&&!n.muted||n.muted?0:e)}else if(n._a){n._a.volume=Math.max(0,Math.min(1,e/100))}n._iO.volume=e;if(!i){n.volume=e;n.options.volume=e}return n};this.mute=function(){n.muted=true;if(!n.isHTML5){a._setVolume(n.id,0)}else if(n._a){n._a.muted=true}return n};this.unmute=function(){n.muted=false;var e=n._iO.volume!==t;if(!n.isHTML5){a._setVolume(n.id,e?n._iO.volume:n.options.volume)}else if(n._a){n._a.muted=false}return n};this.toggleMute=function(){return n.muted?n.unmute():n.mute()};this.onPosition=function(e,i,o){p.push({position:parseInt(e,10),method:i,scope:o!==t?o:n,fired:false});return n};this.onposition=this.onPosition;this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e)){return false}for(n=0;n<p.length;n++){if(e===p[n].position){if(!t||t===p[n].method){if(p[n].fired){h--}p.splice(n,1)}}}};this._processOnPosition=function(){var e,t,i=p.length;if(!i||!n.playState||h>=i){return false}for(e=i-1;e>=0;e--){t=p[e];if(!t.fired&&n.position>=t.position){t.fired=true;h++;t.method.apply(t.scope,[t.position])}}return true};this._resetOnPosition=function(e){var t,n,i=p.length;if(!i){return false}for(t=i-1;t>=0;t--){n=p[t];if(n.fired&&e<=n.position){n.fired=false;h--}}return true};g=function(){var e=n._iO,t=e.from,i=e.to,o,s;s=function(){r._wD(n.id+': "To" time of '+i+" reached.");n.clearOnPosition(i,s);n.stop()};o=function(){r._wD(n.id+': Playing "from" '+t);if(i!==null&&!isNaN(i)){n.onPosition(i,s)}};if(t!==null&&!isNaN(t)){e.position=t;e.multiShot=false;o()}return e};f=function(){var e,t=n._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){n.onPosition(parseInt(e,10),t[e])}}}};m=function(){var e,t=n._iO.onposition;if(t){for(e in t){if(t.hasOwnProperty(e)){n.clearOnPosition(parseInt(e,10))}}}};c=function(){if(n.isHTML5){mt(n)}};u=function(){if(n.isHTML5){gt(n)}};i=function(e){if(!e){p=[];h=0}d=false;n._hasTimer=null;n._a=null;n._html5_canplay=false;n.bytesLoaded=null;n.bytesTotal=null;n.duration=n._iO&&n._iO.duration?n._iO.duration:null;n.durationEstimate=null;n.buffered=[];n.eqData=[];n.eqData.left=[];n.eqData.right=[];n.failures=0;n.isBuffering=false;n.instanceOptions={};n.instanceCount=0;n.loaded=false;n.metadata={};n.readyState=0;n.muted=false;n.paused=false;n.peakData={left:0,right:0};n.waveformData={left:[],right:[]};n.playState=0;n.position=null;n.id3={}};i();this._onTimer=function(e){var t,i=false,o,r={};if(n._hasTimer||e){if(n._a&&(e||(n.playState>0||n.readyState===1)&&!n.paused)){t=n._get_html5_duration();if(t!==b.duration){b.duration=t;n.duration=t;i=true}n.durationEstimate=n.duration;o=n._a.currentTime*on||0;if(o!==b.time){b.time=o;i=true}if(i||e){n._whileplaying(o,r,r,r,r)}}return i}};this._get_html5_duration=function(){var e=n._iO,t=n._a&&n._a.duration?n._a.duration*on:e&&e.duration?e.duration:null,i=t&&!isNaN(t)&&t!==Infinity?t:null;return i};this._apply_loop=function(e,t){if(!e.loop&&t>1){r._wD("Note: Native HTML5 looping is infinite.",1)}e.loop=t>1?"loop":""};this._setup_html5=function(e){var t=O(n._iO,e),r=Pt?s:n._a,a=decodeURI(t.url),l;if(Pt){if(a===decodeURI(Ht)){l=true}}else if(a===decodeURI(v)){l=true}if(r){if(r._s){if(Pt){if(r._s&&r._s.playState&&!l){r._s.stop()}}else if(!Pt&&a===decodeURI(v)){n._apply_loop(r,t.loops);return r}}if(!l){i(false);r.src=t.url;n.url=t.url;v=t.url;Ht=t.url;r._called_load=false}}else{if(t.autoLoad||t.autoPlay){n._a=new Audio(t.url)}else{n._a=Kt&&opera.version()<10?new Audio(null):new Audio}r=n._a;r._called_load=false;if(Pt){s=r}}n.isHTML5=true;n._a=r;r._s=n;o();n._apply_loop(r,t.loops);if(t.autoLoad||t.autoPlay){n.load()}else{r.autobuffer=false;r.preload="auto"}return r};o=function(){if(n._a._added_events){return false}var e;function t(e,t,i){return n._a?n._a.addEventListener(e,t,i||false):null}n._a._added_events=true;for(e in Ft){if(Ft.hasOwnProperty(e)){t(e,Ft[e])}}return true};l=function(){var e;function t(e,t,i){return n._a?n._a.removeEventListener(e,t,i||false):null}r._wD(n.id+": Removing event listeners");n._a._added_events=false;for(e in Ft){if(Ft.hasOwnProperty(e)){t(e,Ft[e])}}};this._onload=function(e){var t,i=!!e||!n.isHTML5&&y===8&&n.duration;t=n.id+": ";r._wD(t+(i?"onload()":"Failed to load / invalid sound?"+(!n.duration?" Zero-length duration reported.":" -")+" ("+n.url+")"),i?1:2);if(!i&&!n.isHTML5){if(r.sandbox.noRemote===true){r._wD(t+ot("noNet"),1)}if(r.sandbox.noLocal===true){r._wD(t+ot("noLocal"),1)}}n.loaded=i;n.readyState=i?3:2;n._onbufferchange(0);if(n._iO.onload){jt(n,function(){n._iO.onload.apply(n,[i])})}return true};this._onbufferchange=function(e){if(n.playState===0){return false}if(e&&n.isBuffering||!e&&!n.isBuffering){return false}n.isBuffering=e===1;if(n._iO.onbufferchange){r._wD(n.id+": Buffer state change: "+e);n._iO.onbufferchange.apply(n)}return true};this._onsuspend=function(){if(n._iO.onsuspend){r._wD(n.id+": Playback suspended");n._iO.onsuspend.apply(n)}return true};this._onfailure=function(e,t,i){n.failures++;r._wD(n.id+": Failures = "+n.failures);if(n._iO.onfailure&&n.failures===1){n._iO.onfailure(n,e,t,i)}else{r._wD(n.id+": Ignoring failure")}};this._onfinish=function(){var e=n._iO.onfinish;n._onbufferchange(0);n._resetOnPosition(0);if(n.instanceCount){n.instanceCount--;if(!n.instanceCount){m();n.playState=0;n.paused=false;n.instanceCount=0;n.instanceOptions={};n._iO={};u();if(n.isHTML5){n.position=0}}if(!n.instanceCount||n._iO.multiShotEvents){if(e){r._wD(n.id+": onfinish()");jt(n,function(){e.apply(n)})}}}};this._whileloading=function(e,t,i,o){var r=n._iO;n.bytesLoaded=e;n.bytesTotal=t;n.duration=Math.floor(i);n.bufferLength=o;if(!n.isHTML5&&!r.isMovieStar){if(r.duration){n.durationEstimate=n.duration>r.duration?n.duration:r.duration}else{n.durationEstimate=parseInt(n.bytesTotal/n.bytesLoaded*n.duration,10)}}else{n.durationEstimate=n.duration}if(!n.isHTML5){n.buffered=[{start:0,end:n.duration}]}if((n.readyState!==3||n.isHTML5)&&r.whileloading){r.whileloading.apply(n)}};this._whileplaying=function(e,i,o,r,s){var a=n._iO,l;if(isNaN(e)||e===null){return false}n.position=Math.max(0,e);n._processOnPosition();if(!n.isHTML5&&y>8){if(a.usePeakData&&i!==t&&i){n.peakData={left:i.leftPeak,right:i.rightPeak}}if(a.useWaveformData&&o!==t&&o){n.waveformData={left:o.split(","),right:r.split(",")}}if(a.useEQData){if(s!==t&&s&&s.leftEQ){l=s.leftEQ.split(",");n.eqData=l;n.eqData.left=l;if(s.rightEQ!==t&&s.rightEQ){n.eqData.right=s.rightEQ.split(",")}}}}if(n.playState===1){if(!n.isHTML5&&y===8&&!n.position&&n.isBuffering){n._onbufferchange(0)}if(a.whileplaying){a.whileplaying.apply(n)}}return true};this._oncaptiondata=function(e){r._wD(n.id+": Caption data received.");n.captiondata=e;if(n._iO.oncaptiondata){n._iO.oncaptiondata.apply(n,[e])}};this._onmetadata=function(e,t){r._wD(n.id+": Metadata received.");var i={},o,s;for(o=0,s=e.length;o<s;o++){i[e[o]]=t[o]}n.metadata=i;if(n._iO.onmetadata){n._iO.onmetadata.apply(n)}};this._onid3=function(e,t){r._wD(n.id+": ID3 data received.");var i=[],o,s;for(o=0,s=e.length;o<s;o++){i[e[o]]=t[o]}n.id3=O(n.id3,i);if(n._iO.onid3){n._iO.onid3.apply(n)}};this._onconnect=function(e){e=e===1;r._wD(n.id+": "+(e?"Connected.":"Failed to connect? - "+n.url),e?1:2);n.connected=e;if(e){n.failures=0;if(dt(n.id)){if(n.getAutoPlay()){n.play(t,n.getAutoPlay())}else if(n._iO.autoLoad){n.load()}}if(n._iO.onconnect){n._iO.onconnect.apply(n,[e])}}};this._ondataerror=function(e){if(n.playState>0){r._wD(n.id+": Data error: "+e);if(n._iO.ondataerror){n._iO.ondataerror.apply(n)}}};this._debug()};X=function(){return h.body||h._docElement||h.getElementsByTagName("div")[0]};f=function(e){return h.getElementById(e)};O=function(e,n){var i=e||{},o,s;o=n===t?r.defaultOptions:n;for(s in o){if(o.hasOwnProperty(s)&&i[s]===t){if(typeof o[s]!=="object"||o[s]===null){i[s]=o[s]}else{i[s]=O(i[s],o[s])}}}return i};jt=function(t,n){if(!t.isHTML5&&y===8){e.setTimeout(n,0)}else{n()}};L={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};N=function(e,n){var i,o=true,s=n!==t,a=r.setupOptions,l=L;if(e===t){o=[];for(i in a){if(a.hasOwnProperty(i)){o.push(i)}}for(i in l){if(l.hasOwnProperty(i)){if(typeof r[i]==="object"){o.push(i+": {...}")}else if(r[i]instanceof Function){o.push(i+": function() {...}")}else{o.push(i)}}}r._wD(ot("setup",o.join(", ")));return false}for(i in e){if(e.hasOwnProperty(i)){if(typeof e[i]!=="object"||e[i]===null||e[i]instanceof Array||e[i]instanceof RegExp){if(s&&l[n]!==t){r[n][i]=e[i]}else if(a[i]!==t){r.setupOptions[i]=e[i];r[i]=e[i]}else if(l[i]===t){ft(ot(r[i]===t?"setupUndef":"setupError",i),2);o=false}else{if(r[i]instanceof Function){r[i].apply(r,e[i]instanceof Array?e[i]:[e[i]])}else{r[i]=e[i]}}}else{if(l[i]===t){ft(ot(r[i]===t?"setupUndef":"setupError",i),2);o=false}else{return N(e[i],i)}}}}return o};function fn(e){return r.preferFlash&&At&&!r.ignoreFlash&&r.flash[e]!==t&&r.flash[e]}Nt=function(){var t=e.attachEvent,n={add:t?"attachEvent":"addEventListener",remove:t?"detachEvent":"removeEventListener"};function i(e){var n=Lt.call(e),i=n.length;if(t){n[1]="on"+n[1];if(i>3){n.pop()}}else if(i===3){n.push(false)}return n}function o(e,i){var o=e.shift(),r=[n[i]];if(t){o[r](e[0],e[1])}else{o[r].apply(o,e)}}function r(){o(i(arguments),"add")}function s(){o(i(arguments),"remove")}return{add:r,remove:s}}();function dn(e){return function(t){var n=this._s,i;if(!n||!n._a){if(n&&n.id){r._wD(n.id+": Ignoring "+t.type)}else{r._wD(c+"Ignoring "+t.type)}i=null}else{i=e.call(this,t)}return i}}Ft={abort:dn(function(){r._wD(this._s.id+": abort")}),canplay:dn(function(){var e=this._s,n;if(e._html5_canplay){return true}e._html5_canplay=true;r._wD(e.id+": canplay");e._onbufferchange(0);n=e._iO.position!==t&&!isNaN(e._iO.position)?e._iO.position/on:null;if(e.position&&this.currentTime!==n){r._wD(e.id+": canplay: Setting position to "+n);try{this.currentTime=n}catch(i){r._wD(e.id+": canplay: Setting position of "+n+" failed: "+i.message,2)}}if(e._iO._oncanplay){e._iO._oncanplay()}}),canplaythrough:dn(function(){var e=this._s;if(!e.loaded){e._onbufferchange(0);e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration());e._onload(true)}}),ended:dn(function(){var e=this._s;r._wD(e.id+": ended");e._onfinish()}),error:dn(function(){r._wD(this._s.id+": HTML5 error, code "+this.error.code);this._s._onload(false)}),loadeddata:dn(function(){var e=this._s;r._wD(e.id+": loadeddata");if(!e._loaded&&!Vt){e.duration=e._get_html5_duration()}}),loadedmetadata:dn(function(){r._wD(this._s.id+": loadedmetadata")}),loadstart:dn(function(){r._wD(this._s.id+": loadstart");this._s._onbufferchange(1)}),play:dn(function(){this._s._onbufferchange(0)}),playing:dn(function(){r._wD(this._s.id+": playing");this._s._onbufferchange(0)}),progress:dn(function(e){var t=this._s,n,i,o,s=0,a=e.type==="progress",l=e.target.buffered,u=e.loaded||0,c=e.total||1;t.buffered=[];if(l&&l.length){for(n=0,i=l.length;n<i;n++){t.buffered.push({start:l.start(n)*on,end:l.end(n)*on})}s=(l.end(0)-l.start(0))*on;u=Math.min(1,s/(e.target.duration*on));if(a&&l.length>1){o=[];i=l.length;for(n=0;n<i;n++){o.push(e.target.buffered.start(n)*on+"-"+e.target.buffered.end(n)*on)}r._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}if(a&&!isNaN(u)){r._wD(this._s.id+": progress, "+Math.floor(u*100)+"% loaded")}}if(!isNaN(u)){t._onbufferchange(0);t._whileloading(u,c,t._get_html5_duration());if(u&&c&&u===c){Ft.canplaythrough.call(this,e)}}}),ratechange:dn(function(){r._wD(this._s.id+": ratechange")}),suspend:dn(function(e){var t=this._s;r._wD(this._s.id+": suspend");Ft.progress.call(this,e);t._onsuspend()}),stalled:dn(function(){r._wD(this._s.id+": stalled")}),timeupdate:dn(function(){this._s._onTimer()}),waiting:dn(function(){var e=this._s;r._wD(this._s.id+": waiting");e._onbufferchange(1)})};St=function(e){var t;if(!e||!e.type&&!e.url&&!e.serverURL){t=false}else if(e.serverURL||e.type&&fn(e.type)){t=false}else{t=e.type?_t({type:e.type}):_t({url:e.url})||r.html5Only||e.url.match(/data\:/i)}return t};Mt=function(e){var t;if(e){t=Vt&&!zt?null:Qt?rn:null;e.src=t;if(e._called_unload!==undefined){e._called_load=false}}if(Pt){Ht=null}return t};_t=function(e){if(!r.useHTML5Audio||!r.hasHTML5){return false}var n=e.url||null,i=e.type||null,o=r.audioFormats,s,a,l,u;if(i&&r.html5[i]!==t){return r.html5[i]&&!fn(i)}if(!Et){Et=[];for(u in o){if(o.hasOwnProperty(u)){Et.push(u);if(o[u].related){Et=Et.concat(o[u].related)}}}Et=new RegExp("\\.("+Et.join("|")+")(\\?.*)?$","i")}l=n?n.toLowerCase().match(Et):null;if(!l||!l.length){if(!i){s=false}else{a=i.indexOf(";");l=(a!==-1?i.substr(0,a):i).substr(6)}}else{l=l[1]}if(l&&r.html5[l]!==t){s=r.html5[l]&&!fn(l)}else{i="audio/"+l;s=r.html5.canPlayType({type:i});r.html5[l]=s;s=s&&r.html5[i]&&!fn(i)}return s};Ot=function(){if(!r.useHTML5Audio||!r.hasHTML5){r.html5.usingFlash=true;Tt=true;return false}var e=Audio!==t?Kt&&opera.version()<10?new Audio(null):new Audio:null,n,i,o={},s,a;function l(t){var n,i,o,s=false,a=false;if(!e||typeof e.canPlayType!=="function"){return s}if(t instanceof Array){for(i=0,o=t.length;i<o;i++){if(r.html5[t[i]]||e.canPlayType(t[i]).match(r.html5Test)){a=true;r.html5[t[i]]=true;r.flash[t[i]]=!!t[i].match(nn)}}s=a}else{n=e&&typeof e.canPlayType==="function"?e.canPlayType(t):false;s=!!(n&&n.match(r.html5Test))}return s}s=r.audioFormats;for(n in s){if(s.hasOwnProperty(n)){i="audio/"+n;o[n]=l(s[n].type);o[i]=o[n];if(n.match(nn)){r.flash[n]=true;r.flash[i]=true}else{r.flash[n]=false;r.flash[i]=false}if(s[n]&&s[n].related){for(a=s[n].related.length-1;a>=0;a--){o["audio/"+s[n].related[a]]=o[n];r.html5[s[n].related[a]]=o[n];r.flash[s[n].related[a]]=o[n]}}}}o.canPlayType=e?l:null;r.html5=O(r.html5,o);r.html5.usingFlash=Ct();Tt=r.html5.usingFlash;return true};W={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:l+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:u+"Verify that %s is a valid path.",tryDebug:"Try "+l+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:u+"Non-HTTP page ("+h.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:u+"Special case: Waiting for SWF to load with window focus...",waitForever:u+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:u+"Waiting for 100% SWF load...",needFunction:u+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:u+"_debug(): Current sound objects",waitOnload:u+"Waiting for window.onload()",docLoaded:u+"Document already loaded",onload:u+"initComplete(): calling soundManager.onload()",onloadOK:l+".onload() complete",didInit:u+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:u+"Failed to remove Flash node.",shutdown:l+".disable(): Shutting down",queue:u+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+at.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:u+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:l+".load(): current URL already assigned.",badFV:l+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:u+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:u+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:l+".setup(): allowed parameters: %s",setupError:l+'.setup(): "%s" cannot be assigned with this method.',setupUndef:l+'.setup(): Could not find option "%s"',setupLate:l+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:u+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:l+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."};ot=function(){var e=Lt.call(arguments),t=e.shift(),n=W&&W[t]?W[t]:"",i,o;if(n&&e&&e.length){for(i=0,o=e.length;i<o;i++){n=n.replace("%s",e[i])}}return n};ut=function(e){if(y===8&&e.loops>1&&e.stream){E("as2loop");e.stream=false}return e};ct=function(e,t){if(e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)){r._wD((t||"")+ot("policy"));e.usePolicyFile=true}return e};ft=function(e){if(Gt&&console.warn!==t){console.warn(e)}else{r._wD(e)}};m=function(){return false};Z=function(e){var t;for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="function"){e[t]=m}}t=null};et=function(e){if(e===t){e=false}if(S||e){r.disable(e)}};tt=function(e){var t=null,n;if(e){if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t){return e}}else if(e.lastIndexOf("/")!==e.length-1){e+="/"}}n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+r.movieURL;if(r.noSWFCache){n+="?ts="+(new Date).getTime()}return n};F=function(){y=parseInt(r.flashVersion,10);if(y!==8&&y!==9){r._wD(ot("badFV",y,G));r.flashVersion=y=G}var e=r.debugMode||r.debugFlash?"_debug.swf":".swf";if(r.useHTML5Audio&&!r.html5Only&&r.audioFormats.mp4.required&&y<9){r._wD(ot("needfl9"));r.flashVersion=y=9}r.version=r.versionNumber+(r.html5Only?" (HTML5-only mode)":y===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(y>8){r.defaultOptions=O(r.defaultOptions,r.flash9Options);r.features.buffering=true;r.defaultOptions=O(r.defaultOptions,r.movieStarOptions);r.filePatterns.flash9=new RegExp("\\.(mp3|"+un.join("|")+")(\\?.*)?$","i");r.features.movieStar=true}else{r.features.movieStar=false}r.filePattern=r.filePatterns[y!==8?"flash9":"flash8"];r.movieURL=(y===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);r.features.peakData=r.features.waveformData=r.features.eqData=y>8};Q=function(e,t){if(!a){return false}a._setPolling(e,t)};Y=function(){if(r.debugURLParam.test(p)){r.debugMode=true}if(f(r.debugID)){return false}var e,t,n,i,o;if(r.debugMode&&!f(r.debugID)&&(!Gt||!r.useConsole||!r.consoleOnly)){e=h.createElement("div");e.id=r.debugID+"-toggle";i={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};e.appendChild(h.createTextNode("-"));e.onclick=lt;e.title="Toggle SM2 debug console";if(d.match(/msie 6/i)){e.style.position="absolute";e.style.cursor="hand"}for(o in i){if(i.hasOwnProperty(o)){e.style[o]=i[o]}}t=h.createElement("div");t.id=r.debugID;t.style.display=r.debugMode?"block":"none";if(r.debugMode&&!f(e.id)){try{n=X();n.appendChild(e)}catch(s){throw new Error(ot("domError")+" \n"+s.toString())}n.appendChild(t)}}n=null};dt=this.getSoundById;E=function(e,t){return!e?"":r._wD(ot(e),t)};lt=function(){var e=f(r.debugID),t=f(r.debugID+"-toggle");if(!e){return false}if(x){t.innerHTML="+";e.style.display="none"}else{t.innerHTML="-";e.style.display="block"}x=!x};w=function(n,i,o){if(e.sm2Debugger!==t){try{sm2Debugger.handleEvent(n,i,o)}catch(r){return false}}return true};st=function(){var e=[];if(r.debugMode){e.push(at.sm2Debug)}if(r.debugFlash){e.push(at.flashDebug)}if(r.useHighPerformance){e.push(at.highPerf)}return e.join(" ")};rt=function(){var e=ot("fbHandler"),t=r.getMoviePercent(),n=at,i={type:"FLASHBLOCK"};if(r.html5Only){return false}if(!r.ok()){if(Tt){r.oMC.className=st()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError);r._wD(e+": "+ot("fbTimeout")+(t?" ("+ot("fbLoaded")+")":""))}r.didFlashBlock=true;H({type:"ontimeout",ignoreInit:true,error:i});K(i)}else{if(r.didFlashBlock){r._wD(e+": Unblocked")}if(r.oMC){r.oMC.className=[st(),n.swfDefault,n.swfLoaded+(r.didFlashBlock?" "+n.swfUnblocked:"")].join(" ")}}};P=function(e,n,i){if(b[e]===t){b[e]=[]}b[e].push({method:n,scope:i||null,fired:false})};H=function(e){if(!e){e={type:r.ok()?"onready":"ontimeout"}}if(!C&&e&&!e.ignoreInit){return false}if(e.type==="ontimeout"&&(r.ok()||S&&!e.ignoreInit)){return false}var t={success:e&&e.ignoreInit?r.ok():!S},n=e&&e.type?b[e.type]||[]:[],i=[],o,s,a=[t],l=Tt&&!r.ok();if(e.error){a[0].error=e.error}for(o=0,s=n.length;o<s;o++){if(n[o].fired!==true){i.push(n[o])}}if(i.length){for(o=0,s=i.length;o<s;o++){if(i[o].scope){i[o].method.apply(i[o].scope,a)}else{i[o].method.apply(this,a)}if(!l){i[o].fired=true}}}return true};A=function(){e.setTimeout(function(){if(r.useFlashBlock){rt()}H();if(typeof r.onload==="function"){E("onload",1);r.onload.apply(e);E("onloadOK",1)}if(r.waitForWindowLoad){Nt.add(e,"load",A)}},1)};It=function(){if(At!==t){return At}var n=false,i=navigator,o=i.plugins,r,s,a,l=e.ActiveXObject;if(o&&o.length){s="application/x-shockwave-flash";a=i.mimeTypes;if(a&&a[s]&&a[s].enabledPlugin&&a[s].enabledPlugin.description){n=true}}else if(l!==t&&!d.match(/MSAppHost/i)){try{r=new l("ShockwaveFlash.ShockwaveFlash")}catch(u){r=null}n=!!r;r=null}At=n;return n};Ct=function(){var e,t,n=r.audioFormats,i=zt&&!!d.match(/os (1|2|3_0|3_1)/i);if(i){r.hasHTML5=false;r.html5Only=true;if(r.oMC){r.oMC.style.display="none"}}else{if(r.useHTML5Audio){if(!r.html5||!r.html5.canPlayType){r._wD("SoundManager: No HTML5 Audio() support detected.");r.hasHTML5=false}if(Jt){r._wD(u+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!At?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(r.useHTML5Audio&&r.hasHTML5){kt=true;for(t in n){if(n.hasOwnProperty(t)){if(n[t].required){if(!r.html5.canPlayType(n[t].type)){kt=false;e=true}else if(r.preferFlash&&(r.flash[t]||r.flash[n[t].type])){e=true}}}}}if(r.ignoreFlash){e=false;kt=true}r.html5Only=r.hasHTML5&&r.useHTML5Audio&&!e;return!r.html5Only};xt=function(e){var t,n,i=0,o;if(e instanceof Array){for(t=0,n=e.length;t<n;t++){if(e[t]instanceof Object){if(r.canPlayMIME(e[t].type)){i=t;break}}else if(r.canPlayURL(e[t])){i=t;break}}if(e[i].url){e[i]=e[i].url}o=e[i]}else{o=e}return o};mt=function(e){if(!e._hasTimer){e._hasTimer=true;if(!Yt&&r.html5PollingInterval){if(bt===null&&yt===0){bt=setInterval(vt,r.html5PollingInterval)}yt++}}};gt=function(e){if(e._hasTimer){e._hasTimer=false;if(!Yt&&r.html5PollingInterval){yt--}}};vt=function(){var e;if(bt!==null&&!yt){clearInterval(bt);bt=null;return false}for(e=r.soundIDs.length-1;e>=0;e--){if(r.sounds[r.soundIDs[e]].isHTML5&&r.sounds[r.soundIDs[e]]._hasTimer){r.sounds[r.soundIDs[e]]._onTimer()}}};K=function(n){n=n!==t?n:{};if(typeof r.onerror==="function"){r.onerror.apply(e,[{type:n.type!==t?n.type:null}])}if(n.fatal!==t&&n.fatal){r.disable()}};Rt=function(){if(!Jt||!It()){return false}var e=r.audioFormats,t,n;for(n in e){if(e.hasOwnProperty(n)){if(n==="mp3"||n==="mp4"){r._wD(l+": Using flash fallback for "+n+" format");r.html5[n]=false;if(e[n]&&e[n].related){for(t=e[n].related.length-1;t>=0;t--){r.html5[e[n].related[t]]=false}}}}}};this._setSandboxType=function(e){var n=r.sandbox;n.type=e;n.description=n.types[n.types[e]!==t?e:"unknown"];if(n.type==="localWithFile"){n.noRemote=true;n.noLocal=false;E("secNote",2)}else if(n.type==="localWithNetwork"){n.noRemote=false;n.noLocal=true}else if(n.type==="localTrusted"){n.noRemote=false;n.noLocal=false}};this._externalInterfaceOK=function(e){if(r.swfLoaded){return false}var t;w("swf",true);w("flashtojs",true);r.swfLoaded=true;en=false;if(Jt){Rt()}if(!e||e.replace(/\+dev/i,"")!==r.versionNumber.replace(/\+dev/i,"")){t=l+': Fatal: JavaScript file build "'+r.versionNumber+'" does not match Flash SWF build "'+e+'" at '+r.url+". Ensure both are up-to-date.";setTimeout(function n(){throw new Error(t)},0);return false}setTimeout(v,Ut?100:1)};V=function(e,n){if(k&&T){return false}function i(){var e=[],t,n=[],i=" + ";t="SoundManager "+r.version+(!r.html5Only&&r.useHTML5Audio?r.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");if(!r.html5Only){if(r.preferFlash){e.push("preferFlash")}if(r.useHighPerformance){e.push("useHighPerformance")}if(r.flashPollingInterval){e.push("flashPollingInterval ("+r.flashPollingInterval+"ms)")}if(r.html5PollingInterval){e.push("html5PollingInterval ("+r.html5PollingInterval+"ms)")}if(r.wmode){e.push("wmode ("+r.wmode+")")}if(r.debugFlash){e.push("debugFlash")}if(r.useFlashBlock){e.push("flashBlock")}}else{if(r.html5PollingInterval){e.push("html5PollingInterval ("+r.html5PollingInterval+"ms)")}}if(e.length){n=n.concat([e.join(i)])}r._wD(t+(n.length?i+n.join(", "):""),1);Bt()}if(r.html5Only){F();i();r.oMC=f(r.movieID);v();k=true;T=true;return false}var o=n||r.url,s=r.altURL||o,a="JS/Flash audio component (SoundManager 2)",l=X(),u=st(),c=null,p=h.getElementsByTagName("html")[0],m,g,y,b,x,w,C,S;c=p&&p.dir&&p.dir.match(/rtl/i);e=e===t?r.id:e;function _(e,t){return'<param name="'+e+'" value="'+t+'" />'}F();r.url=tt(sn?o:s);n=r.url;r.wmode=!r.wmode&&r.useHighPerformance?"transparent":r.wmode;if(r.wmode!==null&&(d.match(/msie 8/i)||!Ut&&!r.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){wt.push(W.spcWmode);r.wmode=null}m={name:e,id:e,src:n,quality:"high",allowScriptAccess:r.allowScriptAccess,bgcolor:r.bgColor,pluginspage:an+"www.macromedia.com/go/getflashplayer",title:a,type:"application/x-shockwave-flash",wmode:r.wmode,hasPriority:"true"};if(r.debugFlash){m.FlashVars="debug=1"}if(!r.wmode){delete m.wmode}if(Ut){g=h.createElement("div");b=['<object id="'+e+'" data="'+n+'" type="'+m.type+'" title="'+m.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+an+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',_("movie",n),_("AllowScriptAccess",r.allowScriptAccess),_("quality",m.quality),r.wmode?_("wmode",r.wmode):"",_("bgcolor",r.bgColor),_("hasPriority","true"),r.debugFlash?_("FlashVars",m.FlashVars):"","</object>"].join("")}else{g=h.createElement("embed");for(y in m){if(m.hasOwnProperty(y)){g.setAttribute(y,m[y])}}}Y();u=st();l=X();if(l){r.oMC=f(r.movieID)||h.createElement("div");if(!r.oMC.id){r.oMC.id=r.movieID;r.oMC.className=at.swfDefault+" "+u;w=null;x=null;if(!r.useFlashBlock){if(r.useHighPerformance){w={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{w={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(c){w.left=Math.abs(parseInt(w.left,10))+"px"}}}if(Xt){r.oMC.style.zIndex=1e4}if(!r.debugFlash){for(C in w){if(w.hasOwnProperty(C)){r.oMC.style[C]=w[C]}}}try{if(!Ut){r.oMC.appendChild(g)}l.appendChild(r.oMC);if(Ut){x=r.oMC.appendChild(h.createElement("div"));x.className=at.swfBox;x.innerHTML=b}T=true}catch(E){throw new Error(ot("domError")+" \n"+E.toString())}}else{S=r.oMC.className;r.oMC.className=(S?S+" ":at.swfDefault)+(u?" "+u:"");r.oMC.appendChild(g);if(Ut){x=r.oMC.appendChild(h.createElement("div"));x.className=at.swfBox;x.innerHTML=b}T=true}}k=true;i();return true};j=function(){if(r.html5Only){V();return false}if(a){return false}if(!r.url){E("noURL");return false}a=r.getMovie(r.id);if(!a){if(!nt){V(r.id,r.url)}else{if(!Ut){r.oMC.appendChild(nt)}else{r.oMC.innerHTML=it}nt=null;k=true}a=r.getMovie(r.id)}if(typeof r.oninitmovie==="function"){setTimeout(r.oninitmovie,1)}Wt();return true};I=function(){setTimeout(R,1e3)};R=function(){var t,n=false;if(!r.url){return false}if(pt){return false}pt=true;Nt.remove(e,"load",I);if(en&&!Zt){E("waitFocus");return false}if(!C){t=r.getMoviePercent();if(t>0&&t<100){n=true}}setTimeout(function(){t=r.getMoviePercent();if(n){pt=false;r._wD(ot("waitSWF"));e.setTimeout(I,1);return false}if(!C){r._wD(l+": No Flash response within expected time. Likely causes: "+(t===0?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(r.debugFlash?" "+ot("checkSWF"):""),2);if(!sn&&t){E("localFail",2);if(!r.debugFlash){E("tryDebug",2)}}if(t===0){r._wD(ot("swf404",r.url),1)}w("flashtojs",false,": Timed out"+sn?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!C&&tn){if(t===null){if(r.useFlashBlock||r.flashLoadTimeout===0){if(r.useFlashBlock){rt()}E("waitForever")}else{if(!r.useFlashBlock&&kt){e.setTimeout(function(){ft(u+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false...");r.setup({preferFlash:false}).reboot();r.didFlashBlock=true;r.beginDelayedInit()},1)}else{E("waitForever");H({type:"ontimeout",ignoreInit:true})}}}else{if(r.flashLoadTimeout===0){E("waitForever")}else{et(true)}}}},r.flashLoadTimeout)};B=function(){function t(){Nt.remove(e,"focus",B)}if(Zt||!en){t();return true}tn=true;Zt=true;E("gotFocus");pt=false;I();t();return true};Wt=function(){if(wt.length){r._wD("SoundManager 2: "+wt.join(" "),1);wt=[]}};Bt=function(){Wt();var e,t=[];if(r.useHTML5Audio&&r.hasHTML5){for(e in r.audioFormats){if(r.audioFormats.hasOwnProperty(e)){t.push(e+" = "+r.html5[e]+(!r.html5[e]&&Tt&&r.flash[e]?" (using flash)":r.preferFlash&&r.flash[e]&&Tt?" (preferring flash)":!r.html5[e]?" ("+(r.audioFormats[e].required?"required, ":"")+"and no flash support)":""))}}r._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}};D=function(t){if(C){return false}if(r.html5Only){E("sm2Loaded");C=true;A();w("onload",true);return true}var n=r.useFlashBlock&&r.flashLoadTimeout&&!r.getMoviePercent(),i=true,o;if(!n){C=true;if(S){o={type:!At&&Tt?"NO_FLASH":"INIT_TIMEOUT"}}}r._wD("SoundManager 2 "+(S?"failed to load":"loaded")+" ("+(S?"Flash security/load error":"OK")+")",S?2:1);if(S||t){if(r.useFlashBlock&&r.oMC){r.oMC.className=st()+" "+(r.getMoviePercent()===null?at.swfTimedout:at.swfError)}H({type:"ontimeout",error:o,ignoreInit:true});w("onload",false);K(o);i=false}else{w("onload",true)}if(!S){if(r.waitForWindowLoad&&!_){E("waitOnload");Nt.add(e,"load",A)}else{if(r.waitForWindowLoad&&_){E("docLoaded")}A()}}return i};g=function(){var e,n=r.setupOptions;for(e in n){if(n.hasOwnProperty(e)){if(r[e]===t){r[e]=n[e]}else if(r[e]!==n[e]){r.setupOptions[e]=r[e]}}}};v=function(){if(C){E("didInit");return false}function t(){Nt.remove(e,"load",r.beginDelayedInit)}if(r.html5Only){if(!C){t();r.enabled=true;D()}return true}j();try{a._externalInterfaceTest(false);Q(true,r.flashPollingInterval||(r.useHighPerformance?10:50));
if(!r.debugMode){a._disableDebug()}r.enabled=true;w("jstoflash",true);if(!r.html5Only){Nt.add(e,"unload",m)}}catch(n){r._wD("js/flash exception: "+n.toString());w("jstoflash",false);K({type:"JS_TO_FLASH_EXCEPTION",fatal:true});et(true);D();return false}D();t();return true};z=function(){if(U){return false}U=true;g();Y();!function(){var e="sm2-usehtml5audio=",t="sm2-preferflash=",n=null,i=null,o=p.toLowerCase();if(o.indexOf(e)!==-1){n=o.charAt(o.indexOf(e)+e.length)==="1";if(Gt){console.log((n?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}r.setup({useHTML5Audio:n})}if(o.indexOf(t)!==-1){i=o.charAt(o.indexOf(t)+t.length)==="1";if(Gt){console.log((i?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}r.setup({preferFlash:i})}}();if(!At&&r.hasHTML5){r._wD("SoundManager: No Flash detected"+(!r.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."),1);r.setup({useHTML5Audio:true,preferFlash:false})}Ot();if(!At&&Tt){wt.push(W.needFlash);r.setup({flashLoadTimeout:1})}if(h.removeEventListener){h.removeEventListener("DOMContentLoaded",z,false)}j();return true};Dt=function(){if(h.readyState==="complete"){z();h.detachEvent("onreadystatechange",Dt)}return true};q=function(){_=true;Nt.remove(e,"load",q)};$=function(){if(Yt){if(!r.setupOptions.useHTML5Audio||r.setupOptions.preferFlash){wt.push(W.mobileUA)}r.setupOptions.useHTML5Audio=true;r.setupOptions.preferFlash=false;if(zt||qt&&!d.match(/android\s2\.3/i)){wt.push(W.globalHTML5);if(zt){r.ignoreFlash=true}Pt=true}}};$();It();Nt.add(e,"focus",B);Nt.add(e,"load",I);Nt.add(e,"load",q);if(h.addEventListener){h.addEventListener("DOMContentLoaded",z,false)}else if(h.attachEvent){h.attachEvent("onreadystatechange",Dt)}else{w("onload",false);K({type:"NO_DOM2_EVENTS",fatal:true})}}if(e.SM2_DEFER===undefined||!SM2_DEFER){n=new i}e.SoundManager=i;e.soundManager=n}(window);!function(){"use strict";var e=function(){var e=/\-([a-z])/g,t=function(e,t){return t.toUpperCase()};return function(n){return n.replace(e,t)}}();var t=function(t,n){var i,o,r,s,a,l;if(window.getComputedStyle){i=window.getComputedStyle(t,null).getPropertyValue(n)}else{o=e(n);if(t.currentStyle){i=t.currentStyle[o]}else{i=t.style[o]}}if(n==="cursor"){if(!i||i==="auto"){r=t.tagName.toLowerCase();s=["a"];for(a=0,l=s.length;a<l;a++){if(r===s[a]){return"pointer"}}}}return i};var n=function(e){if(!h.prototype._singleton)return;if(!e){e=window.event}var t;if(this!==window){t=this}else if(e.target){t=e.target}else if(e.srcElement){t=e.srcElement}h.prototype._singleton.setCurrent(t)};var i=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,false)}else if(e.attachEvent){e.attachEvent("on"+t,n)}};var o=function(e,t,n){if(e.removeEventListener){e.removeEventListener(t,n,false)}else if(e.detachEvent){e.detachEvent("on"+t,n)}};var r=function(e,t){if(e.addClass){e.addClass(t);return e}if(t&&typeof t==="string"){var n=(t||"").split(/\s+/);if(e.nodeType===1){if(!e.className){e.className=t}else{var i=" "+e.className+" ",o=e.className;for(var r=0,s=n.length;r<s;r++){if(i.indexOf(" "+n[r]+" ")<0){o+=" "+n[r]}}e.className=o.replace(/^\s+|\s+$/g,"")}}}return e};var s=function(e,t){if(e.removeClass){e.removeClass(t);return e}if(t&&typeof t==="string"||t===undefined){var n=(t||"").split(/\s+/);if(e.nodeType===1&&e.className){if(t){var i=(" "+e.className+" ").replace(/[\n\t]/g," ");for(var o=0,r=n.length;o<r;o++){i=i.replace(" "+n[o]+" "," ")}e.className=i.replace(/^\s+|\s+$/g,"")}else{e.className=""}}}return e};var a=function(){var e,t,n,i=1;if(typeof document.body.getBoundingClientRect==="function"){e=document.body.getBoundingClientRect();t=e.right-e.left;n=document.body.offsetWidth;i=Math.round(t/n*100)/100}return i};var l=function(e){var n={left:0,top:0,width:0,height:0,zIndex:999999999};var i=t(e,"z-index");if(i&&i!=="auto"){n.zIndex=parseInt(i,10)}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();var r,s,l;if("pageXOffset"in window&&"pageYOffset"in window){r=window.pageXOffset;s=window.pageYOffset}else{l=a();r=Math.round(document.documentElement.scrollLeft/l);s=Math.round(document.documentElement.scrollTop/l)}var u=document.documentElement.clientLeft||0;var c=document.documentElement.clientTop||0;n.left=o.left+r-u;n.top=o.top+s-c;n.width="width"in o?o.width:o.right-o.left;n.height="height"in o?o.height:o.bottom-o.top}return n};var u=function(e){var t=h.prototype._singleton;if(t.options.useNoCache){return(e.indexOf("?")>=0?"&nocache=":"?nocache=")+(new Date).getTime()}else{return""}};var c=function(e){var t=[];if(e.trustedDomains){var n;if(typeof e.trustedDomains==="string"&&e.trustedDomains){n=[e.trustedDomains]}else if("length"in e.trustedDomains){n=e.trustedDomains}t.push("trustedDomain="+encodeURIComponent(n.join(",")))}if(typeof e.amdModuleId==="string"&&e.amdModuleId){t.push("amdModuleId="+encodeURIComponent(e.amdModuleId))}if(typeof e.cjsModuleId==="string"&&e.cjsModuleId){t.push("cjsModuleId="+encodeURIComponent(e.cjsModuleId))}return t.join("&")};var f=function(e,t){if(t.indexOf){return t.indexOf(e)}for(var n=0,i=t.length;n<i;n++){if(t[n]===e){return n}}return-1};var d=function(e){if(typeof e==="string")throw new TypeError("ZeroClipboard doesn't accept query strings.");if(!e.length)return[e];return e};var p=function(e,t,n,i,o){if(o){window.setTimeout(function(){e.call(t,n,i)},0)}else{e.call(t,n,i)}};var h=function(e,t){if(e)(h.prototype._singleton||this).glue(e);if(h.prototype._singleton)return h.prototype._singleton;h.prototype._singleton=this;this.options={};for(var n in y)this.options[n]=y[n];for(var i in t)this.options[i]=t[i];this.handlers={};if(h.detectFlashSupport())w()};var m,g=[];h.prototype.setCurrent=function(e){m=e;this.reposition();var n=e.getAttribute("title");if(n){this.setTitle(n)}var i=this.options.forceHandCursor===true||t(e,"cursor")==="pointer";v.call(this,i)};h.prototype.setText=function(e){if(e&&e!==""){this.options.text=e;if(this.ready())this.flashBridge.setText(e)}};h.prototype.setTitle=function(e){if(e&&e!=="")this.htmlBridge.setAttribute("title",e)};h.prototype.setSize=function(e,t){if(this.ready())this.flashBridge.setSize(e,t)};h.prototype.setHandCursor=function(e){e=typeof e==="boolean"?e:!!e;v.call(this,e);this.options.forceHandCursor=e};var v=function(e){if(this.ready())this.flashBridge.setHandCursor(e)};h.version="1.2.0-beta.4";var y={moviePath:"ZeroClipboard.swf",trustedDomains:null,text:null,hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",allowScriptAccess:"sameDomain",useNoCache:true,forceHandCursor:false};h.setDefaults=function(e){for(var t in e)y[t]=e[t]};h.destroy=function(){h.prototype._singleton.unglue(g);var e=h.prototype._singleton.htmlBridge;e.parentNode.removeChild(e);delete h.prototype._singleton};h.detectFlashSupport=function(){var e=false;if(typeof ActiveXObject==="function"){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){e=true}}catch(t){}}if(!e&&navigator.mimeTypes["application/x-shockwave-flash"]){e=true}return e};var b=null;var x=null;var w=function(){var e=h.prototype._singleton;var t=document.getElementById("global-zeroclipboard-html-bridge");if(!t){var n={};for(var i in e.options)n[i]=e.options[i];n.amdModuleId=b;n.cjsModuleId=x;var o=c(n);var r='      <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" id="global-zeroclipboard-flash-bridge" width="100%" height="100%">         <param name="movie" value="'+e.options.moviePath+u(e.options.moviePath)+'"/>         <param name="allowScriptAccess" value="'+e.options.allowScriptAccess+'"/>         <param name="scale" value="exactfit"/>         <param name="loop" value="false"/>         <param name="menu" value="false"/>         <param name="quality" value="best" />         <param name="bgcolor" value="#ffffff"/>         <param name="wmode" value="transparent"/>         <param name="flashvars" value="'+o+'"/>         <embed src="'+e.options.moviePath+u(e.options.moviePath)+'"           loop="false" menu="false"           quality="best" bgcolor="#ffffff"           width="100%" height="100%"           name="global-zeroclipboard-flash-bridge"           allowScriptAccess="always"           allowFullScreen="false"           type="application/x-shockwave-flash"           wmode="transparent"           pluginspage="http://www.macromedia.com/go/getflashplayer"           flashvars="'+o+'"           scale="exactfit">         </embed>       </object>';t=document.createElement("div");t.id="global-zeroclipboard-html-bridge";t.setAttribute("class","global-zeroclipboard-container");t.setAttribute("data-clipboard-ready",false);t.style.position="absolute";t.style.left="-9999px";t.style.top="-9999px";t.style.width="15px";t.style.height="15px";t.style.zIndex="9999";t.innerHTML=r;document.body.appendChild(t)}e.htmlBridge=t;e.flashBridge=document["global-zeroclipboard-flash-bridge"]||t.children[0].lastElementChild};h.prototype.resetBridge=function(){this.htmlBridge.style.left="-9999px";this.htmlBridge.style.top="-9999px";this.htmlBridge.removeAttribute("title");this.htmlBridge.removeAttribute("data-clipboard-text");s(m,this.options.activeClass);m=null;this.options.text=null};h.prototype.ready=function(){var e=this.htmlBridge.getAttribute("data-clipboard-ready");return e==="true"||e===true};h.prototype.reposition=function(){if(!m)return false;var e=l(m);this.htmlBridge.style.top=e.top+"px";this.htmlBridge.style.left=e.left+"px";this.htmlBridge.style.width=e.width+"px";this.htmlBridge.style.height=e.height+"px";this.htmlBridge.style.zIndex=e.zIndex+1;this.setSize(e.width,e.height)};h.dispatch=function(e,t){h.prototype._singleton.receiveEvent(e,t)};h.prototype.on=function(e,t){var n=e.toString().split(/\s/g);for(var i=0;i<n.length;i++){e=n[i].toLowerCase().replace(/^on/,"");if(!this.handlers[e])this.handlers[e]=t}if(this.handlers.noflash&&!h.detectFlashSupport()){this.receiveEvent("onNoFlash",null)}};h.prototype.addEventListener=h.prototype.on;h.prototype.off=function(e,t){var n=e.toString().split(/\s/g);for(var i=0;i<n.length;i++){e=n[i].toLowerCase().replace(/^on/,"");for(var o in this.handlers){if(o===e&&this.handlers[o]===t){delete this.handlers[o]}}}};h.prototype.removeEventListener=h.prototype.off;h.prototype.receiveEvent=function(e,t){e=e.toString().toLowerCase().replace(/^on/,"");var n=m;var i=true;switch(e){case"load":if(t&&parseFloat(t.flashVersion.replace(",",".").replace(/[^0-9\.]/gi,""))<10){this.receiveEvent("onWrongFlash",{flashVersion:t.flashVersion});return}this.htmlBridge.setAttribute("data-clipboard-ready",true);break;case"mouseover":r(n,this.options.hoverClass);break;case"mouseout":s(n,this.options.hoverClass);this.resetBridge();break;case"mousedown":r(n,this.options.activeClass);break;case"mouseup":s(n,this.options.activeClass);break;case"datarequested":var o=n.getAttribute("data-clipboard-target"),a=!o?null:document.getElementById(o);if(a){var l=a.value||a.textContent||a.innerText;if(l)this.setText(l)}else{var u=n.getAttribute("data-clipboard-text");if(u)this.setText(u)}i=false;break;case"complete":this.options.text=null;break}if(this.handlers[e]){var c=this.handlers[e];if(typeof c==="string"&&typeof window[c]==="function"){c=window[c]}if(typeof c==="function"){p(c,n,this,t,i)}}};h.prototype.glue=function(e){e=d(e);for(var t=0;t<e.length;t++){if(f(e[t],g)==-1){g.push(e[t]);i(e[t],"mouseover",n)}}};h.prototype.unglue=function(e){e=d(e);for(var t=0;t<e.length;t++){o(e[t],"mouseover",n);var i=f(e[t],g);if(i!=-1)g.splice(i,1)}};if(typeof define==="function"&&define.amd){define(["require","exports","module"],function(e,t,n){b=n&&n.id||null;return h})}else if(typeof module!=="undefined"&&module){x=module.id||null;module.exports=h}else{window.ZeroClipboard=h}}();function loadPlayerGraph(e,t,n){var i=(new Date).getTimezoneOffset()*1e3*60;t=t||4;n=n||120;var o={};if(e.attr("weekindex")){o["weekIndex"]=e.attr("weekindex")}try{}catch(r){_rollbar.push(r)}$.ajax({url:"/"+t+"/player_graph",data:o,success:function(t){e.removeClass("progress");var o=t.points;var r=t.start_time-i;var s=t.end_time-i;var a=[];var l=[];o.map(function(e){var t=e.time-i;var n=e.player_count;var o=e.new_players;a.push([t,n]);if(o>=0){l.push([t,o])}});t=[{data:a}];if(l.length){t.push({data:l,yaxis:2})}t.push({data:[[r],[s]]});$.plot(e,t,{grid:{hoverable:true,backgroundColor:"#ffffff"},colors:["#7E9BFF","#F00"],series:{lines:{fill:true}},xaxes:[{mode:"time",minTickSize:[1,"day"],timeformat:"%b %d"}],yaxes:[{min:0,max:n,tickSize:20,position:"right"},{min:0,max:40}]})},error:function(e){}})}function showGraphTooltip(e,t,n){$('<div id="graph-tooltip">'+n+"</div>").css({position:"absolute",display:"none",top:t-12,left:e+14,border:"1px solid #666",padding:"2px","background-color":"#111",color:"#fff"}).appendTo("body").show()}$(document).ready(function(){var e=null;$(".graph").bind("plothover",function(t,n,i){if(i){if(e!=i.dataIndex){e=i.dataIndex;$("#graph-tooltip").remove();var o=i.datapoint[0];var r=i.datapoint[1];showGraphTooltip(i.pageX,i.pageY,r+(r==1?" player":" players"))}}else{$("#graph-tooltip").remove();e=null}})});var commandHistory=[];var commandIndex=-1;var mentionPat="(&gt;.*|Server].*|Web Chat].*: .*|FactionChat.*|AllianceChat.*|command:.*)(MENTION_PART)";function Stream(e,t,n,i,o,r){var s=this;this.authData=e;this.baseUrl=t;this.$outputArea=n;this.$textbox=i;this.serverId=o;this.source=r;this.socket=null;this.numLines=0;this.maxLines=200;this.nextMentionSound=0;this.playMentionSound=true;this.mentionSound=null;this.mentions=[];this.focused=true;this.isAtBottom=function(){return n.get(0).scrollHeight-n.scrollTop()==n.outerHeight()};this.scrollToBottom=function(){n.scrollTop(n.get(0).scrollHeight)};this.scrollToBottomIfAtBottom=function(e){if(this.isAtBottom()){e();this.scrollToBottom()}else{e()}};this.trimTopLines=function(e){$("li:lt("+e+")",n).remove()};this.addOutputLines=function(e){var t=s.isAtBottom();var i="";e.map(function(e){i+="<li>"+s.postProcessLine(e)+"</li>"});n.append(i);if(this.numLines+e.length>this.maxLines){this.trimTopLines(this.numLines+e.length-this.maxLines);this.numLines=this.maxLines}else{this.numLines+=e.length}if(t){s.scrollToBottom()}};this.addOutputLine=function(e){this.addOutputLines([e])};this.postProcessLine=function(e){var t=false;var n;for(n=0;n<this.mentions.length;++n){var i=this.mentions[n];if(this.playMentionSound&&this.mentionSound&&!this.focused&&e.match(i.regex)){t=true}if(i.style){e=e.replace(i.regex,'$1<span style="'+i.style+'">$2</span>')}}var o=(new Date).getTime();if(t&&o>this.nextMentionSound){this.mentionSound.play();this.nextMentionSound=o+500}return e};this.addRegexMention=function(e,t){this.mentions.push({regex:e,style:t})};this.addChatMention=function(e,t){var n=mentionPat.replace("MENTION_PART",e);var i=new RegExp(n,"gi");this.addRegexMention(i,t)};this.setMentionSound=function(e){this.mentionSound=e};this.messageEntered=function(){throw"Method should be implemented by inherited objects!"};this.socketInitialized=function(){throw"Method should be implemented by inherited objects!"};this.connect=function(e){this.addOutputLine("Connecting...");var t=io.connect(this.baseUrl+"/"+this.source);this.socket=t;s.socketInitialized();t.on("connect_failed",function(e){s.addOutputLine("ERROR: failed to connect!");_rollbar.push({level:"error",msg:"Client could not connect to stream socket",reason:e})});t.on("error",function(){s.addOutputLine("ERROR: failed to connect!");_rollbar.push({level:"error",msg:"Client could not connect to stream socket"})});t.on("connect",function(){n.empty();s.numLines=0;t.emit("auth",{server_id:s.serverId,auth_data:s.authData})});t.on("disconnect",function(){s.addOutputLine("ERROR: socket connection lost!");_rollbar.push({level:"error",msg:"Client disconnected from stream socket"})});t.on("mc-connection-lost",function(){s.addOutputLine("Connection to Minecraft server lost, retrying...")});t.on("mc-connection-restored",function(){s.addOutputLine("Connection restored!")});$(document).keypress(function(e){var t=$(":focus");if(i!=t&&(!t[0]||t[0].type==false)){i.focus()}});i.keydown(function(e){switch(e.which){case 38:if(commandIndex<commandHistory.length-1){commandIndex++;i.val(commandHistory[commandIndex])}return false;case 40:if(commandIndex>-1){commandIndex--;i.val(commandHistory[commandIndex])}return false}return true});i.keyup(function(e){switch(e.which){case 13:var t=i.val();if(t){s.messageEntered(t);i.val("");s.scrollToBottom();commandHistory.unshift(t);commandIndex=-1}break}});var o=function(e){t.emit("user-activity",{active:e})};$(window).focus(function(){if(!s.focused){o(true)}s.focused=true});$(window).blur(function(){if(s.focused){o(false)}s.focused=false});return e()}}function ConsoleStream(e,t,n,i,o){Stream.call(this,e,t,n,i,o,"console");this.allPlayers={};this.maxLines=2e3;var r=this;var s;this.addChatMention("server","background:#A0A");this.addRegexMention("-&gt; me");i.keydown(function(){if(i.val().length>=53){i.addClass("len-warn")}else{i.removeClass("len-warn")}});this.socketInitialized=function(){s=r.socket;s.on("unauthorized",function(){r.addOutputLine("ERROR: you are not authorized to access the admin panel!")});s.on("console",function(e){if(e.line){r.addOutputLine(e.line)}else if(e.batch){r.addOutputLines(e.batch)}});s.on("server-status",function(e){var t=e.players;var n=e.numPlayers;var i=e.maxPlayers;var o=e.load;var s=e.tps;t=t.sort(function(e,t){e=e.nickname?e.nickname:e.username;t=t.nickname?t.nickname:t.username;if(e.toLowerCase()<t.toLowerCase())return-1;if(e.toLowerCase()>t.toLowerCase())return 1;return 0});var a="";for(var l=0;l<t.length;++l){var u=t[l].username;r.allPlayers[u]=t[l];var c=t[l].nicknameAnsi;var f=c?c:u;var d=['<a href="#"><div class="player" username="'+u+'">','<img class="face-thumb" src="/face/16/'+u+'.png"><span class="ansi-container">'+f+"</span>",'<span class="rank">#'+t[l].rank+"</span>","</div></a>"].join("");a+=d}$(".players").html(a);$(".player-count").text(n+"/"+i);$(".load").text(o);$(".tps").text(s);if(r.onUpdate&&typeof r.onUpdate==="function"){r.onUpdate()}});s.on("chat-users",function(e){var t=e.users;var n="<b>Chat user count: "+t.length+"</b>";for(var i=0;i<t.length;++i){var o=t[i].username;var r=t[i].address;var s=t[i].type;var a=t[i].active;if(o=="Server"){n+=['<div class="user">',o+" ["+s+"]","</div>"].join("")}else if(o){n+=['<div class="user">','<a href="/player/'+o+'">','<span><img class="face-thumb" src="/face/16/'+o+'.png">'+o+"</span>",a?'<img src="/static/images/online.png">':"","</a>","</div>"].join("")}else{n+=['<div class="user">',"Anonymous - "+r,a?'<img src="/static/images/online.png">':"","</div>"].join("")}}$(".users").html(n)})};this.messageEntered=function(e){var t={};if(e[0]=="/"){t={command:e.substring(1,e.length)}}else{t={message:e}}s.emit("console-input",t);i.removeClass("len-warn")};this.setDonator=function(e){s.emit("set-donator",{username:e})}}ConsoleStream.prototype=Object.create(Stream.prototype);function ChatStream(e,t,n,i,o,r,s){Stream.call(this,e,t,n,i,o,"chat");var a=this;var l;if(r){this.addChatMention(r,"background:#00ACC4")}if(s){this.addChatMention(s,"background:#00ACC4")}this.renderPlayerTable=function(e,t){var n="<tr>";for(var i=0;i<t;++i){if(e.length<=i){n+="<td>&nbsp;</td>"}else{var o=e[i].username;var r=e[i].nickname;var s=r?r:o;n+=["<td>",'<a href="/player/'+o+'" target="_blank">','<span><img class="face-thumb" src="/face/16/'+o+'.png">'+s+"</span>","</a>","</td>"].join("")}if((i+1)%3==0){n+="</tr><tr>"}}n+="</tr>";$(".players-table").html(n)};this.socketInitialized=function(){l=a.socket;l.on("unauthorized",function(){a.addOutputLine("ERROR: you are not authorized!")});l.on("connection-spam",function(){a.addOutputLine("Stop trying to connect so much!");a.addOutputLine("Try again in a few minutes...");_rollbar.push({level:"info",msg:"Connection spam blocked"})});l.on("chat-spam",function(){a.addOutputLine("Stop typing so fast!");_rollbar.push({level:"info",msg:"Chat spam blocked"})});l.on("chat",function(e){if(e.line){a.addOutputLine(e.line)}else if(e.batch){a.addOutputLines(e.batch)}});l.on("server-status",function(e){var t=e.players;var n=e.maxPlayers;t=t.sort(function(e,t){e=e.nickname?e.nickname:e.username;t=t.nickname?t.nickname:t.username;if(e.toLowerCase()<t.toLowerCase())return-1;if(e.toLowerCase()>t.toLowerCase())return 1;return 0});a.renderPlayerTable(t,n)})};this.messageEntered=function(e){l.emit("chat-input",{message:e})};a.renderPlayerTable([],90)}ChatStream.prototype=Object.create(Stream.prototype);var io="undefined"===typeof module?{}:module.exports;!function(){!function(e,t){var n=e;n.version="0.9.16";n.protocol=1;n.transports=[];n.j=[];n.sockets={};n.connect=function(e,i){var o=n.util.parseUri(e),r,s;if(t&&t.location){o.protocol=o.protocol||t.location.protocol.slice(0,-1);o.host=o.host||(t.document?t.document.domain:t.location.hostname);o.port=o.port||t.location.port}r=n.util.uniqueUri(o);var a={host:o.host,secure:"https"==o.protocol,port:o.port||("https"==o.protocol?443:80),query:o.query||""};n.util.merge(a,i);if(a["force new connection"]||!n.sockets[r]){s=new n.Socket(a)}if(!a["force new connection"]&&s){n.sockets[r]=s}s=s||n.sockets[r];return s.of(o.path.length>1?o.path:"")}}("object"===typeof module?module.exports:this.io={},this);!function(e,t){var n=e.util={};var i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;var o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){var t=i.exec(e||""),n={},r=14;while(r--){n[o[r]]=t[r]||""}return n};n.uniqueUri=function(e){var n=e.protocol,i=e.host,o=e.port;if("document"in t){i=i||document.domain;o=o||(n=="https"&&document.location.protocol!=="https:"?443:document.location.port)}else{i=i||"localhost";if(!o&&n=="https"){o=443}}return(n||"http")+"://"+i+":"+(o||80)};n.query=function(e,t){var i=n.chunkQuery(e||""),o=[];n.merge(i,n.chunkQuery(t||""));for(var r in i){if(i.hasOwnProperty(r)){o.push(r+"="+i[r])}}return o.length?"?"+o.join("&"):""};n.chunkQuery=function(e){var t={},n=e.split("&"),i=0,o=n.length,r;for(;i<o;++i){r=n[i].split("=");if(r[0]){t[r[0]]=r[1]}}return t};var r=false;n.load=function(e){if("document"in t&&document.readyState==="complete"||r){return e()}n.on(t,"load",e,false)};n.on=function(e,t,n,i){if(e.attachEvent){e.attachEvent("on"+t,n)}else if(e.addEventListener){e.addEventListener(t,n,i)}};n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest&&!n.ua.hasCORS){return new XDomainRequest}if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS)){return new XMLHttpRequest}if(!e){try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}return null};if("undefined"!=typeof window){n.load(function(){r=true})}n.defer=function(e){if(!n.ua.webkit||"undefined"!=typeof importScripts){return e()}n.load(function(){setTimeout(e,100)})};n.merge=function s(e,t,i,o){var r=o||[],s=typeof i=="undefined"?2:i,a;for(a in t){if(t.hasOwnProperty(a)&&n.indexOf(r,a)<0){if(typeof e[a]!=="object"||!s){e[a]=t[a];r.push(t[a])}else{n.merge(e[a],t[a],s-1,r)}}}return e};n.mixin=function(e,t){n.merge(e.prototype,t.prototype)};n.inherit=function(e,t){function n(){}n.prototype=t.prototype;e.prototype=new n};n.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};n.intersect=function(e,t){var i=[],o=e.length>t.length?e:t,r=e.length>t.length?t:e;for(var s=0,a=r.length;s<a;s++){if(~n.indexOf(o,r[s]))i.push(r[s])}return i};n.indexOf=function(e,t,n){for(var i=e.length,n=n<0?n+i<0?0:n+i:n||0;n<i&&e[n]!==t;n++){}return i<=n?-1:n};n.toArray=function(e){var t=[];for(var n=0,i=e.length;n<i;n++)t.push(e[n]);return t};n.ua={};n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return false}return e.withCredentials!=undefined}();n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent);n.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this);!function(e,t){e.EventEmitter=n;function n(){}n.prototype.on=function(e,n){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=n}else if(t.util.isArray(this.$events[e])){this.$events[e].push(n)}else{this.$events[e]=[this.$events[e],n]}return this};n.prototype.addListener=n.prototype.on;n.prototype.once=function(e,t){var n=this;function i(){n.removeListener(e,i);t.apply(this,arguments)}i.listener=t;this.on(e,i);return this};n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var i=this.$events[e];if(t.util.isArray(i)){var o=-1;for(var r=0,s=i.length;r<s;r++){if(i[r]===n||i[r].listener&&i[r].listener===n){o=r;break}}if(o<0){return this}i.splice(o,1);if(!i.length){delete this.$events[e]}}else if(i===n||i.listener&&i.listener===n){delete this.$events[e]}}return this};n.prototype.removeAllListeners=function(e){if(e===undefined){this.$events={};return this}if(this.$events&&this.$events[e]){this.$events[e]=null}return this};n.prototype.listeners=function(e){if(!this.$events){this.$events={}}if(!this.$events[e]){this.$events[e]=[]}if(!t.util.isArray(this.$events[e])){this.$events[e]=[this.$events[e]]}return this.$events[e]};n.prototype.emit=function(e){if(!this.$events){return false}var n=this.$events[e];if(!n){return false}var i=Array.prototype.slice.call(arguments,1);if("function"==typeof n){n.apply(this,i)}else if(t.util.isArray(n)){var o=n.slice();for(var r=0,s=o.length;r<s;r++){o[r].apply(this,i)}}else{return false}return true}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);!function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse){return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify}}var JSON=exports.JSON={};function f(e){return e<10?"0"+e:e}function date(e,t){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(e){escapable.lastIndex=0;return escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t==="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,o,r,s=gap,a,l=t[e];if(l instanceof Date){l=date(e)}if(typeof rep==="function"){l=rep.call(t,e,l)}switch(typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l){return"null"}gap+=indent;a=[];if(Object.prototype.toString.apply(l)==="[object Array]"){r=l.length;for(n=0;n<r;n+=1){a[n]=str(n,l)||"null"}o=a.length===0?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]";gap=s;return o}if(rep&&typeof rep==="object"){r=rep.length;for(n=0;n<r;n+=1){if(typeof rep[n]==="string"){i=rep[n];o=str(i,l);if(o){a.push(quote(i)+(gap?": ":":")+o)}}}}else{for(i in l){if(Object.prototype.hasOwnProperty.call(l,i)){o=str(i,l);if(o){a.push(quote(i)+(gap?": ":":")+o)}}}}o=a.length===0?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}";gap=s;return o}}JSON.stringify=function(e,t,n){var i;gap="";indent="";if(typeof n==="number"){for(i=0;i<n;i+=1){indent+=" "}}else if(typeof n==="string"){indent=n}rep=t;if(t&&typeof t!=="function"&&(typeof t!=="object"||typeof t.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":e})};JSON.parse=function(text,reviver){var j;function walk(e,t){var n,i,o=e[t];if(o&&typeof o==="object"){for(n in o){if(Object.prototype.hasOwnProperty.call(o,n)){i=walk(o,n);if(i!==undefined){o[n]=i}else{delete o[n]}}}}return reviver.call(e,t,o)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,typeof JSON!=="undefined"?JSON:undefined);!function(e,t){var n=e.parser={};var i=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"];var o=n.reasons=["transport not supported","client not handshaken","unauthorized"];var r=n.advice=["reconnect"];var s=t.JSON,a=t.util.indexOf;n.encodePacket=function(e){var t=a(i,e.type),n=e.id||"",l=e.endpoint||"",u=e.ack,c=null;switch(e.type){case"error":var f=e.reason?a(o,e.reason):"",d=e.advice?a(r,e.advice):"";if(f!==""||d!=="")c=f+(d!==""?"+"+d:"");break;case"message":if(e.data!=="")c=e.data;break;case"event":var p={name:e.name};if(e.args&&e.args.length){p.args=e.args}c=s.stringify(p);break;case"json":c=s.stringify(e.data);break;case"connect":if(e.qs)c=e.qs;break;case"ack":c=e.ackId+(e.args&&e.args.length?"+"+s.stringify(e.args):"");break}var h=[t,n+(u=="data"?"+":""),l];if(c!==null&&c!==undefined)h.push(c);return h.join(":")};n.encodePayload=function(e){var t="";if(e.length==1)return e[0];for(var n=0,i=e.length;n<i;n++){var o=e[n];t+="�"+o.length+"�"+e[n]}return t};var l=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(l);if(!t)return{};var n=t[2]||"",e=t[5]||"",a={type:i[t[1]],endpoint:t[4]||""};if(n){a.id=n;if(t[3])a.ack="data";else a.ack=true}switch(a.type){case"error":var t=e.split("+");a.reason=o[t[0]]||"";a.advice=r[t[1]]||"";break;case"message":a.data=e||"";break;case"event":try{var u=s.parse(e);a.name=u.name;a.args=u.args}catch(c){}a.args=a.args||[];break;case"json":try{a.data=s.parse(e)}catch(c){}break;case"connect":a.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t){a.ackId=t[1];a.args=[];if(t[3]){try{a.args=t[3]?s.parse(t[3]):[]}catch(c){}}}break;case"disconnect":case"heartbeat":break}return a};n.decodePayload=function(e){if(e.charAt(0)=="�"){var t=[];for(var i=1,o="";i<e.length;i++){if(e.charAt(i)=="�"){t.push(n.decodePacket(e.substr(i+1).substr(0,o)));i+=Number(o)+1;o=""}else{o+=e.charAt(i)}}return t}else{return[n.decodePacket(e)]}}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);!function(e,t){e.Transport=n;function n(e,t){this.socket=e;this.sessid=t}t.util.mixin(n,t.EventEmitter);n.prototype.heartbeats=function(){return true};n.prototype.onData=function(e){this.clearCloseTimeout();if(this.socket.connected||this.socket.connecting||this.socket.reconnecting){this.setCloseTimeout()}if(e!==""){var n=t.parser.decodePayload(e);if(n&&n.length){for(var i=0,o=n.length;i<o;i++){this.onPacket(n[i])}}}return this};n.prototype.onPacket=function(e){this.socket.setHeartbeatTimeout();if(e.type=="heartbeat"){return this.onHeartbeat()}if(e.type=="connect"&&e.endpoint==""){this.onConnect()}if(e.type=="error"&&e.advice=="reconnect"){this.isOpen=false}this.socket.onPacket(e);return this};n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}};n.prototype.onDisconnect=function(){if(this.isOpen)this.close();this.clearTimeouts();this.socket.onDisconnect();return this};n.prototype.onConnect=function(){this.socket.onConnect();return this};n.prototype.clearCloseTimeout=function(){if(this.closeTimeout){clearTimeout(this.closeTimeout);this.closeTimeout=null}};n.prototype.clearTimeouts=function(){this.clearCloseTimeout();if(this.reopenTimeout){clearTimeout(this.reopenTimeout)}};n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))
};n.prototype.onHeartbeat=function(e){this.packet({type:"heartbeat"})};n.prototype.onOpen=function(){this.isOpen=true;this.clearCloseTimeout();this.socket.onOpen()};n.prototype.onClose=function(){var e=this;this.isOpen=false;this.socket.onClose();this.onDisconnect()};n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid};n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);!function(e,t,n){e.Socket=i;function i(e){this.options={port:80,secure:false,document:"document"in n?document:false,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":true,reconnect:true,"reconnection delay":500,"reconnection limit":Infinity,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":false,"auto connect":true,"flash policy port":10843,manualFlush:false};t.util.merge(this.options,e);this.connected=false;this.open=false;this.connecting=false;this.reconnecting=false;this.namespaces={};this.buffer=[];this.doBuffer=false;if(this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var i=this;t.util.on(n,"beforeunload",function(){i.disconnectSync()},false)}if(this.options["auto connect"]){this.connect()}}t.util.mixin(i,t.EventEmitter);i.prototype.of=function(e){if(!this.namespaces[e]){this.namespaces[e]=new t.SocketNamespace(this,e);if(e!==""){this.namespaces[e].packet({type:"connect"})}}return this.namespaces[e]};i.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces){if(this.namespaces.hasOwnProperty(t)){e=this.of(t);e.$emit.apply(e,arguments)}}};function o(){}i.prototype.handshake=function(e){var n=this,i=this.options;function r(t){if(t instanceof Error){n.connecting=false;n.onError(t.message)}else{e.apply(null,t.split(":"))}}var s=["http"+(i.secure?"s":"")+":/",i.host+":"+i.port,i.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],l=document.createElement("script");l.src=s+"&jsonp="+t.j.length;a.parentNode.insertBefore(l,a);t.j.push(function(e){r(e);l.parentNode.removeChild(l)})}else{var u=t.util.request();u.open("GET",s,true);if(this.isXDomain()){u.withCredentials=true}u.onreadystatechange=function(){if(u.readyState==4){u.onreadystatechange=o;if(u.status==200){r(u.responseText)}else if(u.status==403){n.onError(u.responseText)}else{n.connecting=false;!n.reconnecting&&n.onError(u.responseText)}}};u.send(null)}};i.prototype.getTransport=function(e){var n=e||this.transports,i;for(var o=0,r;r=n[o];o++){if(t.Transport[r]&&t.Transport[r].check(this)&&(!this.isXDomain()||t.Transport[r].xdomainCheck(this))){return new t.Transport[r](this,this.sessionid)}}return null};i.prototype.connect=function(e){if(this.connecting){return this}var n=this;n.connecting=true;this.handshake(function(i,o,r,s){n.sessionid=i;n.closeTimeout=r*1e3;n.heartbeatTimeout=o*1e3;if(!n.transports)n.transports=n.origTransports=s?t.util.intersect(s.split(","),n.options.transports):n.options.transports;n.setHeartbeatTimeout();function a(e){if(n.transport)n.transport.clearTimeouts();n.transport=n.getTransport(e);if(!n.transport)return n.publish("connect_failed");n.transport.ready(n,function(){n.connecting=true;n.publish("connecting",n.transport.name);n.transport.open();if(n.options["connect timeout"]){n.connectTimeoutTimer=setTimeout(function(){if(!n.connected){n.connecting=false;if(n.options["try multiple transports"]){var e=n.transports;while(e.length>0&&e.splice(0,1)[0]!=n.transport.name){}if(e.length){a(e)}else{n.publish("connect_failed")}}}},n.options["connect timeout"])}})}a(n.transports);n.once("connect",function(){clearTimeout(n.connectTimeoutTimer);e&&typeof e=="function"&&e()})});return this};i.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);if(this.transport&&!this.transport.heartbeats())return;var e=this;this.heartbeatTimeoutTimer=setTimeout(function(){e.transport.onClose()},this.heartbeatTimeout)};i.prototype.packet=function(e){if(this.connected&&!this.doBuffer){this.transport.packet(e)}else{this.buffer.push(e)}return this};i.prototype.setBuffer=function(e){this.doBuffer=e;if(!e&&this.connected&&this.buffer.length){if(!this.options["manualFlush"]){this.flushBuffer()}}};i.prototype.flushBuffer=function(){this.transport.payload(this.buffer);this.buffer=[]};i.prototype.disconnect=function(){if(this.connected||this.connecting){if(this.open){this.of("").packet({type:"disconnect"})}this.onDisconnect("booted")}return this};i.prototype.disconnectSync=function(){var e=t.util.request();var n=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,t.protocol,"",this.sessionid].join("/")+"/?disconnect=1";e.open("GET",n,false);e.send(null);this.onDisconnect("booted")};i.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e};i.prototype.onConnect=function(){if(!this.connected){this.connected=true;this.connecting=false;if(!this.doBuffer){this.setBuffer(false)}this.emit("connect")}};i.prototype.onOpen=function(){this.open=true};i.prototype.onClose=function(){this.open=false;clearTimeout(this.heartbeatTimeoutTimer)};i.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)};i.prototype.onError=function(e){if(e&&e.advice){if(e.advice==="reconnect"&&(this.connected||this.connecting)){this.disconnect();if(this.options.reconnect){this.reconnect()}}}this.publish("error",e&&e.reason?e.reason:e)};i.prototype.onDisconnect=function(e){var t=this.connected,n=this.connecting;this.connected=false;this.connecting=false;this.open=false;if(t||n){this.transport.close();this.transport.clearTimeouts();if(t){this.publish("disconnect",e);if("booted"!=e&&this.options.reconnect&&!this.reconnecting){this.reconnect()}}}};i.prototype.reconnect=function(){this.reconnecting=true;this.reconnectionAttempts=0;this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],i=this.options["reconnection limit"];function o(){if(e.connected){for(var t in e.namespaces){if(e.namespaces.hasOwnProperty(t)&&""!==t){e.namespaces[t].packet({type:"connect"})}}e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer);e.removeListener("connect_failed",r);e.removeListener("connect",r);e.reconnecting=false;delete e.reconnectionAttempts;delete e.reconnectionDelay;delete e.reconnectionTimer;delete e.redoTransports;e.options["try multiple transports"]=n}function r(){if(!e.reconnecting){return}if(e.connected){return o()}if(e.connecting&&e.reconnecting){return e.reconnectionTimer=setTimeout(r,1e3)}if(e.reconnectionAttempts++>=t){if(!e.redoTransports){e.on("connect_failed",r);e.options["try multiple transports"]=true;e.transports=e.origTransports;e.transport=e.getTransport();e.redoTransports=true;e.connect()}else{e.publish("reconnect_failed");o()}}else{if(e.reconnectionDelay<i){e.reconnectionDelay*=2}e.connect();e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts);e.reconnectionTimer=setTimeout(r,e.reconnectionDelay)}}this.options["try multiple transports"]=false;this.reconnectionTimer=setTimeout(r,this.reconnectionDelay);this.on("connect",r)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);!function(e,t){e.SocketNamespace=n;function n(e,t){this.socket=e;this.name=t||"";this.flags={};this.json=new i(this,"json");this.ackPackets=0;this.acks={}}t.util.mixin(n,t.EventEmitter);n.prototype.$emit=t.EventEmitter.prototype.emit;n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)};n.prototype.packet=function(e){e.endpoint=this.name;this.socket.packet(e);this.flags={};return this};n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};if("function"==typeof t){n.id=++this.ackPackets;n.ack=true;this.acks[n.id]=t}return this.packet(n)};n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],i={type:"event",name:e};if("function"==typeof n){i.id=++this.ackPackets;i.ack="data";this.acks[i.id]=n;t=t.slice(0,t.length-1)}i.args=t;return this.packet(i)};n.prototype.disconnect=function(){if(this.name===""){this.socket.disconnect()}else{this.packet({type:"disconnect"});this.$emit("disconnect")}return this};n.prototype.onPacket=function(e){var n=this;function i(){n.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":if(this.name===""){this.socket.onDisconnect(e.reason||"booted")}else{this.$emit("disconnect",e.reason)}break;case"message":case"json":var o=["message",e.data];if(e.ack=="data"){o.push(i)}else if(e.ack){this.packet({type:"ack",ackId:e.id})}this.$emit.apply(this,o);break;case"event":var o=[e.name].concat(e.args);if(e.ack=="data")o.push(i);this.$emit.apply(this,o);break;case"ack":if(this.acks[e.ackId]){this.acks[e.ackId].apply(this,e.args);delete this.acks[e.ackId]}break;case"error":if(e.advice){this.socket.onError(e)}else{if(e.reason=="unauthorized"){this.$emit("connect_failed",e.reason)}else{this.$emit("error",e.reason)}}break}};function i(e,t){this.namespace=e;this.name=t}i.prototype.send=function(){this.namespace.flags[this.name]=true;this.namespace.send.apply(this.namespace,arguments)};i.prototype.emit=function(){this.namespace.flags[this.name]=true;this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports);!function(e,t,n){e.websocket=i;function i(e){t.Transport.apply(this,arguments)}t.util.inherit(i,t.Transport);i.prototype.name="websocket";i.prototype.open=function(){var e=t.util.query(this.socket.options.query),i=this,o;if(!o){o=n.MozWebSocket||n.WebSocket}this.websocket=new o(this.prepareUrl()+e);this.websocket.onopen=function(){i.onOpen();i.socket.setBuffer(false)};this.websocket.onmessage=function(e){i.onData(e.data)};this.websocket.onclose=function(){i.onClose();i.socket.setBuffer(true)};this.websocket.onerror=function(e){i.onError(e)};return this};if(t.util.ua.iDevice){i.prototype.send=function(e){var t=this;setTimeout(function(){t.websocket.send(e)},0);return this}}else{i.prototype.send=function(e){this.websocket.send(e);return this}}i.prototype.payload=function(e){for(var t=0,n=e.length;t<n;t++){this.packet(e[t])}return this};i.prototype.close=function(){this.websocket.close();return this};i.prototype.onError=function(e){this.socket.onError(e)};i.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"};i.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n};i.xdomainCheck=function(){return true};t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);!function(e,t,n){e.XHR=i;function i(e){if(!e)return;t.Transport.apply(this,arguments);this.sendBuffer=[]}t.util.inherit(i,t.Transport);i.prototype.open=function(){this.socket.setBuffer(false);this.onOpen();this.get();this.setCloseTimeout();return this};i.prototype.payload=function(e){var n=[];for(var i=0,o=e.length;i<o;i++){n.push(t.parser.encodePacket(e[i]))}this.send(t.parser.encodePayload(n))};i.prototype.send=function(e){this.post(e);return this};function o(){}i.prototype.post=function(e){var t=this;this.socket.setBuffer(true);function i(){if(this.readyState==4){this.onreadystatechange=o;t.posting=false;if(this.status==200){t.socket.setBuffer(false)}else{t.onClose()}}}function r(){this.onload=o;t.socket.setBuffer(false)}this.sendXHR=this.request("POST");if(n.XDomainRequest&&this.sendXHR instanceof XDomainRequest){this.sendXHR.onload=this.sendXHR.onerror=r}else{this.sendXHR.onreadystatechange=i}this.sendXHR.send(e)};i.prototype.close=function(){this.onClose();return this};i.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),i=t.util.query(this.socket.options.query,"t="+ +new Date);n.open(e||"GET",this.prepareUrl()+i,true);if(e=="POST"){try{if(n.setRequestHeader){n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}else{n.contentType="text/plain"}}catch(o){}}return n};i.prototype.scheme=function(){return this.socket.options.secure?"https":"http"};i.check=function(e,i){try{var o=t.util.request(i),r=n.XDomainRequest&&o instanceof XDomainRequest,s=e&&e.options&&e.options.secure?"https:":"http:",a=n.location&&s!=n.location.protocol;if(o&&!(r&&a)){return true}}catch(l){}return false};i.xdomainCheck=function(e){return i.check(e,true)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);!function(e,t){e.htmlfile=n;function n(e){t.Transport.XHR.apply(this,arguments)}t.util.inherit(n,t.Transport.XHR);n.prototype.name="htmlfile";n.prototype.get=function(){this.doc=new(window[["Active"].concat("Object").join("X")])("htmlfile");this.doc.open();this.doc.write("<html></html>");this.doc.close();this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio";this.doc.body.appendChild(e);this.iframe=this.doc.createElement("iframe");e.appendChild(this.iframe);var n=this,i=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+i;t.util.on(window,"unload",function(){n.destroy()})};n.prototype._=function(e,t){e=e.replace(/\\\//g,"/");this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(i){}};n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null;this.iframe.parentNode.removeChild(this.iframe);this.iframe=null;CollectGarbage()}};n.prototype.close=function(){this.destroy();return t.Transport.XHR.prototype.close.call(this)};n.check=function(e){if(typeof window!="undefined"&&["Active"].concat("Object").join("X")in window){try{var n=new(window[["Active"].concat("Object").join("X")])("htmlfile");return n&&t.Transport.XHR.check(e)}catch(i){}}return false};n.xdomainCheck=function(){return false};t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports);!function(e,t,n){e["xhr-polling"]=i;function i(){t.Transport.XHR.apply(this,arguments)}t.util.inherit(i,t.Transport.XHR);t.util.merge(i,t.Transport.XHR);i.prototype.name="xhr-polling";i.prototype.heartbeats=function(){return false};i.prototype.open=function(){var e=this;t.Transport.XHR.prototype.open.call(e);return false};function o(){}i.prototype.get=function(){if(!this.isOpen)return;var e=this;function t(){if(this.readyState==4){this.onreadystatechange=o;if(this.status==200){e.onData(this.responseText);e.get()}else{e.onClose()}}}function i(){this.onload=o;this.onerror=o;e.retryCounter=1;e.onData(this.responseText);e.get()}function r(){e.retryCounter++;if(!e.retryCounter||e.retryCounter>3){e.onClose()}else{e.get()}}this.xhr=this.request();if(n.XDomainRequest&&this.xhr instanceof XDomainRequest){this.xhr.onload=i;this.xhr.onerror=r}else{this.xhr.onreadystatechange=t}this.xhr.send(null)};i.prototype.onClose=function(){t.Transport.XHR.prototype.onClose.call(this);if(this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=o;try{this.xhr.abort()}catch(e){}this.xhr=null}};i.prototype.ready=function(e,n){var i=this;t.util.defer(function(){n.call(i)})};t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);!function(e,t,n){var i=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=o;function o(e){t.Transport["xhr-polling"].apply(this,arguments);this.index=t.j.length;var n=this;t.j.push(function(e){n._(e)})}t.util.inherit(o,t.Transport["xhr-polling"]);o.prototype.name="jsonp-polling";o.prototype.post=function(e){var n=this,i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var o=document.createElement("form"),r=document.createElement("textarea"),s=this.iframeId="socketio_iframe_"+this.index,a;o.className="socketio";o.style.position="absolute";o.style.top="0px";o.style.left="0px";o.style.display="none";o.target=s;o.method="POST";o.setAttribute("accept-charset","utf-8");r.name="d";o.appendChild(r);document.body.appendChild(o);this.form=o;this.area=r}this.form.action=this.prepareUrl()+i;function l(){u();n.socket.setBuffer(false)}function u(){if(n.iframe){n.form.removeChild(n.iframe)}try{a=document.createElement('<iframe name="'+n.iframeId+'">')}catch(e){a=document.createElement("iframe");a.name=n.iframeId}a.id=n.iframeId;n.form.appendChild(a);n.iframe=a}u();this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(c){}if(this.iframe.attachEvent){a.onreadystatechange=function(){if(n.iframe.readyState=="complete"){l()}}}else{this.iframe.onload=l}this.socket.setBuffer(true)};o.prototype.get=function(){var e=this,n=document.createElement("script"),o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(this.script){this.script.parentNode.removeChild(this.script);this.script=null}n.async=true;n.src=this.prepareUrl()+o;n.onerror=function(){e.onClose()};var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(n,r);this.script=n;if(i){setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e);document.body.removeChild(e)},100)}};o.prototype._=function(e){this.onData(e);if(this.isOpen){this.get()}return this};o.prototype.ready=function(e,n){var o=this;if(!i)return n.call(this);t.util.load(function(){n.call(o)})};o.check=function(){return"document"in n};o.xdomainCheck=function(){return true};t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this);if(typeof define==="function"&&define.amd){define([],function(){return io})}}();if(typeof Object.create==="undefined"){Object.create=function(e){function t(){}t.prototype=e;return new t}}$(document).ready(function(){var e=window.location.hash?window.location.hash.substring(1):null;$(".extender").on("click",function(){var e="#"+$(this).attr("data-target");$(e).toggle()});$(document).on("click",".nav-pills a",function(){var e=$(this);var t=e.attr("href").substring(1);var n=$(this).closest("li");$(".nav-pills li").each(function(){var e=$(this);if(e[0]==n[0]){e.addClass("active")}else{e.removeClass("active")}});$(".nav-section").each(function(){var e=$(this);if(e.attr("id")===t){e.addClass("active");e.removeClass("hidden")}else{e.addClass("hidden");e.removeClass("active")}})});var t=$(".nav-pills li.active").length>0;$(".nav-pills li").each(function(n){var i=$(this);if(!t){if(e){if(e===i.children("a").attr("href").substring(1)){i.addClass("active")}}else if(n==0){i.addClass("active")}}});$(".nav-section").each(function(n){var i=$(this);if(t){if(!i.hasClass("active")){i.addClass("hidden")}}else if(e){if(e!=i.attr("id")){i.addClass("hidden")}}else if(n>0){i.addClass("hidden")}});$(document).on("click",".alert > .close",function(){$(this).closest(".alert").remove()});$("abbr.timeago").timeago();$(".placeholder").placeholder();$(".tooltip").tipsy()});$.ajaxSetup({cache:false});
//# sourceMappingURL=all.min.map